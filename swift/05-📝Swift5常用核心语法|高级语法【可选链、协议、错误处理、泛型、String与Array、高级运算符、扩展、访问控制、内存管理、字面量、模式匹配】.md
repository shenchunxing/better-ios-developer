03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举、值类型和引用类型】 - 掘金 (function (){ var options = { bdms: { aid: 2608, paths: \[ '/growth\_api/v1/publish\_benefit\_history', '/growth\_api/v1/check\_in', '/growth\_api/v1/lottery/draw', '/growth\_api/v1/lottery/ten\_draw', '/web\_shorten', '/user\_api/v1/user/get', '/interact\_api/v1/digg/save', '/interact\_api/v1/digg/query\_page', '/interact\_api/v1/comment/list', '/interact\_api/v1/comment/hots', '/content\_api/v1/article/detail', \] }, verifyCenter: { interceptPathList: \[ '/user\_api/v1/user/get', '/interact\_api/v1/digg/save', '/interact\_api/v1/digg/query\_page', '/interact\_api/v1/comment/list', '/interact\_api/v1/comment/hots', '/content\_api/v1/article/detail', \], commonOptions: { aid: 2608, }, captchaOptions: { showMode: 'mask', }, } } window.\_SdkGlueInit(options) })(); ;(function (w, d, u, b, n, pc, ga, ae, po, s, p, e, t, pp) {pc = 'precollect';ga = 'getAttribute';ae = 'addEventListener';po = 'PerformanceObserver';s = function (m) {p = \[\].slice.call(arguments);p.push(Date.now(), location.href);(m == pc ? s.p.a : s.q).push(p)};s.q = \[\];s.p = { a: \[\] };w\[n\] = s;e = document.createElement('script');e.src = u + '?bid=' + b + '&globalName=' + n;e.crossOrigin = u.indexOf('sdk-web') > 0 ? 'anonymous' : 'use-credentials';d.getElementsByTagName('head')\[0\].appendChild(e);if (ae in w) {s.pcErr = function (e) {e = e || w.event;t = e.target || e.srcElement;if (t instanceof Element || t instanceof HTMLElement) {if (t\[ga\]('integrity')) {w\[n\](pc, 'sri', t\[ga\]('href') || t\[ga\]('src'))} else {w\[n\](pc, 'st', { tagName: t.tagName, url: t\[ga\]('href') || t\[ga\]('src') })}} else {w\[n\](pc, 'err', e.error || e.message)}};s.pcRej = function (e) {e = e || w.event;w\[n\](pc, 'err', e.reason || (e.detail && e.detail.reason))};w\[ae\]('error', s.pcErr, true);w\[ae\]('unhandledrejection', s.pcRej, true);};if('PerformanceLongTaskTiming' in w) {pp = s.pp = { entries: \[\] };pp.observer = new PerformanceObserver(function (l) {pp.entries = pp.entries.concat(l.getEntries())});pp.observer.observe({ entryTypes: \['longtask', 'largest-contentful-paint','layout-shift'\] })}})(window,document,'https://lf3-short.ibytedapm.com/slardar/fe/sdk-web/browser.cn.js','2608','SlardarWeb')\[{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://juejin.cn/post/7119513630550261774"},"headline":"03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举、值类型和引用类型】","description":"复习Swift5核心语法,夯实基础,通过汇编查探Swift语言的本质。一步一步认识Swift的底层实现","image":\[\],"author":{"@type":"Organization","name":"没有故事的Zhang同学"},"publisher":{"@type":"Organization","name":"掘金","logo":{"@type":"ImageObject","url":"//lf3-cdn-tos.bytescm.com/obj/static/xitu\_juejin\_web/e08da34488b114bd4c665ba2fa520a31.svg"}},"datePublished":"2022-07-12T23:49:05+08:00","dateModified":"2023-07-09T00:21:30+08:00"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":\[{"@type":"ListItem","name":"稀土掘金","position":1,"item":"https://juejin.cn"},{"@type":"ListItem","name":"iOS","position":2,"item":"https://juejin.cn/ios"},{"@type":"ListItem","name":"文章","position":3}\]}\] (function () { const pages = \[ /^\\/$/, /^\\/following$/, /^\\/recommended$/, '^/pins.\*', '^/pin.\*', /^\\/course(?!\\/payment\\/)/, /^\\/post\\/.\*/, '^/hot.\*', /^\\/book\\/\\d+/, /^\\/video\\/\\d+/, /^\\/user\\/settings.\*/, /^\\/spost\\/\\d+/, /^\\/notification(?!\\/im)/, '^/backend', '^/frontend', '^/android', '^/ios', '^/ai', '^/freebie', '^/career', '^/article', \]; function isInJuejinApp() { const userAgent = typeof navigator !== 'undefined' ? navigator.userAgent : ''; return /juejin/i.test(userAgent); } if (typeof window !== 'undefined' && !isInJuejinApp()) { try { const path = window.location.pathname; const isAvailable = pages.some((page) => { const reg = new RegExp(page); return reg.test(path); }); if (isAvailable) { const localValue = localStorage.getItem('juejin\_2608\_theme') || '{}'; let { theme = 'light', isFollowSystem = false } = JSON.parse(localValue); if (isFollowSystem) { const themeMedia = window.matchMedia('(prefers-color-scheme: light)'); theme = themeMedia.matches ? 'light' : 'dark'; localStorage.setItem('juejin\_2608\_theme', JSON.stringify({ theme, isFollowSystem })); } document.body.setAttribute('data-theme', theme); } else { document.body.setAttribute('data-theme', 'light'); } } catch (e) { console.error('浏览器不支持localStorage'); } } })()

 [![稀土掘金](//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg) ![稀土掘金](//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/6c61ae65d1c41ae8221a670fa32d05aa.svg)](/) 

*   首页
    
    *   [首页](/)
    *   [沸点](/pins)
    *   [课程](/course)
    *   [直播](/live)
    *   [活动](/events/all)
    *   [竞赛](/challenge)
    
    [商城](https://detail.youzan.com/show/goods/newest?kdt_id=104340304)
    
    [APP](/app?utm_source=jj_nav)
    
    [插件](https://juejin.cn/extension?utm_source=jj_nav)
    

*   *   搜索历史 清空
        
    *   创作者中心
        
        *   写文章
            
        *   发沸点
            
        *   写笔记
            
        *   写代码
            
        *   草稿箱
            
        
        创作灵感 查看更多
        
*   ![vip](//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/24127194d5b158d7eaf8f09a256c5d01.svg)
    
    会员
    
*   登录
    
    注册
    

   

 

  

03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举、值类型和引用类型】
============================================

[没有故事的Zhang同学](/user/1574156381196600/posts)

2022-07-12 23:49 1264

.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built\_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0cae050c9bb44501bc36ce4f06ca650d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

一、概述
====

本系列文章旨在复习`Swift5`核心语法且适当进行底层原理探索,属于阶段性复习和巩固,以供日后进一步探索`Swift`语言的底层原理做铺垫。

整个系列文章如下，每一文章知识点独立成篇,欢迎各位按需或按兴趣点击阅读:

*   **[01-📝Swift5常用核心语法|了解Swift【Swift简介、Swift的版本、Swift编译原理】](https://juejin.cn/spost/7119020967430455327 "https://juejin.cn/spost/7119020967430455327")**
*   **[02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】](https://juejin.cn/spost/7119510159109390343 "https://juejin.cn/spost/7119510159109390343")**
*   **[03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举】](https://juejin.cn/spost/7119513630550261774 "https://juejin.cn/spost/7119513630550261774")**
*   **[04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】](https://juejin.cn/spost/7119714488181325860 "https://juejin.cn/spost/7119714488181325860")**
*   **[05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】](https://juejin.cn/spost/7119722433589805064 "https://juejin.cn/spost/7119722433589805064")**
*   **[06-📝Swift5常用核心语法|编程范式与Swift源码【从OC到Swift、函数式编程、面向协议编程、响应式编程、Swift源码分析】](https://juejin.cn/spost/7253350009289424933 "https://juejin.cn/spost/7253350009289424933")**

二、 闭包
=====

1\. 闭包表达式（Closure Expression）
-----------------------------

*   1.  在Swift中，可以通过`func`定义一个函数，也可以通过`闭包表达式`定义一个函数
*   2.  闭包表达式格式如下:
    
        {
            (参数列表) -> 返回值类型 in
            函数体代码
        }
        
    
        var fn = {
            (v1: Int, v2: Int) -> Int in
            return v1 + v2
        }
        fn(10, 20)
        
        {
            (v1: Int, v2: Int) -> Int in
            return v1 + v2
        }(10, 20)
        
    
*   3.  闭包表达式的简写如下:
    
    *   case1
    
        var fn = {
            (v1: Int, v2: Int) -> Int in
            return v1 + v2
        }
        
        var fn: (Int, Int) -> Int = { $0 + $1 }
        
    
    *   case2
    
        func exec(v1: Int, v2: Int, fn: (Int, Int) -> Int) {
            print(fn(v1, v2))
        }
        
        
        exec(v1: 10, v2: 20) {
            (v1, v2) -> Int in
            return v1 + v2
        }
        
        exec(v1: 10, v2: 20, fn: {
            (v1, v2) -> Int in
            return v1 + v2
        })
        
        exec(v1: 10, v2: 20, fn: {
            (v1, v2) -> Int in
            v1 + v2
        })
        
        exec(v1: 10, v2: 20, fn: {
            v1, v2 in return v1 + v2
        })
        
        exec(v1: 10, v2: 20, fn: {
            v1, v2 in v1 + v2
        })
        
        exec(v1: 10, v2: 20, fn: { $0 + $1 })
        
        exec(v1: 10, v2: 20, fn: +)
        
    

2\. 尾随闭包
--------

*   1.  如果将一个**很长的闭包表达式**作为`函数的最后一个实参`，使用尾随闭包可以增强函数的可读性
*   2.  尾随闭包是一个被书写在函数调用括号外面（后面）的闭包表达式
    
        func exec(v1: Int, v2: Int, fn: (Int, Int) -> Int) {
            print(fn(v1, v2))
        }
        
        exec(v1: 10, v2: 20) {
            $0 + $1
        }
        
    
*   3.  如果闭包表达式是函数的唯一实参，而且使用了尾随闭包的语法，那就不需要在函数名后边写圆括号
    
        func exec(fn: (Int, Int) -> Int) {
            print(fn(1, 2))
        }
        
        exec(fn: { $0 + $1 })
        exec() { $0 + $1 }
        exec { $0 + $1 }
        exec { _, _ in 10 }
        
    

> **Swift中的`sort函数`用来排序的，使用的就是闭包的写法** ![-w449](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f9ca96482e64b23a2070103d27e0864~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w597](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c14249c8cbee44eabecb4d75ac969fbc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

    var nums = [11, 2, 18, 6, 5, 68, 45]
    
    //1.
    nums.sort()
    
    //2.
    nums.sort { (i1, i2) -> Bool in
        i1 < i2
    }
    
    //3.
    nums.sort(by: { (i1, i2) in return i1 < i2 })
    
    //4.
    nums.sort(by: { (i1, i2) in return i1 < i2 })
    
    //5.
    nums.sort(by: { (i1, i2) in i1 < i2 })
    
    //6.
    nums.sort(by: { $0 < $1 })
    
    //7.
    nums.sort(by: <)
    
    //8.
    nums.sort() { $0 < $1 }
    
    //9.
    nums.sort { $0 < $1 }
     
    //10.
    print(nums) // [2, 5, 6, 11, 18, 45, 68]
    

3\. 闭包的定义（Closure）
------------------

> **严谨的定义是:**

*   一个函数和它所捕获的`变量/常量`环境组合起来，称为闭包
    
    *   一般指定义在函数内部的函数
    *   一般它捕获的是外层函数的局部变量\\常量
    *   全局变量,全局都可以访问,内存只有一份,且只要程序不停止运行,其内存就不会回收
    
        typealias Fn = (Int) -> Int
        
        func getFn() -> Fn {
            var num = 0
            func plus(_ i: Int) -> Int {
                num += i
                return num
            }
            return plus
        }
        
    
        func getFn() -> Fn {
            var num = 0
            return {
                num += $0
                return num
            }
        }
        
    
         var fn1 = getFn()
         var fn2 = getFn() 
         
         fn1(1) // 1
         fn2(2) // 2
         fn1(3) // 4 
         fn2(4) // 6
         fn1(5) // 9 
         fn2(6) // 12
        
    

> **通过汇编分析闭包的实现** 看下面示例代码，分别打印为多少

    func getFn() -> Fn {
        var num = 0
        func plus(_ i: Int) -> Int {
            num += i
            return num
        }
        return plus
    }
    
    var fn = getFn()
    
    print(fn(1)) // 1
    print(fn(2)) // 3
    print(fn(3)) // 6
    print(fn(4)) // 10
    

我们通过反汇编来观察: ![-w1012](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6738fd229b74dda8a490a4af0749cb6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) 通过这句调用可以看出:

*   在`return plus`之前，闭包(表层通过`allicObject`)底层会调用`malloc函数`进行堆内存的分配，也就是将拷贝num的值到堆上来持有不被释放
*   而栈里的num由于`getFn`调用完毕就随着栈释放了，`plus函数`里操作的都是堆上的num
*   调用`malloc函数`之前需要告诉系统要分配多少内存，需要24个字节来存储内存
    *   (因为在iOS系统中,分配堆内存的底层算法有内存对齐的概念，内存对齐的参数是16)而通过`malloc函数`分配的内存都是大于或等于其本身数据结构所需内存的16的最小倍数，所以会分配32个字节内存

![-w1014](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46c0949ee2ef49bda6a3dd1e72f8c0f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w596](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97ddb3df35cc4d7bb056ede40594e683~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

我们打印`rax寄存器`的值可以知道:

*   系统分配的32个字节，前16个字节用来存储其他信息
*   而且从图上的圈起来的地方也可以看到，将0移动16个字节
*   所以16个字节之后的8个字节才用来存储num的值

![-w532](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9dcceef7db894af68271c5622ac1db14~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

调用`fn(1)`，将断点打在这里，然后查看反汇编指令

![-w1009](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b0e109bf5ef45089e0d082fd181a8ed~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w575](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3b2bc9e7751486e9241c76521fcb8bd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

然后调用到`plus函数`内部，再次打印`rax寄存器`的值，发现num的值已经变为1了

![-w575](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5341d04835242f9acb064f3c5c99601~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

然后继续往下执行调用`fn(2)`，发现num的值已经变为3了

![-w606](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/369ab4213cdf41908e77b2c703499416~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

然后继续往下执行调用`fn(3)`，发现num的值已经变为6了

![-w596](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/719e3ef11cb747e6aca1260882450353~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

然后继续往下执行调用`fn(4)`，发现num的值已经变为10了

**闭包和类的相似之处**

我们可以把闭包想像成是一个类的实例对象

*   内存在堆空间
*   捕获的局部变量\\常量就是对象的成员（存储属性）
*   组成闭包的函数就是类内部定义的方法

类似如下示例

    class Closure {
        var num = 0
        
        func plus(_ i: Int) -> Int {
            num += i
            return num
        }
    }
    
    var cs = Closure()
    cs.plus(1)
    cs.plus(2)
    cs.plus(3)
    cs.plus(4)
    

而且通过反汇编也能看出类和闭包的共同之处:

*   分配的堆内存空间前16个字节都是用来存储`数据类型信息`和`引用计数`的

> **再看下面的示例**

如果把num变成全局变量呢，还会不会分配堆内存

    typealias Fn = (Int) -> Int
    
    var num = 0
    
    func getFn() -> Fn {
    
        func plus(_ i: Int) -> Int {
            num += i
            return num
        }
        return plus
    }
    
    var fn = getFn()
    
    print(fn(1)) // 1
    print(fn(2)) // 3
    print(fn(3)) // 6
    print(fn(4)) // 10
    

我们通过反汇编可以看到，系统不再分配堆内存空间了

![-w717](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6a93827e65740c592f1a633795568cb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

> **注意:** 如果返回值是函数类型，那么参数的修饰要保持统一

    func add(_ num: Int) -> (inout Int) -> Void {
        func plus(v: inout Int) {
            v += num
        }
        
        return plus
    }
    
    var num = 5
    add(20)(&num)
    
    print(num)
    

4\. 自动闭包
--------

我们先看下面的示例代码

如果调用`getFirstPositive`并传入两个参数，第一个参数符合条件，但是还需要调用`plus`来得到第二个参数，这种设计相比就稍许有些浪费了

    // 如果第1个数大于0，返回第一个数。否则返回第2个数
    func getFirstPositive(_ v1: Int, _ v2: Int) -> Int {
        v1 > 0 ? v1 : v2
    }
    
    func plus(_ num1: Int, _ num2: Int) -> Int {
        print("haha")
        return num1 + num2
    }
    
    getFirstPositive(10, plus(2, 4))
    

我们进行了一些优化，将第二个参数的类型变为函数，只有条件成立的时候才会去调用

    func getFirstPositive(_ v1: Int, _ v2: () -> Int) -> Int {
        v1 > 0 ? v1 : v2()
    }
    
    func plus(_ num1: Int, _ num2: Int) -> Int {
        print("haha")
        return num1 + num2
    }
    
    getFirstPositive(10, { plus(2, 4)} )
    

这样确定能够满足条件避免多余的调用，但是可读性就会差一些

> **我们可以使用`自动闭包@autoclosure`来修饰形参**

*   1.  `@autoclosure`会将传进来的类型包装成闭包表达式，这是编译器特性
*   2.  `@autoclosure`只支持`() -> T`格式的参数
    
        func getFirstPositive(_ v1: Int, _ v2: @autoclosure () -> Int) -> Int {
            v1 > 0 ? v1 : v2()
        }
        
        func plus(_ num1: Int, _ num2: Int) -> Int {
            print("haha")
            return num1 + num2
        }
        
        getFirstPositive(10, plus(2, 4))
        
    
*   3.  `@autoclosure`并非只支持最后一个参数
    
        func getFirstPositive(_ v1: Int, _ v2: @autoclosure () -> Int, _ v3: Int) -> Int 
        {
            v1 > 0 ? v1 : v2()
        }
        
    
*   4.  `空合并运算符??`中就使用了`@autoclosure`来将`??`后面的参数进行了包装 ![-w860](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd984c9d6f3643dab1b92ab556f30183~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
*   5.  有`@autoclosure`和无`@autoclosure`会构成函数重载，不会报错
    
        func getFirstPositive(_ v1: Int, _ v2: () -> Int) -> Int {
            v1 > 0 ? v1 : v2()
        }
        
        func getFirstPositive(_ v1: Int, _ v2: @autoclosure () -> Int) -> Int {
            v1 > 0 ? v1 : v2()
        }
        
    

**注意：为了避免与期望冲突，使用了`@autoclosure`的地方最好明确注释清楚：这个值会被推迟执行**

5\. 通过汇编进行底层分析
--------------

**1.分析下面这个函数的内存布局**

    func sum(_ v1: Int, _ v2: Int) -> Int { v1 + v2 }
    
    var fn = sum
    print(MemoryLayout.stride(ofValue: fn)) // 16
    

反汇编之后 ![-w717](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4ba5da513114259b612ace0f69a5aed~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) 可以看到:

*   底层会先计算sum的值，然后移动到fn的前8个字节
*   再将0移动到fn的后8个字节，总共占用16个字节 ![-w716](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b5f06739b3245a58064cb8f6a325600~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

两个地址相差8个字节，所以是连续的，都表示fn的前后8个字节的地址值

**2.分析下面这个函数的内存布局**

    typealias Fn = (Int) -> Int
    
    func getFn() -> Fn {
        var num = 0
        
        func plus(_ i: Int) -> Int {
            return i
        }
        return plus
    }
    
    var fn = getFn()
    
    print(Mems.size(ofVal: &fn)) // 16
    

反汇编之后 ![-w716](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a378d1df3a52495fb11f4faeb14dd569~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

我们能看到:

*   1.  先调用`getFn`
*   2.  之后`rax`和`rdx`会给fn分配16个字节

然后我们进入`getFn`看看`rax`和`rdx`存储的值分别是什么

![-w715](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad095c56c2a84749ad673f279bd1931e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

可以看到会将`plus的返回值`放到`rax`中 ![-w949](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/085cd31f92be495199b099b63083aa34~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

可以看到`ecx`和自己进行异或运算，并把结果0存储到`rdx`中

所以回过头看第一张图就知道了，fn的`16`个字节中，前8个字节存储的是`plus`的返回值，后8个字节存储的是0  
等同于将`plus函数`赋值给fn

    var fn = plus()
    

**3.分析下面这个函数的内存布局**

我们将上面示例里的`plus函数`内部对num进行捕获，看看其内存布局有什么变化

    typealias Fn = (Int) -> Int
    
    func getFn() -> Fn {
        var num = 0
        
        func plus(_ i: Int) -> Int {
            num += i
            return num
        }
        return plus
    }
    
    var fn = getFn()
    
    fn(1)
    fn(2)
    fn(3)
    
    print(Mems.size(ofVal: &fn)) // 16
    

反汇编之后

![-w945](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/359c67b88a43494086592a1db8b278e1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

我们可以看到，调用完`getFn`之后，会分别将`rax`和`rdx`的值移动到`rip+内存地址`，也就是给全局变量fn进行赋值操作

我们通过打印获取fn的内存占用知道是16个字节，fn的前8个字节就是`rax`里存储的值，而后8个字节存储的是`rdx`里的值

我们只需要找到`rax`和`rdx`里分别存储的是什么就可以了

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ded70d76d4864333b63e1a29636cc9f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

可以看到在堆空间分配完内存之后的`rax`给上面几个都进行了赋值，最后的`rdx`里存储的就是堆空间的地址值

![-w944](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/647e6838c3f24c4eb26ef62086e1d306~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

从这句看`rax`里存储的应该是和`plus函数`相关，下面我们就要找到`rax`里存储的是什么

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/905044a7ab2e4a6092d55c9c4f0f71c2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w946](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f1a75e937114d70811f800dc4f78bf7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

而且我们调用fn(1)时也可以推导出是调用的全局变量fn的前八个字节

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7fee0fda6ede44099ed1fe6adab5e262~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

参数1会存储到`edi`中

而经过上面的推导我们知道`-0xf8(%rbp)`中存储的是fn的前8个字节，那么往后8位就是`-0x100(%rbp)`，里面放的肯定就是堆空间的地址值了，存储到了`r13`中

我们在这里打断点，来观察`rax`里到底存储的是什么

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96ff7d5814604fedb11ba3968cdb7ce4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w946](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0cd10a8dcbe430cba1fb3675e49deb3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/905e16cba0fd44a48538817ff1df9c8d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62511fbce3fe436caa43c1e6a671f0c7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w949](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/718280ea6726479ea4c13567165e2145~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

经过一系列的跳转，重要来到了plus真正的函数地址

而且`r13`最后给了`rsi`，`rdi`中存储的还是参数1

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df72a2a945654c71a6b0b194e747d7fa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w946](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2369455bac414bd29408f0a23b3d0a49~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

进到`plus函数`中，然后找到进行相加计算的地方，因为传进来的参数是变化的，所以不可能是和固定地址值进行相加

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a5b3056bee744af690d00c5355b5d913~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w946](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/235f74a0520a4ad58200b36fd23a5969~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过推导得知`rcx`里存储的值就是`rdi`中的参数1

![-w945](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/037d3d0619c34d2587f3ffc37ffd1e4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w945](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d961d60c35c54becab0b2e34028a9e9f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过推导得知`rdx`里存储的值就是`rsi`中的堆内存的num地址

所以可以得知`0x10(%rdx)`也就是`rdx`跳过16个字节的值就是num的值

![-w741](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4d1ea7c9c4944b18af51213921f2bbd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过打印也可以证明我们的分析是正确的

![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c28a28b9ae264d3d98844a06e0a5fb2b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w946](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff502270a2884bde85bf51405764b28f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过推导可以发现`rax`中存储的是`rsi`的num的地址值

然后将`rcx`中的值覆盖掉`rax`中的num地址值

而且真正进行捕获变量的时机是在`getFn`即将return之前做的事

**4.分析下面这个函数的内存布局**

我们来看下面这个闭包里的变量会被捕获几次

    typealias Fn = (Int) -> (Int, Int)
    
    func getFns() -> (Fn, Fn) {
        var num1 = 0
        var num2 = 0
    
        func plus(_ i: Int) -> (Int, Int) {
            num1 += i // 6 + 0 = 6, 1 + 4 = 5,
            num2 += i << 1 // 1100 = 12 + 0 = 12, 1000 = 8 + 2 = 10
            return (num1, num2)
        }
    
        func minus(_ i: Int) -> (Int, Int) {
            num1 -= i // 6 - 5 = 1, 5 - 3 = 2
            num2 -= i << 1 // 1010 = 12 - 10 = 2, 0110 = 10 - 6 = 4
            return (num1, num2)
        }
    
        return (plus, minus)
    }
    
    let (p, m) = getFns()
    print(p(6)) // 6, 12
    print(m(5)) // 1, 2
    print(p(4)) // 5, 10
    print(m(3)) // 2, 4
    

反汇编之后

![-w946](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5bd66e2c622e4b06ae82ed5f8fc7e2bb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

发现其底层分别会分配两个堆空间，但是num1、num2也只是分别捕获一次，然后两个函数`plus、minus`共有

三、结构体
=====

1\. 基本概念
--------

*   在Swift**标准库中，绝大多数的公开类型都是结构体**，而**枚举和类只占很小一部分**
    *   比如`Bool、Int、String、Double、Array、Dictionary`等常见类型都是结构体
        
                struct Date {
                    var year: Int
                    var month: Int
                    var day: Int
                }
                var date = Date(year: 2019, month: 6, day: 23)
            
        
*   所有的结构体**都有一个编译器自动生成的初始化器**（`initializer`，初始化方法、构造器、构造方法）
    *   通过默认生成的初始化器初始化:传入所有成员值，用以初始化所有成员（`存储属性`，`Stored Property`）
        
               var date = Date(year: 2019, month: 6, day: 23)
            
        

2\. 结构体的初始化器
------------

*   编译器会根据情况，可能会为结构体生成多个初始化器，宗旨是：`保证所有成员都有初始值`
*   如果结构体的成员定义的时候都有默认值了，那么生成的初始化器不会报错 ![-w569](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7f34e0c903b4112a1a603c46665c4ae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
    *   如果是下面这几种情况就会报错 ![-w642](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e364616dd6c944f28d5ab613284d4403~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w645](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/189bf09fbbf248df8396eaa8a9b74c33~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w640](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de06012b6cec46dabe604d027cd1654a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
    *   如果是可选类型的初始化器也不会报错，因为可选类型默认的值就是`nil` ![-w457](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a73b4ae9ef8415ab4c5b3de861cd5fa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

3\. 自定义初始化器
-----------

我们也可以自定义初始化器

    struct Point {
        var x: Int = 0
        var y: Int = 0
        
        init(x: Int, y: Int) {
            self.x = x
            self.y = y
        }
    } 
    var p1 = Point(x: 10, y: 10)
    

下面对变量`p2`、`p3`、`p4`初始化报错的原因是 因为我们 **`已经自定义初始化器了，编译器就不会再帮我们生成默认的初始化器了`** ![-w643](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da74440857c645b6990bc678cf0ab2f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

4\. 初始化器的本质
-----------

下面这两种写法是完全等效的

    struct Point {
        var x: Int = 0
        var y: Int = 0
    } 
    等效于 
    struct Point {
        var x: Int
        var y: Int
        
        init() {
            x = 0
            y = 0
        }
    } 
    var p4 = Point()
    

*   我们通过反汇编分别对比一下两种写法的实现，发现也是一样的:
*   因此,我们不难得出结论:  
    默认初始化器的本质,就是给存储属性做了默认赋值工作(比如这里给Int类型的两个属性默认赋值为`0`) ![-w713](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bde85343b7e74b75a53d605462260979~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w715](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a431a9e76973412dbfe8e6014d9bc01a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

5.结构体的内存结构
----------

1.  **我们通过打印,了解下结构体占用的内存大小 和 其 内存布局**

    struct Point {
        var x: Int = 10
        var y: Int = 20
    } 
    var p4 = Point() 
    print(MemoryLayout<Point>.stride) // 16
    print(MemoryLayout<Point>.size) // 16
    print(MemoryLayout<Point>.alignment) // 8
    
    print(Mems.memStr(ofVal: &p4)) // 0x000000000000000a 0x0000000000000014
    

通过控制台,我们可以看到:

*   系统一共分配了`16`个字节的内存空间
*   前8个字节存储的是10，后8个字节存储的是20

2.  我们再看下面这个结构体

    struct Point {
        var x: Int = 10
        var y: Int = 20
        var origin: Bool = false
    }
    
    var p4 = Point()
    
    print(MemoryLayout<Point>.stride) // 24
    print(MemoryLayout<Point>.size) // 17
    print(MemoryLayout<Point>.alignment) // 8
    
    print(Mems.memStr(ofVal: &p4)) // 0x000000000000000a 0x0000000000000014 0x0000000000000000
    

可以看到:

*   结构体实际只用了17个字节，而因为系统分配有内存对齐的概念,所以分配了24个字节
*   前8个字节存储的是10，中间8个字节存储的是20，最后1个字节存储的是false，也就是0

四、类
===

*   类的定义和结构体类似，但编译器并没有为类自动生成可以传入成员值的初始化器 ![-w646](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/48faa928fa484b87a2ae3996bbcabac8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
*   如果成员没有初始值，所有的初始化器都会报错 ![-w648](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5699df524e743128207ac9c2edbd947~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

1\. 类的初始化器
----------

*   如果类的所有成员都在定义的时候指定了初始值，编译器会为类生成 **`无参的初始化器`**
*   成员的初始化是在这个初始化器中完成的
    
        class Point {
            var x: Int = 0
            var y: Int = 0
        }
        
        let p1 = Point()
        
    
    *   下面这两种写法是完全等效的
        
            class Point {
                var x: Int = 0
                var y: Int = 0
            }
            
            等效于
            
            class Point {
                var x: Int
                var y: Int
            
                init() {
                    x = 0
                    y = 0
                }
            }
            
            let p1 = Point()
            
        

2\. 结构体与类的本质区别
--------------

*   结构体是`值类型`（枚举也是值类型），类是`引用类型`（指针类型）  
    下面我们分析函数内的局部变量分别都在内存的什么位置

    class Size {
        var width = 1
        var height = 2
    } 
    struct Point {
        var x: Int = 3
        var y: Int = 4
    }
    
    func test() {
        var size = Size()
        var point = Point()
    } 
    

*   `变量`size和point都是在栈空间
*   不同的是`局部变量point`是一个结构体类型。结构体是值类型，结构体变量会在栈空间中分配内存,它里面的两个成员x、y按顺序的排布
*   而`局部指针变量size`是一个类的实例，类是引用类型，所以`size指针`指向的已初始化的变量的存储空间,是在堆中分配的，size指针内部存储的是Size类的实例内存地址 ![-w1020](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70ea6076fb1548509687cab9ebead2cd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

3\. 分析类的内存布局
------------

*   1.  我们先来看一下类的占用内存大小是多少
    
            class Size {
                var width = 1
                var height = 2
            }
            print(MemoryLayout<Size>.stride) // 8
        
    
    通过打印我们可以发现`MemoryLayout`获取的8个字节实际上是指针变量占用多少存储空间，并不是对象在堆中的占用大小
    
*   2.  然后我们再看类的内存布局是怎样的
    
            var size = Size()
        
            print(Mems.ptr(ofVal: &size)) // 0x000000010000c388
            print(Mems.memStr(ofVal: &size)) // 0x000000010072dba0
        
    
    通过打印我们可以看到变量里面存储的值也是一个地址
    
*   3.  我们再打印该变量所指向的对象的内存布局是什么
    
            print(Mems.size(ofRef: size)) // 32
            print(Mems.ptr(ofRef: size)) // 0x000000010072dba0
            print(Mems.memStr(ofRef: size)) // 0x000000010000c278 0x0000000200000003 0x0000000000000001 0x0000000000000002
        
    
    通过打印可以看到在`堆中存储的对象的地址`和上面的`指针变量里存储的值`是一样的
    
    内存布局里一共占用32个字节:
    
    *   前16个字节分别用来存储一些`类信息`和`引用计数`
    *   后面16个字节存储着类的成员变量的值

> **下面我们再从反汇编的角度来分析**

*   我们要想确定类是否在堆空间中分配空间，通过反汇编来查看是否有调用`malloc函数` ![-w708](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ff9723d317849f1a11137973bd89be3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w716](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a45d9d80a3d43efb61a81f9e475e045~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
*   然后就一直跟进直到这里最好调用了`swift_slowAlloc` ![-w714](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65b01d1dd467407f8ebc07a08d1c7d15~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
*   发现函数内部调用了系统的`malloc`在堆空间分配内存 ![-w709](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a9514ee0c924446a07710bd1ca2f405~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

**注意:**

*   结构体和枚举存储在哪里`取决于它们是在哪里分配`的
    *   如果是在函数中分配的那就是在栈里
    *   如果是在全局中分配的那就是在数据段
*   而类无论是在哪里分配的，对象都是在堆空间中
    *   指向对象内存的指针的存储位置是不确定的，可能在栈中也可能在数据段

> **我们再看下面的`类型`占用内存大小是多少**

    class Size {
        var width: Int = 0
        var height: Int = 0
        var test = true
    }
    
    let s = Size()
    
    print(Mems.size(ofRef: s)) // 48
    

*   在`Mac、iOS`中的`malloc函数`分配的内存大小总是`16的倍数`
*   类最前面会有`16个字节`用来存储`类的信息`和`引用计数`，所以实际占用内存是`33个字节`，但由于`malloc函数`分配的内存都是刚好大于或等于其所需内存的16最小倍数，所以分配`48个字节`
*   我们还可以通过`class_getInstanceSize`函数来获取类对象的内存大小

    // 获取的是经过内存对齐后的内存大小，不是malloc函数分配的内存大小
    print(class_getInstanceSize(type(of: s))) // 40
    print(class_getInstanceSize(Size.self)) // 40
    

五、枚举
====

1\. 枚举的基本用法
-----------

    enum Direction {
        case north
        case south
        case east
        case west
    }
    
    // 简便写法
    enum Direction {
        case north, south, east, west
    }
    
    var dir = Direction.west
    dir = Direction.east
    dir = .north
    print(dir) // north
    
    switch dir {
    case .north:
        print("north")
    case .south:
        print("south")
    case .east:
        print("east")
    case .west:
        print("west")
    }
    

2\. 关联值（Associated Values）
--------------------------

有时会将`枚举的成员值`和`其他类型的值`关联 **`存储在一起`** ,会非常有用

    enum Score {
         case points(Int)
         case grade(Character)
    }
    
    var score = Score.points(96)
    score = .grade("A")
    
    switch score {
    case let .points(i):
      debugPrint(i)
    case let .grade(i):
      debugPrint(i)
    }
    

    enum Date {
        case digit(year: Int, month: Int, day: Int)
        case string(String)
    }
    
    var date = Date.digit(year: 2020, month: 12, day: 5)
    date = .string("2022-07-10")
    //必要时【let】也可以改为【var】
    switch date {
    case .digit(let year, let month, let day):
      debugPrint(year, month, day)
    case let .string(value):
      debugPrint(value)
    }
    

> 关联值举例 ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/213b2a7017054921aab9ff40adb7f450~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?) ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ef6d6b00633049bd9d7052042ffdb84f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

    enum Password {
        case number(Int, Int, Int, Int)
        case gesture(String)
    }
    
    var pwd = Password.number(5, 6, 4, 7)
    pwd = .gesture("12369")
    
    switch pwd {
    case let .number(n1, n2, n3, n4):
        print("number is ", n1, n2, n3, n4)
    case let .gesture(str):
        print("gesture is ", str)
    }
    

必要时,使用了枚举关联值的`switch-case`语句 里面的 `let`也可以改成`var`

3\. 原始值（Raw Values）
-------------------

枚举成员可以使用`相同类型`的默认值预先关联，这个默认值叫做`原始值`

    enum PokerSuit: String {
       case spade = "♠"
       case heart = "♥"
       case diamond = "♦" 
       case club = "♣"
    }
    
    let suit = PokerSuit.heart
    debugPrint(suit)// heart
    debugPrint(suit.rawValue)// ♥
    debugPrint(PokerSuit.spade.rawValue)// ♠ 
    

    enum Grade : String { 
        case perfect = "A" 
        case great = "B" 
        case good = "C" 
        case bad = "D" 
    } 
    print(Grade.perfect.rawValue) // A 
    print(Grade.great.rawValue) // B 
    print(Grade.good.rawValue) // C
    print(Grade.bad.rawValue) // D
    

注意:

*   原始值不占用枚举变量的内存
*   原始值只是关联上了枚举变量，所以原始值占用内存的大小并不是枚举变量的大小
*   底层实现是通过计算属性/函数来获取原始值的

4\. 隐式原始值(Implicitly Assigned Raw Values)
-----------------------------------------

如果枚举的原始值类型是`Int`、`String`，Swift会自动分配原始值

字符串默认分配的原始值就是其变量名

    enum Direction: String {
        case north = "north"
        case south = "south"
        case east = "east"
        case west = "west"
    }
    
    // 等价于上面
    enum Direction: String {
         case north, south, east, west
    }
    print(Direction.north) // north
    print(Direction.north.rawValue) // north
    

**`Int类型`默认分配的原始值是从0开始递增的数字**

    enum Season: Int {
        case spring, summer, autumn, winter
    }
    
    print(Season.spring.rawValue) // 0
    print(Season.summer.rawValue) // 1
    print(Season.autumn.rawValue) // 2
    print(Season.winter.rawValue) // 3
    

**如果有指定原始值的，下一个就会按照已经指定的值递增分配**

    enum Season: Int {
        case spring = 1, summer, autumn = 4, winter
    } 
    print(Season.spring.rawValue) // 1
    print(Season.summer.rawValue) // 2
    print(Season.autumn.rawValue) // 4
    print(Season.winter.rawValue) // 5
    

5\. 递归枚举（Recursive Enumeration）
-------------------------------

*   1.  递归枚举要用`indirect`关键字来修饰`enum`，不然会报错
    
        indirect enum ArithExpr {
            case number(Int)
            case sum(ArithExpr, ArithExpr)
            case difference(ArithExpr, ArithExpr)
        }
        
        或者
        
        enum ArithExpr {
            case number(Int)
            indirect case sum(ArithExpr, ArithExpr)
            indirect case difference(ArithExpr, ArithExpr)
        }
        
        let five = ArithExpr.number(5)
        let four = ArithExpr.number(4)
        let sum = ArithExpr.sum(five, four)
        let two = ArithExpr.number(2)
        let difference = ArithExpr.difference(sum, two)
        
        func calculate(_ expr: ArithExpr) -> Int {
            switch expr {
            case let .number(value):
                return value
            case let .sum(left, right):
                return calculate(left) + calculate(right)
            case let .difference(left, right):
                return calculate(left) - calculate(right)
            }
        }
        
        calculate(difference)
        
    

6\. MemoryLayout
----------------

*   1.  可以使用`MemoryLayout`获取数据类型占用的内存大小  
        `64bit`的`Int类型`占`8个字节`
        
            let age = 10
            
            MemoryLayout<Int>.stride // 8, 分配占用的空间大小
            MemoryLayout<Int>.size // 8, 实际用到的空间大小
            MemoryLayout<Int>.alignment // 8, 内存对齐参数
            
            等同于
            
            MemoryLayout.size(ofValue: age)
            MemoryLayout.stride(ofValue: age)
            MemoryLayout.alignment(ofValue: age)
            
        

关联值和原始值的区别：

*   关联值类型会存储到枚举变量里面
    
*   原始值因为一开始就会知道默认值是多少，所以只做记录，不会存储
    
        enum Password {
            case number(Int, Int, Int, Int)
            case other
        }
        
        MemoryLayout<Password>.stride // 40，分配占用的空间大小
        MemoryLayout<Password>.size // 33，实际用到的空间大小
        MemoryLayout<Password>.alignment // 8，对齐参数
        
    
        enum Session: Int {
             case spring, summer, autnmn, winter
        }
        
        MemoryLayout<Session>.stride // 1，分配占用的空间大小
        MemoryLayout<Session>.size // 1，实际用到的空间大小
        MemoryLayout<Session>.alignment // 1，对齐参数
        
    

> **思考下面枚举变量的内存布局:** **案例1:**

    enum TestEnum { 
        case test1, test2, test3 
    } 
    var t = TestEnum.test1
    t = .test2 
    t = .test3
    MemoryLayout<TestEnum>.stride // 1，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 1，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 1，对齐参数
    

**案例2:**

    enum TestEnum : Int {
        case test1 = 1, test2 = 2, test3 = 3 
    }
    var t = TestEnum.test1 
    t = .test2 
    t = .test3
    MemoryLayout<TestEnum>.stride // 1，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 1，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 1，对齐参数
    

**案例3:**

    enum TestEnum {
        case test1(Int, Int, Int)
        case test2(Int, Int)
        case test3(Int) 
        case test4(Bool) 
        case test5
    } 
    var e = TestEnum.test1(1, 2, 3)
    e = .test2(4, 5)
    e = .test3(6) 
    e = .test4(true)
    e = .test5
    MemoryLayout<TestEnum>.stride // 32，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 25，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 8，对齐参数
    

**案例4:**

    //注意！！！！   枚举选项只有一个,所以实际用到的内存空间 为0，但是要存储一个成员值 所以对其参数为1，给其分配一个字节
    enum TestEnum { 
        case test
    } 
    var t = TestEnum.test
    MemoryLayout<TestEnum>.stride // 1，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 0，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 1，对齐参数
    

**案例5:**

    enum TestEnum { 
        case test(Int)
    } 
    var t = TestEnum.test(10)
    MemoryLayout<TestEnum>.stride // 8，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 8，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 8，对齐参数
    

**案例6:**

    enum TestEnum { 
        case test(Int)
    } 
    var t = TestEnum.test(10)
    MemoryLayout<TestEnum>.stride // 8，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 8，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 8，对齐参数
    

**案例7:**

    enum TestEnum { 
        case test0 
        case test1 
        case test2 
        case test4(Int) 
        case test5(Int, Int)
        case test6(Int, Int, Int, Bool)
    } 
    var t = TestEnum.test(10)
    MemoryLayout<TestEnum>.stride // 32，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 25，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 8，对齐参数
    

**案例8:**

    enum TestEnum { 
        case test0 
        case test1 
        case test2 
        case test4(Int) 
        case test5(Int, Int)
        case test6(Int, Int, Bool, Int)
    } 
    var t = TestEnum.test(10)
    MemoryLayout<TestEnum>.stride // 32，分配占用的空间大小
    MemoryLayout<TestEnum>.size // 32，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment // 8，对齐参数
    

**案例9:**

    enum TestEnum { 
        case test0 
        case test1 
        case test2 
        case test4(Int) 
        case test5(Int, Int)
        case test6(Int, Bool, Int)
    } 
    var t = TestEnum.test(10)
    MemoryLayout<TestEnum>.stride //32，分配占用的空间大小
    MemoryLayout<TestEnum>.size //25，实际用到的空间大小
    MemoryLayout<TestEnum>.alignment //8，对齐参数
    

7\. 枚举变量的内存布局
-------------

我们知道通过`MemoryLayout`可以获取到枚举占用内存的大小，那枚举变量分别占用多少内存呢？

要想知道枚举变量的大小，我们需要通过查看枚举变量的内存布局来进行分析

> **枚举变量的分析准备**

我们可以通过`Xcode`里的`View Memory`选项来查看详细的内存布局

1.  可以在运行程序时，通过控制台打印的枚举变量右键选择`View Memory of *`进入到内存布局的页面 ![-w440](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5735d2c4062b49689021b7ffda252428~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
2.  还可以从`Xcode`标题栏中选择`Debug -> Debug Workflow -> View Memory`进入到内存布局的页面 ![-w569](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f74e3c087f614a4290c7dfb272c1c0fb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
3.  进入到该页面，然后通过输入变量的内存地址来查看 ![-w1129](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/818945a0d9f742fa9adacb4be5803ea3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
4.  我们可以下载一个小工具来获取到变量的内存地址  
    下载地址：[github.com/CoderMJLee/…](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCoderMJLee%2FMems "https://github.com/CoderMJLee/Mems")
5.  然后将下载好的这个文件`Mems.swift`拖到自己的`Xcode`中 调用这个函数就可以了

    print(Mems.ptr(ofVal: &t))
    

**我们来分析下面的枚举变量的情况**

    enum TestEnum {
        case test1, test2, test3
    }
    
    var t = TestEnum.test1
    print(Mems.ptr(ofVal: &t))
    
    t = TestEnum.test2
    t = TestEnum.test3
    
    print(MemoryLayout<TestEnum>.stride) // 1
    print(MemoryLayout<TestEnum>.size) // 1
    print(MemoryLayout<TestEnum>.alignment) // 1
    

分别将断点打在给`枚举变量t`赋值的三句代码上，然后运行程序观察每次断点之后的内存布局有什么变化

![-w1127](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3707ff07b0142e68f0e0471423f4ffc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

![-w1124](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e44ad20c1e9d4b6eb27ed0706ea5a625~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

![-w1124](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aaa99ae5371e49e4a708ba9b6431a077~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过上图可以看到，每个枚举变量都分配了一个字节的大小，并且存储的值分别是0、1、2，我们可以知道这一个字节的大小就是用来存储`枚举成员值`的

**我们再来分析一个枚举变量的情况**

    enum TestEnum: Int {
        case test1 = 1, test2 = 2, test3 = 3
    }
    
    var t = TestEnum.test1
    print(Mems.ptr(ofVal: &t))
    
    t = TestEnum.test2
    t = TestEnum.test3
    
    print(MemoryLayout<TestEnum>.stride) // 1
    print(MemoryLayout<TestEnum>.size) // 1
    print(MemoryLayout<TestEnum>.alignment) // 1
    

![-w1131](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8b07ec91b874385b845918724871429~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

![-w1126](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a5ae262e720a4c3292957b0115e8dd6f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

![-w1125](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74a579894f614963a3781c23a51e7974~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过上图可以看到，每个枚举变量存储的值也是0、1、2，并且分配了一个字节的大小

可以证明枚举变量的内存大小和原始值类型无关，而且枚举变量里存储的值和原始值也无关

**我们再来分析一个枚举变量的情况**

    enum TestEnum {
        case test1(Int, Int, Int) // 24
        case test2(Int, Int) // 16
        case test3(Int) // 8
        case test4(Bool) // 1
        case test5 // 1
    }
    
    var t = TestEnum.test1(1, 2, 3)
    print(Mems.ptr(ofVal: &t))
    
    t = TestEnum.test2(4, 5)
    t = TestEnum.test3(6)
    t = TestEnum.test4(true)
    t = TestEnum.test5
    
    MemoryLayout<TestEnum>.size // 25
    MemoryLayout<TestEnum>.stride // 32
    MemoryLayout<TestEnum>.alignment // 8
    

我们先通过打印了解到枚举类型总共分配了`32个字节`，然后我们通过断点分别来观察枚举变量的内存布局

![-w773](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ddde575d93346e6b93197ab125ff3ef~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1124](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27bda96fd6df42699bb75099bf79d174~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

执行完第一句我们可以看到，前面24个字节分别用来存储关联值1、2、3，第25个字节用来存储成员值0，之所以分配32个字节是因为内存对齐的原因

    // 调整排版后的内存布局如下所示
    01 00 00 00 00 00 00 00
    02 00 00 00 00 00 00 00
    03 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    

![-w719](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/666710ea86264b0ca18d84c9f0100b29~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1193](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a641539783c44769d07ef161b6391d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

执行完第二句我们可以看到，前面16个字节分半用来存储关联值4、5，然后第25个字节用来存储成员值1

    // 调整排版后的内存布局如下所示
    04 00 00 00 00 00 00 00
    05 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    01 00 00 00 00 00 00 00
    

![-w563](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ffec0c54ef14fbca354e62552e34d0f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1196](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4289e9afdf1346108ace6a521d34736b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

执行完第三句我们可以看到，前面8个字节分半用来存储关联值6，然后第25个字节用来存储成员值2

    // 调整排版后的内存布局如下所示
    06 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    02 00 00 00 00 00 00 00
    

![-w665](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dab2856fa3a54d95b304759492b0118c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1192](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff4710127fa346a39c3400dad0b0e575~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

执行完第四句我们可以看到，由于是Bool类型，那么只用了第一个字节来存储关联值1，然后第25个字节用来存储成员值3

    // 调整排版后的内存布局如下所示
    01 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    03 00 00 00 00 00 00 00
    

![-w676](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1e11f59919e4b6c8bc4331127debff1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1191](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2227a5c5afbe423ebed7698a7a15be28~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

执行完最后一句我们可以看到，由于没有关联值，那么只用了第25个字节存储成员值4

    // 调整排版后的内存布局如下所示
    00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00
    04 00 00 00 00 00 00 00
    

**总结：内存分配情况：一个字节存储成员值，n个字节存储关联值（n取占用内存最大的关联值），任何一个case的关联值都共有这n个字节**

我们再来看几个情况

    enum TestEnum {
        case test
    }
    
    MemoryLayout<Session>.stride // 1，分配占用的空间大小
    MemoryLayout<Session>.size // 0，实际用到的空间大小
    MemoryLayout<Session>.alignment // 1，对齐参数
    

如果枚举里只有一个`case`，那么实际用到的空间为0，都不用特别分配内存来进行存储

    enum TestEnum {
        case test(Int)
    }
    
    MemoryLayout<Session>.stride // 8，分配占用的空间大小
    MemoryLayout<Session>.size // 8，实际用到的空间大小
    MemoryLayout<Session>.alignment // 8，对齐参数
    

可以看到分配的内存大小就是关联值类型决定的，因为只有一个`case`，所以都不需要再额外分配内存来存储是哪个`case`了

六、值类型和引用类型
==========

1\. 值类型
-------

*   值类型赋值给`var、let或者给函数`传参，是直接将所有内容`拷贝一份`
*   类似于对文件进行`copy、paste`操作，产生了全新的文件副本，**属于深拷贝（deep copy）**

值类型进行拷贝的内存布局如下所示

    struct Point {
        var x: Int = 3
        var y: Int = 4
    }
    
    func test() {
        var p1 = Point(x: 10, y: 20)
        var p2 = p1
    
        p2.x = 4
        p2.y = 5
    
        print(p1.x, p1.y)
    }
    
    test()
    

![-w536](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7980c7fea817418aacefb9d17bcf5dba~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

**我们通过反汇编来进行分析**

![-w712](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92f3f7c5f9484dc9933d89ee94a26c59~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w947](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/602bd28e6ec6486c9096ab346f49e45e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w713](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e673c56b74b4d768ebb91a504013d50~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1048](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/238779d785e24cc48720c582d965b587~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过上述分析可以发现，值类型的赋值内部会先将p1的成员值保存起来，再给p2进行赋值，所以不会影响到p1

2\. 值类型的赋值操作
------------

*   在Swift标准库中，为了提升性能，`Array、String、Dictionary、Set`采用了`Copy On Write`的技术
*   如果`只是将赋值操作`，那么只会进行`浅拷贝`，两个变量使用的还是同一块存储空间
*   只有当`进行了”写“的操作`时，`才会进行深拷贝`操作
*   对于标准库值类型的赋值操作，Swift能确保最佳性能，所以没必要为了保证最佳性能来避免赋值
*   建议：**不需要修改值的，尽量定义成`let`**

    var s1 = "Jack"
    var s2 = s1
    s2.append("_Rose")
    
    print(s1) // Jack
    print(s2) // Jack_Rose
    

    var a1 = [1, 2, 3]
    var a2 = a1
    a2.append(4)
    a1[0] = 2
    
    print(a1) // [2, 2, 3]
    print(a2) // [1, 2, 3, 4]
    

    var d1 = ["max" : 10, "min" : 2]
    var d2 = d1
    d1["other"] = 7
    d2["max"] = 12
    
    print(d1) // ["other" : 7, "max" : 10, "min" : 2]
    print(d2) // ["max" : 12, "min" : 2]
    

**我们再看下面这段代码**  
对于p1来说，再次赋值也只是覆盖了成员`x、y`的值而已，都是同一个结构体变量

    struct Point {
        var x: Int
        var y: Int
    }
    var p1 = Point(x: 10, y: 20)
    p1 = Point(x: 11, y: 22)
    

**用let定义的赋值操作**

*   如果用`let`定义的常量赋值结构体类型会报错，并且修改结构体里的成员值也会报错
*   用`let`定义就意味着常量里存储的值不可更改，而结构体是由x和y这16个字节组成的，所以更改x和y就意味着结构体的值要被覆盖，所以报错

![-w645](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02bc9cd358654834ae915998e2e45480~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

3\. 引用类型
--------

*   引用赋值给`var、let或者给函数`传参，是将`内存地址拷贝一份`
*   类似于制作一个文件的替身（快捷方式、链接），指向的是同一个文件，属于 **`浅拷贝（shallow copy）`**
    
        class Size {
            var width = 0
            var height = 0
        
            init(width: Int, height: Int) {
                self.width = width
                self.height = height
            }
        }
        
        func test() {
            var s1 = Size(width: 10, height: 20)
            var s2 = s1
        
            s2.width = 11
            s2.height = 22
        
            print(s1.height, s1.width)
        }
        
        test() 
        
    

由于s1和s2都指向的同一块存储空间，所以s2修改了成员变量，s1再调用成员变量也已经是改变后的了 ![-w1124](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3356c841c72c4fac841aa1dbf256f8cf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

> **我们通过反汇编来进行分析** ![-w1049](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b45ca53a5f0d46eb8eb3a28d3621a036~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1052](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/945d409630314dbcad7255cb126579f1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1052](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d1e1886aa3e48c590dcf63cf5882594~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

*   堆空间分配完内存之后，我们拿到`rax`的值查看内存布局
*   发现`rax`里和对象的结构一样，证明`rax`里存储的就是对象的地址 ![-w1051](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/704284210812484c9c6486811ee37673~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1187](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e9317bf166a4951a7755e6c8919506c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
*   将新的值11和22分别覆盖掉堆空间对象的成员值 ![-w1223](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02b760674c0b45d38d11a9a86e1e8c40~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1224](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0643e6cb5cec4763aef3a0fa65a57c04~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1220](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af6b9af0b43c4511887caf319cde7327~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp) ![-w1225](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31c388e409914d1f8e4e2a526833b208~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

通过上面的分析可以发现，修改的成员值都是改的同一个地址的对象，所以修改了p2的成员值，会影响到p1

4\. 对象的堆空间申请过程
--------------

*   **在Swift中，创建类的实例对象，要向堆空间申请内存，大概流程如下**
    *   `Class.__allocating_init()`
    *   libswiftCore.dylib:`_swift_allocObject_`
    *   libswiftCore.dylib:`swift_slowAlloc`
    *   libsystem\_malloc.dylib:`malloc`
*   在Mac、iOS中的`malloc`函数分配的内存大小总是16的倍数
*   通过`class_getInstanceSize`可以得知：类的对象至少需要占用多少内存
    
        class Point{
            var x = 11
            var test = true
            var y = 22
        } 
        var p = Point() 
        class_getInstanceSize(type(of: p)) // 40 
        class_getInstanceSize(Point.self) // 40
        
    

5\. 引用类型的赋值操作
-------------

*   1.  将引用类型初始化对象赋值给同一个指针变量，指针变量会指向另一块存储空间
    
        class Size {
            var width: Int
            var height: Int
        
            init(width: Int, height: Int) {
                self.width = width
                self.height = height
            }
        }
        
        var s1 = Size(width: 10, height: 20)
        s1 = Size(width: 11, height: 22)
        
    

> **用let定义的赋值操作**

*   2.  如果用`let`定义的常量赋值引用类型会报错，因为会改变指针常量里存储的8个字节的地址值
*   3.  但修改类里的属性值不会报错，因为修改属性值并不是修改的指针常量的内存，只是通过指针常量找到类所存储的堆空间的内存地址去修改类的属性 ![-w643](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83dccdb5d2be4945807070fcac919b0c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

6\. 嵌套类型
--------

    struct Poker {
        enum Suit: Character {
            case spades = "♠️",
                 hearts = "♥️",
                 diamonds = "♦️",
                 clubs = "♣️"
        }
        
        enum Rank: Int {
            case two = 2, three, four, five, six, seven, eight, nine, ten
            case jack, queen, king, ace
        }
    }
    
    print(Poker.Suit.hearts.rawValue)
    
    var suit = Poker.Suit.spades
    suit = .diamonds
    
    var rank = Poker.Rank.five
    rank = .king 
    

7\. 枚举、结构体、类都可以定义方法
-------------------

*   1.  一般把定义在枚举、结构体、类内部的函数，叫做方法
    
        struct Point {
            var x: Int = 10
            var y: Int = 10
        
            func show() {
                print("show")
            }
        }
        
        let p = Point()
        p.show()
        
        
    
        class Size {
            var width: Int = 10
            var height: Int = 10
        
            func show() {
                print("show")
            }
        }
        
        let s = Size()
        s.show()
        
        
    
        enum PokerFace: Character {
            case spades = "♠️",
                 hearts = "♥️",
                 diamonds = "♦️",
                 clubs = "♣️"
        
            func show() {
                print("show")
            }
        }
        
        let pf = PokerFace.hearts
        pf.show()
        
        
    
*   2.  方法不管放在哪里，其内存都是放在代码段中
*   3.  枚举、结构体、类里的方法其实会有隐式参数
    
        class Size {
            var width: Int = 10
            var height: Int = 10
        
            // 默认会有隐式参数，该参数类型为当前枚举、结构体、类
            func show(self: Size) {
                print(self.width, self.height)
            }
        }
        
    

专题系列文章
======

1\. 前知识
-------

*   **[01-探究iOS底层原理|综述](https://juejin.cn/post/7089043618803122183/ "https://juejin.cn/post/7089043618803122183/")**
*   **[02-探究iOS底层原理|编译器LLVM项目【Clang、SwiftC、优化器、LLVM】](https://juejin.cn/post/7093842449998561316/ "https://juejin.cn/post/7093842449998561316/")**
*   **[03-探究iOS底层原理|LLDB](https://juejin.cn/post/7095079758844674056 "https://juejin.cn/post/7095079758844674056")**
*   **[04-探究iOS底层原理|ARM64汇编](https://juejin.cn/post/7115302848270696485/ "https://juejin.cn/post/7115302848270696485/")**

2\. 基于OC语言探索iOS底层原理
-------------------

*   **[05-探究iOS底层原理|OC的本质](https://juejin.cn/post/7094409219361193997/ "https://juejin.cn/post/7094409219361193997/")**
*   **[06-探究iOS底层原理|OC对象的本质](https://juejin.cn/post/7094503681684406302 "https://juejin.cn/post/7094503681684406302")**
*   **[07-探究iOS底层原理|几种OC对象【实例对象、类对象、元类】、对象的isa指针、superclass、对象的方法调用、Class的底层本质](https://juejin.cn/post/7096087582370431012 "https://juejin.cn/post/7096087582370431012")**
*   **[08-探究iOS底层原理|Category底层结构、App启动时Class与Category装载过程、load 和 initialize 执行、关联对象](https://juejin.cn/post/7096480684847415303 "https://juejin.cn/post/7096480684847415303")**
*   **[09-探究iOS底层原理|KVO](https://juejin.cn/post/7115318628563550244/ "https://juejin.cn/post/7115318628563550244/")**
*   **[10-探究iOS底层原理|KVC](https://juejin.cn/post/7115320523805949960/ "https://juejin.cn/post/7115320523805949960/")**
*   **[11-探究iOS底层原理|探索Block的本质|【Block的数据类型(本质)与内存布局、变量捕获、Block的种类、内存管理、Block的修饰符、循环引用】](https://juejin.cn/post/7115809219319693320/ "https://juejin.cn/post/7115809219319693320/")**
*   **[12-探究iOS底层原理|Runtime1【isa详解、class的结构、方法缓存cache\_t】](https://juejin.cn/post/7116103432095662111 "https://juejin.cn/post/7116103432095662111")**
*   **[13-探究iOS底层原理|Runtime2【消息处理(发送、转发)&&动态方法解析、super的本质】](https://juejin.cn/post/7116147057739431950 "https://juejin.cn/post/7116147057739431950")**
*   **[14-探究iOS底层原理|Runtime3【Runtime的相关应用】](https://juejin.cn/post/7116291178365976590/ "https://juejin.cn/post/7116291178365976590/")**
*   **[15-探究iOS底层原理|RunLoop【两种RunloopMode、RunLoopMode中的Source0、Source1、Timer、Observer】](https://juejin.cn/post/7116515606597206030/ "https://juejin.cn/post/7116515606597206030/")**
*   **[16-探究iOS底层原理|RunLoop的应用](https://juejin.cn/post/7116521653667889165/ "https://juejin.cn/post/7116521653667889165/")**
*   **[17-探究iOS底层原理|多线程技术的底层原理【GCD源码分析1:主队列、串行队列&&并行队列、全局并发队列】](https://juejin.cn/post/7116821775127674916/ "https://juejin.cn/post/7116821775127674916/")**
*   **[18-探究iOS底层原理|多线程技术【GCD源码分析1:dispatch\_get\_global\_queue与dispatch\_(a)sync、单例、线程死锁】](https://juejin.cn/post/7116878578091819045 "https://juejin.cn/post/7116878578091819045")**
*   **[19-探究iOS底层原理|多线程技术【GCD源码分析2:栅栏函数dispatch\_barrier\_(a)sync、信号量dispatch\_semaphore】](https://juejin.cn/post/7116897833126625316 "https://juejin.cn/post/7116897833126625316")**
*   **[20-探究iOS底层原理|多线程技术【GCD源码分析3:线程调度组dispatch\_group、事件源dispatch Source】](https://juejin.cn/post/7116898446358888485/ "https://juejin.cn/post/7116898446358888485/")**
*   **[21-探究iOS底层原理|多线程技术【线程锁：自旋锁、互斥锁、递归锁】](https://juejin.cn/post/7116898868737867789/ "https://juejin.cn/post/7116898868737867789/")**
*   **[22-探究iOS底层原理|多线程技术【原子锁atomic、gcd Timer、NSTimer、CADisplayLink】](https://juejin.cn/post/7116907029465137165 "https://juejin.cn/post/7116907029465137165")**
*   **[23-探究iOS底层原理|内存管理【Mach-O文件、Tagged Pointer、对象的内存管理、copy、引用计数、weak指针、autorelease](https://juejin.cn/post/7117274106940096520 "https://juejin.cn/post/7117274106940096520")**

3\. 基于Swift语言探索iOS底层原理
----------------------

关于`函数`、`枚举`、`可选项`、`结构体`、`类`、`闭包`、`属性`、`方法`、`swift多态原理`、`String`、`Array`、`Dictionary`、`引用计数`、`MetaData`等Swift基本语法和相关的底层原理文章有如下几篇:

*   **[01-📝Swift5常用核心语法|了解Swift【Swift简介、Swift的版本、Swift编译原理】](https://juejin.cn/spost/7119020967430455327 "https://juejin.cn/spost/7119020967430455327")**
*   **[02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】](https://juejin.cn/spost/7119510159109390343 "https://juejin.cn/spost/7119510159109390343")**
*   **[03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举】](https://juejin.cn/spost/7119513630550261774 "https://juejin.cn/spost/7119513630550261774")**
*   **[04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】](https://juejin.cn/spost/7119714488181325860 "https://juejin.cn/spost/7119714488181325860")**
*   **[05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】](https://juejin.cn/spost/7119722433589805064 "https://juejin.cn/spost/7119722433589805064")**
*   **[06-📝Swift5常用核心语法|编程范式与Swift源码【从OC到Swift、函数式编程、面向协议编程、响应式编程、Swift源码分析】](https://juejin.cn/spost/7253350009289424933 "https://juejin.cn/spost/7253350009289424933")**

其它底层原理专题
========

1\. 底层原理相关专题
------------

*   **[01-计算机原理|计算机图形渲染原理这篇文章](https://juejin.cn/post/7018755998823219213 "https://juejin.cn/post/7018755998823219213")**
*   **[02-计算机原理|移动终端屏幕成像与卡顿 ](https://juejin.cn/post/7019117942377807908 "https://juejin.cn/post/7019117942377807908")**

2\. iOS相关专题
-----------

*   **[01-iOS底层原理|iOS的各个渲染框架以及iOS图层渲染原理](https://juejin.cn/post/7019193784806146079 "https://juejin.cn/post/7019193784806146079")**
*   **[02-iOS底层原理|iOS动画渲染原理](https://juejin.cn/post/7019200157119938590 "https://juejin.cn/post/7019200157119938590")**
*   **[03-iOS底层原理|iOS OffScreen Rendering 离屏渲染原理](https://juejin.cn/post/7019497906650497061/ "https://juejin.cn/post/7019497906650497061/")**
*   **[04-iOS底层原理|因CPU、GPU资源消耗导致卡顿的原因和解决方案](https://juejin.cn/post/7020613901033144351 "https://juejin.cn/post/7020613901033144351")**

3\. webApp相关专题
--------------

*   **[01-Web和类RN大前端的渲染原理](https://juejin.cn/post/7021035020445810718/ "https://juejin.cn/post/7021035020445810718/")**

4\. 跨平台开发方案相关专题
---------------

*   **[01-Flutter页面渲染原理](https://juejin.cn/post/7021057396147486750/ "https://juejin.cn/post/7021057396147486750/")**

5\. 阶段性总结:Native、WebApp、跨平台开发三种方案性能比较
-------------------------------------

*   **[01-Native、WebApp、跨平台开发三种方案性能比较](https://juejin.cn/post/7021071990723182606/ "https://juejin.cn/post/7021071990723182606/")**

6\. Android、HarmonyOS页面渲染专题
---------------------------

*   **[01-Android页面渲染原理](https://juejin.cn/post/7021840737431978020/ "https://juejin.cn/post/7021840737431978020/")**
*   **[02-HarmonyOS页面渲染原理](# "#") (`待输出`)**

7\. 小程序页面渲染专题
-------------

*   **[01-小程序框架渲染原理](https://juejin.cn/post/7021414123346853919 "https://juejin.cn/post/7021414123346853919")**

相关推荐

*   [
    
    没有故事的Zhang同学
    
    ](/user/1574156381196600)
    
    1年前
    
    [iOS](/tag/iOS) [Swift](/tag/Swift)
    
    [04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】](/post/7119714488181325860 "04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】")
    
    [
    
    复习Swift5核心语法,夯实基础,通过汇编查探Swift语言的本质。一步一步认识Swift的底层实现
    
    ](/post/7119714488181325860)
    
    *   1332
    *   1
    *   评论
    
*   [
    
    没有故事的Zhang同学
    
    ](/user/1574156381196600)
    
    1年前
    
    [iOS](/tag/iOS) [Swift](/tag/Swift)
    
    [05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】](/post/7119722433589805064 "05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】")
    
    [
    
    复习Swift5核心语法,夯实基础,通过汇编查探Swift语言的本质。一步一步认识Swift的底层实现
    
    ](/post/7119722433589805064)
    
    *   1376
    *   5
    *   评论
    
*   [
    
    睡不好的黑眼圈
    
    ](/user/2647279731481822)
    
    3年前
    
    [iOS](/tag/iOS)
    
    [Swift Json解析方法](/post/6844903893470543879 "Swift Json解析方法")
    
    [
    
    答：因为Swift类型相关的原因，如果需要在子类里使用mapping函数，那么必须在父类(如果有多层父类，必须在最顶层的父类)里定义一个空的mapping函数，然后在子类去override它。一样情况的还有didFinishMapping函数。 方便的获取节点层面的信息，不用担…
    
    ](/post/6844903893470543879)
    
    *   2938
    *   点赞
    *   评论
    
*   [
    
    Style\_月月
    
    ](/user/3993032115367118)
    
    2年前
    
    [iOS](/tag/iOS)
    
    [iOS-底层原理-01：源码探索的三种方式](/post/6949574643443302407 "iOS-底层原理-01：源码探索的三种方式")
    
    [
    
    本文主要介绍下源码探索的三种方法1、符号断点直接跟流程2、通过按住control+step into3、汇编跟流程下面详细讲下这三种方法是如何查找到函数所在的源码库，以alloc为例1、符号断点直接跟
    
    ](/post/6949574643443302407)
    
    *   925
    *   2
    *   评论
    
    ![iOS-底层原理-01：源码探索的三种方式](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)
    
*   [
    
    Style\_月月
    
    ](/user/3993032115367118)
    
    1年前
    
    [iOS](/tag/iOS) [Swift](/tag/Swift)
    
    [Swift-进阶 13：协议Protocol](/post/7001872073253453838 "Swift-进阶 13：协议Protocol")
    
    [
    
    这是我参与8月更文挑战的第21天，活动详情查看：8月更文挑战 本文主要分析protocol的用法及底层存储结构 协议的基本用法 【语法格式】：协议的语法格式 class、struct、enum都可以遵
    
    ](/post/7001872073253453838)
    
    *   1933
    *   10
    *   评论
    
    ![Swift-进阶 13：协议Protocol](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)
    
*   [
    
    没有故事的Zhang同学
    
    ](/user/1574156381196600)
    
    1年前
    
    [iOS](/tag/iOS) [Xcode](/tag/Xcode)
    
    [12-探究iOS底层原理|Runtime【isa详解、class的结构、方法缓存cache\_t】](/post/7116103432095662111 "12-探究iOS底层原理|Runtime【isa详解、class的结构、方法缓存cache_t】")
    
    [
    
    在这篇文章中我们围绕\`Runtime\`展开,会逐个探索:isa详解、class的结构、方法缓存等。其它Runtime的知识,我们会在下一篇文章即系探索
    
    ](/post/7116103432095662111)
    
    *   1123
    *   4
    *   1
    
*   [
    
    Style\_月月
    
    ](/user/3993032115367118)
    
    2年前
    
    [iOS](/tag/iOS)
    
    [iOS-底层原理 23：KVO 底层原理](/post/6949586633830187045 "iOS-底层原理 23：KVO 底层原理")
    
    [
    
    KVO，全称为Key-Value observing，中文名为键值观察，KVO是一种机制，它允许将其他对象的指定属性的更改通知给对象。在Key-Value Observing Programming
    
    ](/post/6949586633830187045)
    
    *   810
    *   2
    *   1
    
    ![iOS-底层原理 23：KVO 底层原理](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)
    
*   [
    
    Chr1s78
    
    ](/user/4477627143298423)
    
    1年前
    
    [SwiftUI](/tag/SwiftUI) [iOS](/tag/iOS)
    
    [第五章 Combine的过滤操作符（drop系列操作符、prefix系列操作符）](/post/7017853525271150599 "第五章 Combine的过滤操作符（drop系列操作符、prefix系列操作符）")
    
    [
    
    删除值是您在使用Combine进行数据处理时经常需要利用的有用功能。例如，当您想在第二个发布者开始发布之前忽略来自一个发布者的值，或者如果您想在Combine流开始时忽略特定数量的值，您可以使
    
    ](/post/7017853525271150599)
    
    *   607
    *   1
    *   评论
    
    ![第五章 Combine的过滤操作符（drop系列操作符、prefix系列操作符）](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)
    
*   [
    
    Chr1s78
    
    ](/user/4477627143298423)
    
    1年前
    
    [SwiftUI](/tag/SwiftUI) [iOS](/tag/iOS)
    
    [第十章 其他操作符](/post/7023212373007663117 "第十章 其他操作符")
    
    [
    
    至此，在《Combine: Asynchronous Programming with Swift》书中的操作符讲解已经结束了，但其实还有些操作符没有被讲解到。我们会在此一一列出。 Encoding
    
    ](/post/7023212373007663117)
    
    *   207
    *   1
    *   评论
    
    ![第十章 其他操作符](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)
    
*   [
    
    king\_jensen
    
    ](/user/1609340754597607)
    
    3年前
    
    [iOS](/tag/iOS)
    
    [Swift面向协议编程(POP)](/post/6844903928446844935 "Swift面向协议编程(POP)")
    
    [
    
    在WWDC15上，苹果宣布Swift是世界上第一门面向协议编程(POP)语言。相比与传统的面向对象编程 (OOP)，POP 显得更加灵活。RxSwift、ReactorKit 核心也是面向协议编程的。 所谓协议，就是一组属性和/或方法的定义，而如果某个具体类型想要遵守一个协议，…
    
    ](/post/6844903928446844935)
    
    *   5858
    *   38
    *   9
    
*   [
    
    没有故事的Zhang同学
    
    ](/user/1574156381196600)
    
    1年前
    
    [iOS](/tag/iOS) [Swift](/tag/Swift)
    
    [02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】](/post/7119510159109390343 "02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】")
    
    [
    
    复习Swift5核心语法,夯实基础,通过汇编查探Swift语言的本质。一步一步认识Swift的底层实现
    
    ](/post/7119510159109390343)
    
    *   530
    *   4
    *   3
    
*   [
    
    师大小海腾
    
    ](/user/782508012091645)
    
    3年前
    
    [iOS](/tag/iOS) [Objective-C](/tag/Objective-C)
    
    [OC - 属性关键字和所有权修饰符](/post/6844904067425124366 "OC - 属性关键字和所有权修饰符")
    
    [
    
    1\. 属性关键字有哪些？ 苹果在 Xcode 6.3 引入的一个 Objective-C 的新特性nullability annotations。这些关键字可以用于属性、方法返回值和参数中，来指定对象的可空性，这样编写代码的时候就会智能提示。在 Swift 中可以使用?和!来表…
    
    ](/post/6844904067425124366)
    
    *   3529
    *   15
    *   6
    
*   [
    
    Style\_月月
    
    ](/user/3993032115367118)
    
    2年前
    
    [iOS](/tag/iOS)
    
    [iOS-底层原理 24：内存五大区](/post/6949587150090272804 "iOS-底层原理 24：内存五大区")
    
    [
    
    在iOS中，内存主要分为栈区、堆区、全局区、常量区、代码区五大区域。如下图所示下面分别介绍这五大区栈区（Stack）定义栈是系统数据结构，其对应的进程或者线程是唯一的栈是向低地址扩展的数据结构栈是一块
    
    ](/post/6949587150090272804)
    
    *   1941
    *   9
    *   评论
    
    ![iOS-底层原理 24：内存五大区](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)
    
*   [
    
    峰之巅
    
    ](/user/1556564198033991)
    
    3年前
    
    [iOS](/tag/iOS)
    
    [iOS 多线程陷阱](/post/6844904003705241613 "iOS 多线程陷阱")
    
    [
    
    本文首先介绍了多线程的一些基本概念，如：atomicity、Out-of-order execution、Memory barrier等。然后结合 iOS 实际开发，分析了Property、dealloc、target-action、block、mutable containe…
    
    ](/post/6844904003705241613)
    
    *   3865
    *   41
    *   2
    

友情链接：

*   [抖音聊天](https://www.douyin.com/downloadpage/chat "抖音聊天")

[![](https://p3-passport.byteimg.com/img/user-avatar/89f7d0fe5653ac8ada4098b59ebe2426~100x100.awebp)

没有故事的Zhang同学 ![创作等级LV.4](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC "创作等级LV.4") 

前Nike|移动大前端开发 @ 系统学习,深度思考



](/user/1574156381196600/posts)

关注[

私信

](/notification/im?participantId=1574156381196600)

获得点赞  764

文章被阅读  140,976

目录

window.\_\_NUXT\_\_=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){q.loading=a;q.skeleton=d;q.cursor=f;q.data=\[\];q.total=b;q.hasMore=d;B.id=r;B.self\_description=k;B.followed=a;B.viewerIsFollowing=k;B.community=k;B.subscribedTagCount=b;B.wroteBookCount=b;B.boughtBookCount=b;B.isBindedPhone=a;B.level=z;B.user\_id=r;B.user\_name=y;B.company="系统学习,深度思考";B.job\_title="前Nike|移动大前端开发";B.avatar\_large="https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image";B.description="【移动大前端】iOS、Android、Harmony、MobileH5、Hybrid、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等";B.followee\_count=h;B.follower\_count=626;B.post\_article\_count=117;B.digg\_article\_count=b;B.got\_digg\_count=764;B.got\_view\_count=140976;B.post\_shortmsg\_count=b;B.digg\_shortmsg\_count=b;B.isfollowed=a;B.favorable\_author=b;B.power=A;B.study\_point=b;B.university={university\_id:f,name:e,logo:e};B.major={major\_id:f,parent\_id:f,name:e};B.student\_status=b;B.select\_event\_count=b;B.select\_online\_course\_count=b;B.identity=b;B.is\_select\_annual=a;B.select\_annual\_rank=b;B.annual\_list\_type=b;B.extraMap={};B.is\_logout=b;B.annual\_info=\[\];B.account\_amount=b;B.user\_growth\_info={user\_id:1574156381196600,jpower:A,jscore:681.3,jpower\_level:z,jscore\_level:5,jscore\_title:"先锋掘友",author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:2000,jscore\_this\_level\_mini\_score:500};B.is\_vip=a;B.become\_author\_days=b;B.collection\_set\_article\_count=b;B.recommend\_article\_count\_daily=b;B.article\_collect\_count\_daily=b;B.juejinPower=A;B.jobTitle="前Nike|移动大前端开发";B.roles={isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a};B.username=y;B.blogAddress=k;B.selfDescription="【移动大前端】iOS、Android、Harmony、MobileH5、Hybrid、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等";B.beLikedCount=764;B.beReadCount=140976;B.followerCount=626;B.followingCount=h;B.collectionCount=b;B.createdCollectionCount=b;B.followingCollectionCount=b;B.postedPostsCount=117;B.pinCount=b;B.likedArticleCount=b;B.likedPinCount=b;B.avatar="https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image";B.latestLoginedInAt=c;B.createdAt=c;B.updatedAt=c;B.phoneNumber=e;B.titleDescription=e;B.followeesCount=h;B.applyEventCount=b;B.need\_lead=b;B.followTopicCnt=b;return {layout:"default",data:\[{renderPost:d}\],fetch:\[{queryString:e,isShowUserDropdownList:a,isShowAddMoreList:a,isFocus:a,isPhoneMenuShow:a,visibleBadge:a,placeholder:e,hiddenProperty:"hidden",searchHistoryVisible:a,searchHistoryItems:\[\],tabBadge:c,isChangePlaceholder:d,showMallBridge:a,removeSearchInputKeyupListener:c,logoImg:"\\u002F\\u002Flf3-cdn-tos.bytescm.com\\u002Fobj\\u002Fstatic\\u002Fxitu\_juejin\_web\\u002Fe08da34488b114bd4c665ba2fa520a31.svg"},{dislikeWhiteListUserIds:k}\],error:c,state:{view:{activityIndex:{activityList:\[\],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:d,activityListIsError:a,userActivityList:\[\],placeholder:e,actionType:{FETCH:"@\\u002Fview\\u002Factivity-index\\u002FFETCH",FETCH\_RECOMMEND\_LIST:"@\\u002Fview\\u002Factivity-index\\u002FFETCH\_RECOMMEND\_LIST",RESET\_ACTIVITY\_LIST:"@\\u002Fview\\u002Factivity-index\\u002FRESET\_ACTIVITY\_LIST",FETCH\_USER\_ACTIVITY\_LIST:"@\\u002Fview\\u002Factivity-index\\u002FFETCH\_USER\_ACTIVITY\_LIST",FETCH\_NEW\_COUNT:"@\\u002Fview\\u002Factivity-index\\u002FFETCH\_NEW\_COUNT",DELETE\_ACTIVITY:"@\\u002Fview\\u002Factivity-index\\u002FDELETE\_ACTIVITY",TOGGLE\_FOLLOW\_USER:"@\\u002Fview\\u002Factivity-index\\u002FTOGGLE\_FOLLOW\_USER",FETCH\_ENTRY\_COMMENT\_LIST:"@\\u002Fview\\u002Factivity-index\\u002FFETCH\_ENTRY\_COMMENT\_LIST",UPDATE\_LIST\_LOADING:"@\\u002Fview\\u002Factivity-index\\u002FUPDATE\_LIST\_LOADING",RESET:"@\\u002Fview\\u002Factivity-index\\u002FRESET"},hotList:{list:\[\],after:e,loading:a,hasNextPage:a,actionType:{UPDATE\_STATE:"@\\u002Fview\\u002Factivity-index\\u002Fhot-list\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Factivity-index\\u002Fhot-list\\u002FFETCH\_MORE",FETCH:"@\\u002Fview\\u002Factivity-index\\u002Fhot-list\\u002FFETCH",RESET:"@\\u002Fview\\u002Factivity-index\\u002Fhot-list\\u002FRESET"}},sidebar:{bannerList:\[\],actionType:{RESET:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002FRESET",UPDATE\_STATE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002FUPDATE\_STATE",FETCH\_BANNER:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002FFETCH\_BANNER"},recommend:{pageSize:h,page:b,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-topic-list\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-topic-list\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-topic-list\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-topic-list\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-topic-list\\u002FRESET"},after:b},followed:{pageSize:h,page:b,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Ffollowed-topic-list\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Ffollowed-topic-list\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Ffollowed-topic-list\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Ffollowed-topic-list\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Ffollowed-topic-list\\u002FRESET"},after:b},recommendPin:{list:\[\],after:e,loading:a,hasNextPage:d,actionType:{UPDATE\_STATE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-pin-list\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-pin-list\\u002FFETCH\_MORE",FETCH:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-pin-list\\u002FFETCH",RESET:"@\\u002Fview\\u002Factivity-index\\u002Fsidebar\\u002Frecommend-pin-list\\u002FRESET"}}},topicPinList:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Factivity-index\\u002Ftopic-pin-list\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Factivity-index\\u002Ftopic-pin-list\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Factivity-index\\u002Ftopic-pin-list\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Factivity-index\\u002Ftopic-pin-list\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Factivity-index\\u002Ftopic-pin-list\\u002FRESET"},topicId:e,navList:\[{type:l,name:l,title:"推荐 ",id:l},{type:m,name:m,title:"热门 ",id:m},{type:p,name:p,title:"关注 ",id:p},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}\],sortType:n}},search:{search\_result\_from:b,query:e,list:\[\],linkList:\[\],loading:a,skeleton:d,actionType:{FETCH:"@\\u002Fview\\u002Fsearch\\u002FFETCH",FETCH\_MORE:"@\\u002Fview\\u002Fsearch\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fsearch\\u002FRESET"}},columnIndex:{list:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002FcolumnIndex\\u002Flist\\u002FUPDATE",FETCH:"@\\u002Fview\\u002FcolumnIndex\\u002Flist\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002FcolumnIndex\\u002Flist\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002FcolumnIndex\\u002Flist\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002FcolumnIndex\\u002Flist\\u002FRESET"},sort:o,category:"all"},hotList:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002FcolumnIndex\\u002FhotList\\u002FUPDATE",FETCH:"@\\u002Fview\\u002FcolumnIndex\\u002FhotList\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002FcolumnIndex\\u002FhotList\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002FcolumnIndex\\u002FhotList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002FcolumnIndex\\u002FhotList\\u002FRESET"}}},timelineIndex:{tdkTemplates:\[\],categoryNavList:\[\],tagNavList:\[\],splitTagList:\[\],timelineAdList:\[\],list:\[\],sort:n,category:l,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH\_TIMELINE\_LIST:"@\\u002Fview\\u002FtimelineIndex\\u002FFETCH\_TIMELINE\_LIST",FETCH\_CATEGORY\_LIST:"@\\u002Fview\\u002FtimelineIndex\\u002FFETCH\_CATEGORY\_LIST",FETCH\_TAG\_LIST:"@\\u002Fview\\u002FtimelineIndex\\u002FFETCH\_TAG\_LIST",DELETE\_ENTRY:"@\\u002Fview\\u002FtimelineIndex\\u002FDELETE\_ENTRY",DELETE\_USER\_ENTRIES:"@\\u002Fview\\u002FtimelineIndex\\u002FDELETE\_USER\_ENTRIES",DELETE\_TAG\_ENTRIES:"@\\u002Fview\\u002FtimelineIndex\\u002FDELETE\_TAG\_ENTRIES",FETCH\_MORE:"@\\u002Fview\\u002FtimelineIndex\\u002FFETCH\_MORE",FETCH:"@\\u002Fview\\u002FtimelineIndex\\u002FFETCH",RESET:"@\\u002Fview\\u002FtimelineIndex\\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:\[\],cursor:f,skeleton:d,loading:a,hasMore:d,categoryId:e,tagId:e,sort:e,actionType:{UPDATE\_STATE:"timeline-list\\u002FUPDATE\_STATE",FETCH\_MORE:"timeline-list\\u002FFETCH\_MORE",FETCH:"timeline-list\\u002FFETCH",RESET:"timeline-list\\u002FRESET"}},recommendList:{list:\[\],cursor:f,loading:a,skeleton:d,hasMore:d,actionType:{UPDATE\_STATE:"recommend-list\\u002FUPDATE\_STATE",FETCH\_MORE:"recommend-list\\u002FFETCH\_MORE",FETCH:"recommend-list\\u002FFETCH",RESET:"recommend-list\\u002FRESET"}},followingList:{list:\[\],cursor:f,skeleton:d,loading:a,hasMore:d,actionType:{UPDATE\_STATE:"following-list\\u002FUPDATE\_STATE",FETCH\_MORE:"following-list\\u002FFETCH\_MORE",FETCH:"following-list\\u002FFETCH",RESET:"following-list\\u002FRESET"}}},subscribe:{subscribed:{list:\[\],cursor:f,skeleton:d,loading:a,hasMore:a,actionType:{UPDATE\_STATE:"view\\u002Fsubscribe\\u002Fsubscribed\\u002Flist\\u002FUPDATE\_STATE",FETCH\_MORE:"view\\u002Fsubscribe\\u002Fsubscribed\\u002Flist\\u002FFETCH\_MORE",FETCH:"view\\u002Fsubscribe\\u002Fsubscribed\\u002Flist\\u002FFETCH",RESET:"view\\u002Fsubscribe\\u002Fsubscribed\\u002Flist\\u002FRESET"}},all:{list:\[\],cursor:f,loading:a,skeleton:d,hasMore:a,linkList:e,actionType:{UPDATE\_STATE:"view\\u002Fsubscribe\\u002Fall\\u002Flist\\u002FUPDATE\_STATE",FETCH\_MORE:"view\\u002Fsubscribe\\u002Fall\\u002Flist\\u002FFETCH\_MORE",FETCH:"view\\u002Fsubscribe\\u002Fall\\u002Flist\\u002FFETCH",RESET:"view\\u002Fsubscribe\\u002Fall\\u002Flist\\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:\[\],relatedCollectionList:\[\],actionType:{FETCH:"@\\u002Fview\\u002FentryPublic\\u002FFETCH",RESET:"@\\u002Fview\\u002FentryPublic\\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:\[\],actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FFETCH",RESET:"@\\u002Fview\\u002Fuser\\u002FRESET",UPDATE:"@\\u002Fview\\u002Fuser\\u002FUPDATE",FETCH\_ANNUALS:"@\\u002Fview\\u002Fuser\\u002FFETCH\_ANNUALS"},detailList:{actionType:{RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FRESET"},likeList:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FlikePostList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FlikePostList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FlikePostList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FlikePostList\\u002FRESET"}},postList:{list:\[\],hasMore:a,skeleton:a,loading:a,sort:o,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpostList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpostList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpostList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpostList\\u002FRESET"}},searchList:{list:\[\],hasMore:a,skeleton:a,loading:a,key\_word:e,search\_type:b,cursor:f,isPostSearch:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FsearchList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FsearchList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FsearchList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FsearchList\\u002FRESET"}},tagList:{list:\[\],loading:a,skeleton:a,hasMore:a,cursor:f,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FtagList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FtagList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FtagList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FtagList\\u002FRESET"}},collectionList:{list:\[\],userId:e,skeleton:a,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FRESET",TOGGLE\_FOLLOW\_COLLECTION:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FTOGGLE\_FOLLOW\_COLLECTION",FOLLOW\_COLLECTION:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FFOLLOW\_COLLECTION",UNFOLLOW\_COLLECTION:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FUNFOLLOW\_COLLECTION",DELELTE\_COLLECTION:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FDELELTE\_COLLECTION",ADD\_COLLECTION:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FADD\_COLLECTION",EDIT\_COLLECTION:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcollectionList\\u002FEDIT\_COLLECTION"}},followerList:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowerList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowerList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowerList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowerList\\u002FRESET"}},followingList:{list:\[\],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingList\\u002FRESET"}},followingTeamsList:{list:\[\],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingTeamsList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingTeamsList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingTeamsList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FfollowingTeamsList\\u002FRESET"}},activityList:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FactivityList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FactivityList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FactivityList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FactivityList\\u002FRESET"}},bookList:{list:\[\],cursor:f,skeleton:a,hasMore:a,loading:a,type:"wrote",actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FbookList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FbookList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FbookList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FbookList\\u002FRESET"}},pinList:{list:\[\],hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinList\\u002FRESET"}},courseList:{list:\[\],hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcourseList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcourseList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcourseList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcourseList\\u002FRESET"}},pinPraisedList:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinPraisedList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinPraisedList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinPraisedList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FpinPraisedList\\u002FRESET"}},eventList:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FeventList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FeventList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FeventList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FeventList\\u002FRESET"}},selfColumnList:{list:\[\],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnList\\u002FRESET"}},columnFollowedList:{list:\[\],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnFollowedList\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnFollowedList\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnFollowedList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnFollowedList\\u002FRESET",FILTER:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002FcolumnFollowedList\\u002FFILTER"}},realtimes:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimes\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimes\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimes\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimes\\u002FRESET",DELETE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimes\\u002FDELETE"}},realtimeliked:{list:\[\],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimeliked\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimeliked\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimeliked\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimeliked\\u002FRESET",DELETE:"@\\u002Fview\\u002Fuser\\u002FdetailList\\u002Frealtimeliked\\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\\u002Fview\\u002Ftag\\u002FFETCH",FETCH\_LIST:"@\\u002Fview\\u002Ftag\\u002FFETCH\_LIST",RESET:"@\\u002Fview\\u002Ftag\\u002FRESET"},list:{list:\[\],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE\_STATE:"@\\u002Fview\\u002Ftag\\u002Flist\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Ftag\\u002Flist\\u002FFETCH\_MORE",FETCH:"@\\u002Fview\\u002Ftag\\u002Flist\\u002FFETCH",RESET:"@\\u002Fview\\u002Ftag\\u002Flist\\u002FRESET"}}},notification:{user:{actionType:{RESET:"@\\u002Fview\\u002Fnotification\\u002Fuser\\u002FRESET"},listState:{list:\[\],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:b,msgSubMap:{"1":b,"2":b,"3":b,"4":b,"7":b}},list:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Fnotification\\u002Fuser\\u002Flist\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Fnotification\\u002Fuser\\u002Flist\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Fnotification\\u002Fuser\\u002Flist\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Fnotification\\u002Fuser\\u002Flist\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fnotification\\u002Fuser\\u002Flist\\u002FRESET"}}},system:{actionType:{RESET:"@\\u002Fview\\u002Fnotification\\u002Fsystem\\u002FRESET"},list:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Fnotification\\u002Fsystem\\u002Flist\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Fnotification\\u002Fsystem\\u002Flist\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Fnotification\\u002Fsystem\\u002Flist\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Fnotification\\u002Fsystem\\u002Flist\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fnotification\\u002Fsystem\\u002Flist\\u002FRESET"}}}},column:{serverRenderList:a,column:{id:j},entry:{id:j,screenshot:k,liked:a,article\_id:j,article\_info:{article\_id:j,user\_id:r,category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640463633482000\],visible\_level:b,link\_url:e,cover\_image:e,is\_gfw:b,title:s,brief\_content:t,is\_english:b,is\_original:g,user\_index:4.823266626135861,original\_type:b,original\_author:e,content:e,ctime:"1657640945",mtime:"1688833290",rtime:"-62135596800",draft\_id:u,view\_count:v,collect\_count:g,digg\_count:g,comment\_count:b,hot\_index:64,is\_hot:b,rank\_index:3.2e-7,status:g,verify\_status:g,audit\_status:w,mark\_content:"!\[image.png\](https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F0cae050c9bb44501bc36ce4f06ca650d~tplv-k3u1fbpfcp-watermark.image?) \\n# 一、概述\\n本系列文章旨在复习\`Swift5\`核心语法且适当进行底层原理探索,属于阶段性复习和巩固,以供日后进一步探索\`Swift\`语言的底层原理做铺垫。\\n\\n整个系列文章如下，每一文章知识点独立成篇,欢迎各位按需或按兴趣点击阅读:\\n- \*\*\[01-📝Swift5常用核心语法|了解Swift【Swift简介、Swift的版本、Swift编译原理】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119020967430455327)\*\*\\n- \*\*\[02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119510159109390343)\*\*\\n- \*\*\[03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119513630550261774)\*\*\\n- \*\*\[04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119714488181325860)\*\*\\n- \*\*\[05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119722433589805064)\*\*\\n- \*\*\[06-📝Swift5常用核心语法|编程范式与Swift源码【从OC到Swift、函数式编程、面向协议编程、响应式编程、Swift源码分析】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7253350009289424933)\*\*\\n\\n\\n# 二、 闭包\\n## 1. 闭包表达式（Closure Expression）\\n- 1. 在Swift中，可以通过\`func\`定义一个函数，也可以通过\`闭包表达式\`定义一个函数\\n- 2. 闭包表达式格式如下: \\n \`\`\`swift\\n {\\n (参数列表) -\\u003E 返回值类型 in\\n 函数体代码\\n }\\n \`\`\` \\n \\n \`\`\`swift\\n var fn = {\\n (v1: Int, v2: Int) -\\u003E Int in\\n return v1 + v2\\n }\\n fn(10, 20)\\n \\n {\\n (v1: Int, v2: Int) -\\u003E Int in\\n return v1 + v2\\n }(10, 20)\\n \`\`\`\\n- 3. 闭包表达式的简写如下:\\n - case1\\n \`\`\`swift\\n var fn = {\\n (v1: Int, v2: Int) -\\u003E Int in\\n return v1 + v2\\n }\\n\\n var fn: (Int, Int) -\\u003E Int = { $0 + $1 }\\n \`\`\` \\n - case2\\n \`\`\`swift\\n func exec(v1: Int, v2: Int, fn: (Int, Int) -\\u003E Int) {\\n print(fn(v1, v2))\\n }\\n\\n\\n exec(v1: 10, v2: 20) {\\n (v1, v2) -\\u003E Int in\\n return v1 + v2\\n }\\n\\n exec(v1: 10, v2: 20, fn: {\\n (v1, v2) -\\u003E Int in\\n return v1 + v2\\n })\\n\\n exec(v1: 10, v2: 20, fn: {\\n (v1, v2) -\\u003E Int in\\n v1 + v2\\n })\\n\\n exec(v1: 10, v2: 20, fn: {\\n v1, v2 in return v1 + v2\\n })\\n\\n exec(v1: 10, v2: 20, fn: {\\n v1, v2 in v1 + v2\\n })\\n\\n exec(v1: 10, v2: 20, fn: { $0 + $1 })\\n\\n exec(v1: 10, v2: 20, fn: +)\\n \`\`\` \\n\\n## 2. 尾随闭包\\n- 1. 如果将一个\*\*很长的闭包表达式\*\*作为\`函数的最后一个实参\`，使用尾随闭包可以增强函数的可读性\\n- 2. 尾随闭包是一个被书写在函数调用括号外面（后面）的闭包表达式 \\n \`\`\`swift\\n func exec(v1: Int, v2: Int, fn: (Int, Int) -\\u003E Int) {\\n print(fn(v1, v2))\\n }\\n\\n exec(v1: 10, v2: 20) {\\n $0 + $1\\n }\\n \`\`\`\\n- 3. 如果闭包表达式是函数的唯一实参，而且使用了尾随闭包的语法，那就不需要在函数名后边写圆括号\\n \`\`\`swift\\n func exec(fn: (Int, Int) -\\u003E Int) {\\n print(fn(1, 2))\\n }\\n\\n exec(fn: { $0 + $1 })\\n exec() { $0 + $1 }\\n exec { $0 + $1 }\\n exec { \_, \_ in 10 }\\n \`\`\`\\n\\u003E \*\*Swift中的\`sort函数\`用来排序的，使用的就是闭包的写法\*\*\\n!\[-w449\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5f9ca96482e64b23a2070103d27e0864~tplv-k3u1fbpfcp-zoom-1.image) \\n!\[-w597\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fc14249c8cbee44eabecb4d75ac969fbc~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n\`\`\`swift\\nvar nums = \[11, 2, 18, 6, 5, 68, 45\]\\n\\n\\u002F\\u002F1.\\nnums.sort()\\n\\n\\u002F\\u002F2.\\nnums.sort { (i1, i2) -\\u003E Bool in\\n i1 \\u003C i2\\n}\\n\\n\\u002F\\u002F3.\\nnums.sort(by: { (i1, i2) in return i1 \\u003C i2 })\\n\\n\\u002F\\u002F4.\\nnums.sort(by: { (i1, i2) in return i1 \\u003C i2 })\\n\\n\\u002F\\u002F5.\\nnums.sort(by: { (i1, i2) in i1 \\u003C i2 })\\n\\n\\u002F\\u002F6.\\nnums.sort(by: { $0 \\u003C $1 })\\n\\n\\u002F\\u002F7.\\nnums.sort(by: \\u003C)\\n\\n\\u002F\\u002F8.\\nnums.sort() { $0 \\u003C $1 }\\n\\n\\u002F\\u002F9.\\nnums.sort { $0 \\u003C $1 }\\n \\n\\u002F\\u002F10.\\nprint(nums) \\u002F\\u002F \[2, 5, 6, 11, 18, 45, 68\]\\n\`\`\`\\n\\n\\n## 3. 闭包的定义（Closure）\\n\\u003E \*\*严谨的定义是:\*\*\\n- 一个函数和它所捕获的\`变量\\u002F常量\`环境组合起来，称为闭包 \\n - 一般指定义在函数内部的函数\\n - 一般它捕获的是外层函数的局部变量\\\\常量 \\n - 全局变量,全局都可以访问,内存只有一份,且只要程序不停止运行,其内存就不会回收\\n \`\`\`swift\\n typealias Fn = (Int) -\\u003E Int\\n\\n func getFn() -\\u003E Fn {\\n var num = 0\\n func plus(\_ i: Int) -\\u003E Int {\\n num += i\\n return num\\n }\\n return plus\\n }\\n \`\`\`\\n \`\`\`swift\\n func getFn() -\\u003E Fn {\\n var num = 0\\n return {\\n num += $0\\n return num\\n }\\n }\\n \`\`\`\\n \`\`\`swift\\n var fn1 = getFn()\\n var fn2 = getFn() \\n \\n fn1(1) \\u002F\\u002F 1\\n fn2(2) \\u002F\\u002F 2\\n fn1(3) \\u002F\\u002F 4 \\n fn2(4) \\u002F\\u002F 6\\n fn1(5) \\u002F\\u002F 9 \\n fn2(6) \\u002F\\u002F 12\\n \`\`\`\\n\\n\\u003E \*\*通过汇编分析闭包的实现\*\*\\n看下面示例代码，分别打印为多少\\n\`\`\`swift\\nfunc getFn() -\\u003E Fn {\\n var num = 0\\n func plus(\_ i: Int) -\\u003E Int {\\n num += i\\n return num\\n }\\n return plus\\n}\\n\\nvar fn = getFn()\\n\\nprint(fn(1)) \\u002F\\u002F 1\\nprint(fn(2)) \\u002F\\u002F 3\\nprint(fn(3)) \\u002F\\u002F 6\\nprint(fn(4)) \\u002F\\u002F 10\\n\`\`\`\\n\\n我们通过反汇编来观察:\\n!\[-w1012\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fd6738fd229b74dda8a490a4af0749cb6~tplv-k3u1fbpfcp-zoom-1.image)\\n通过这句调用可以看出:\\n- 在\`return plus\`之前，闭包(表层通过\`allicObject\`)底层会调用\`malloc函数\`进行堆内存的分配，也就是将拷贝num的值到堆上来持有不被释放\\n- 而栈里的num由于\`getFn\`调用完毕就随着栈释放了，\`plus函数\`里操作的都是堆上的num\\n- 调用\`malloc函数\`之前需要告诉系统要分配多少内存，需要24个字节来存储内存\\n - (因为在iOS系统中,分配堆内存的底层算法有内存对齐的概念，内存对齐的参数是16)而通过\`malloc函数\`分配的内存都是大于或等于其本身数据结构所需内存的16的最小倍数，所以会分配32个字节内存\\n\\n!\[-w1014\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F46c0949ee2ef49bda6a3dd1e72f8c0f7~tplv-k3u1fbpfcp-zoom-1.image) \\n!\[-w596\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F97ddb3df35cc4d7bb056ede40594e683~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n我们打印\`rax寄存器\`的值可以知道:\\n- 系统分配的32个字节，前16个字节用来存储其他信息\\n- 而且从图上的圈起来的地方也可以看到，将0移动16个字节\\n- 所以16个字节之后的8个字节才用来存储num的值\\n\\n!\[-w532\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F9dcceef7db894af68271c5622ac1db14~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n调用\`fn(1)\`，将断点打在这里，然后查看反汇编指令\\n\\n!\[-w1009\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F2b0e109bf5ef45089e0d082fd181a8ed~tplv-k3u1fbpfcp-zoom-1.image) !\[-w575\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe3b2bc9e7751486e9241c76521fcb8bd~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n然后调用到\`plus函数\`内部，再次打印\`rax寄存器\`的值，发现num的值已经变为1了\\n\\n!\[-w575\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe5341d04835242f9acb064f3c5c99601~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n然后继续往下执行调用\`fn(2)\`，发现num的值已经变为3了\\n\\n!\[-w606\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F369ab4213cdf41908e77b2c703499416~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n然后继续往下执行调用\`fn(3)\`，发现num的值已经变为6了\\n\\n!\[-w596\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F719e3ef11cb747e6aca1260882450353~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n然后继续往下执行调用\`fn(4)\`，发现num的值已经变为10了\\n\\n\*\*闭包和类的相似之处\*\*\\n\\n我们可以把闭包想像成是一个类的实例对象\\n\\n- 内存在堆空间\\n- 捕获的局部变量\\\\常量就是对象的成员（存储属性）\\n- 组成闭包的函数就是类内部定义的方法\\n\\n类似如下示例\\n\\n\`\`\`swift\\nclass Closure {\\n var num = 0\\n \\n func plus(\_ i: Int) -\\u003E Int {\\n num += i\\n return num\\n }\\n}\\n\\nvar cs = Closure()\\ncs.plus(1)\\ncs.plus(2)\\ncs.plus(3)\\ncs.plus(4)\\n\`\`\`\\n\\n而且通过反汇编也能看出类和闭包的共同之处:\\n- 分配的堆内存空间前16个字节都是用来存储\`数据类型信息\`和\`引用计数\`的\\n\\n\\u003E \*\*再看下面的示例\*\*\\n\\n如果把num变成全局变量呢，还会不会分配堆内存\\n\\n\`\`\`swift\\ntypealias Fn = (Int) -\\u003E Int\\n\\nvar num = 0\\n\\nfunc getFn() -\\u003E Fn {\\n\\n func plus(\_ i: Int) -\\u003E Int {\\n num += i\\n return num\\n }\\n return plus\\n}\\n\\nvar fn = getFn()\\n\\nprint(fn(1)) \\u002F\\u002F 1\\nprint(fn(2)) \\u002F\\u002F 3\\nprint(fn(3)) \\u002F\\u002F 6\\nprint(fn(4)) \\u002F\\u002F 10\\n\`\`\`\\n\\n我们通过反汇编可以看到，系统不再分配堆内存空间了\\n\\n!\[-w717\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fd6a93827e65740c592f1a633795568cb~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n\\u003E \*\*注意:\*\* 如果返回值是函数类型，那么参数的修饰要保持统一\\n\\n\`\`\`swift\\nfunc add(\_ num: Int) -\\u003E (inout Int) -\\u003E Void {\\n func plus(v: inout Int) {\\n v += num\\n }\\n \\n return plus\\n}\\n\\nvar num = 5\\nadd(20)(&num)\\n\\nprint(num)\\n\`\`\`\\n\\n\\n## 4. 自动闭包\\n\\n我们先看下面的示例代码\\n\\n如果调用\`getFirstPositive\`并传入两个参数，第一个参数符合条件，但是还需要调用\`plus\`来得到第二个参数，这种设计相比就稍许有些浪费了\\n\\n\`\`\`swift\\n\\u002F\\u002F 如果第1个数大于0，返回第一个数。否则返回第2个数\\nfunc getFirstPositive(\_ v1: Int, \_ v2: Int) -\\u003E Int {\\n v1 \\u003E 0 ? v1 : v2\\n}\\n\\nfunc plus(\_ num1: Int, \_ num2: Int) -\\u003E Int {\\n print(\\"haha\\")\\n return num1 + num2\\n}\\n\\ngetFirstPositive(10, plus(2, 4))\\n\`\`\`\\n\\n我们进行了一些优化，将第二个参数的类型变为函数，只有条件成立的时候才会去调用\\n\\n\`\`\`swift\\nfunc getFirstPositive(\_ v1: Int, \_ v2: () -\\u003E Int) -\\u003E Int {\\n v1 \\u003E 0 ? v1 : v2()\\n}\\n\\nfunc plus(\_ num1: Int, \_ num2: Int) -\\u003E Int {\\n print(\\"haha\\")\\n return num1 + num2\\n}\\n\\ngetFirstPositive(10, { plus(2, 4)} )\\n\`\`\`\\n\\n这样确定能够满足条件避免多余的调用，但是可读性就会差一些\\n\\n\\u003E \*\*我们可以使用\`自动闭包@autoclosure\`来修饰形参\*\*\\n\\n- 1. \`@autoclosure\`会将传进来的类型包装成闭包表达式，这是编译器特性 \\n- 2. \`@autoclosure\`只支持\`() -\\u003E T\`格式的参数 \\n \`\`\`swift\\n func getFirstPositive(\_ v1: Int, \_ v2: @autoclosure () -\\u003E Int) -\\u003E Int {\\n v1 \\u003E 0 ? v1 : v2()\\n }\\n\\n func plus(\_ num1: Int, \_ num2: Int) -\\u003E Int {\\n print(\\"haha\\")\\n return num1 + num2\\n }\\n\\n getFirstPositive(10, plus(2, 4))\\n \`\`\` \\n- 3. \`@autoclosure\`并非只支持最后一个参数 \\n \`\`\`swift\\n func getFirstPositive(\_ v1: Int, \_ v2: @autoclosure () -\\u003E Int, \_ v3: Int) -\\u003E Int \\n {\\n v1 \\u003E 0 ? v1 : v2()\\n }\\n \`\`\` \\n- 4. \`空合并运算符??\`中就使用了\`@autoclosure\`来将\`??\`后面的参数进行了包装\\n !\[-w860\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fbd984c9d6f3643dab1b92ab556f30183~tplv-k3u1fbpfcp-zoom-1.image)\\n- 5. 有\`@autoclosure\`和无\`@autoclosure\`会构成函数重载，不会报错\\n \`\`\`swift\\n func getFirstPositive(\_ v1: Int, \_ v2: () -\\u003E Int) -\\u003E Int {\\n v1 \\u003E 0 ? v1 : v2()\\n }\\n\\n func getFirstPositive(\_ v1: Int, \_ v2: @autoclosure () -\\u003E Int) -\\u003E Int {\\n v1 \\u003E 0 ? v1 : v2()\\n }\\n \`\`\`\\n\\n\*\*注意：为了避免与期望冲突，使用了\`@autoclosure\`的地方最好明确注释清楚：这个值会被推迟执行\*\*\\n\\n\\n## 5. 通过汇编进行底层分析\\n\\n\*\*1.分析下面这个函数的内存布局\*\*\\n\`\`\`swift\\nfunc sum(\_ v1: Int, \_ v2: Int) -\\u003E Int { v1 + v2 }\\n\\nvar fn = sum\\nprint(MemoryLayout.stride(ofValue: fn)) \\u002F\\u002F 16\\n\`\`\` \\n反汇编之后 \\n!\[-w717\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa4ba5da513114259b612ace0f69a5aed~tplv-k3u1fbpfcp-zoom-1.image) \\n可以看到:\\n- 底层会先计算sum的值，然后移动到fn的前8个字节\\n- 再将0移动到fn的后8个字节，总共占用16个字节 \\n!\[-w716\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7b5f06739b3245a58064cb8f6a325600~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n两个地址相差8个字节，所以是连续的，都表示fn的前后8个字节的地址值\\n\\n\*\*2.分析下面这个函数的内存布局\*\*\\n\`\`\`swift\\ntypealias Fn = (Int) -\\u003E Int\\n\\nfunc getFn() -\\u003E Fn {\\n var num = 0\\n \\n func plus(\_ i: Int) -\\u003E Int {\\n return i\\n }\\n return plus\\n}\\n\\nvar fn = getFn()\\n\\nprint(Mems.size(ofVal: &fn)) \\u002F\\u002F 16\\n\`\`\`\\n\\n反汇编之后 \\n!\[-w716\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa378d1df3a52495fb11f4faeb14dd569~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n我们能看到:\\n- 1. 先调用\`getFn\`\\n- 2. 之后\`rax\`和\`rdx\`会给fn分配16个字节\\n\\n然后我们进入\`getFn\`看看\`rax\`和\`rdx\`存储的值分别是什么\\n\\n!\[-w715\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fad095c56c2a84749ad673f279bd1931e~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n可以看到会将\`plus的返回值\`放到\`rax\`中 \\n!\[-w949\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F085cd31f92be495199b099b63083aa34~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n可以看到\`ecx\`和自己进行异或运算，并把结果0存储到\`rdx\`中\\n\\n所以回过头看第一张图就知道了，fn的\`16\`个字节中，前8个字节存储的是\`plus\`的返回值，后8个字节存储的是0\\\\\\n等同于将\`plus函数\`赋值给fn\\n\\n\`\`\`swift\\nvar fn = plus()\\n\`\`\`\\n\\n\*\*3.分析下面这个函数的内存布局\*\*\\n\\n我们将上面示例里的\`plus函数\`内部对num进行捕获，看看其内存布局有什么变化\\n\\n\`\`\`swift\\ntypealias Fn = (Int) -\\u003E Int\\n\\nfunc getFn() -\\u003E Fn {\\n var num = 0\\n \\n func plus(\_ i: Int) -\\u003E Int {\\n num += i\\n return num\\n }\\n return plus\\n}\\n\\nvar fn = getFn()\\n\\nfn(1)\\nfn(2)\\nfn(3)\\n\\nprint(Mems.size(ofVal: &fn)) \\u002F\\u002F 16\\n\`\`\`\\n\\n反汇编之后\\n\\n!\[-w945\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F359c67b88a43494086592a1db8b278e1~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n我们可以看到，调用完\`getFn\`之后，会分别将\`rax\`和\`rdx\`的值移动到\`rip+内存地址\`，也就是给全局变量fn进行赋值操作\\n\\n我们通过打印获取fn的内存占用知道是16个字节，fn的前8个字节就是\`rax\`里存储的值，而后8个字节存储的是\`rdx\`里的值\\n\\n我们只需要找到\`rax\`和\`rdx\`里分别存储的是什么就可以了\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fded70d76d4864333b63e1a29636cc9f7~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n可以看到在堆空间分配完内存之后的\`rax\`给上面几个都进行了赋值，最后的\`rdx\`里存储的就是堆空间的地址值\\n\\n!\[-w944\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F647e6838c3f24c4eb26ef62086e1d306~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n从这句看\`rax\`里存储的应该是和\`plus函数\`相关，下面我们就要找到\`rax\`里存储的是什么\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F905044a7ab2e4a6092d55c9c4f0f71c2~tplv-k3u1fbpfcp-zoom-1.image) !\[-w946\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F1f1a75e937114d70811f800dc4f78bf7~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n而且我们调用fn(1)时也可以推导出是调用的全局变量fn的前八个字节\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7fee0fda6ede44099ed1fe6adab5e262~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n参数1会存储到\`edi\`中\\n\\n而经过上面的推导我们知道\`-0xf8(%rbp)\`中存储的是fn的前8个字节，那么往后8位就是\`-0x100(%rbp)\`，里面放的肯定就是堆空间的地址值了，存储到了\`r13\`中\\n\\n我们在这里打断点，来观察\`rax\`里到底存储的是什么\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F96ff7d5814604fedb11ba3968cdb7ce4~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w946\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff0cd10a8dcbe430cba1fb3675e49deb3~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F905e16cba0fd44a48538817ff1df9c8d~tplv-k3u1fbpfcp-zoom-1.image) \\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F62511fbce3fe436caa43c1e6a671f0c7~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w949\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F718280ea6726479ea4c13567165e2145~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n经过一系列的跳转，重要来到了plus真正的函数地址\\n\\n而且\`r13\`最后给了\`rsi\`，\`rdi\`中存储的还是参数1\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fdf72a2a945654c71a6b0b194e747d7fa~tplv-k3u1fbpfcp-zoom-1.image) !\[-w946\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F2369455bac414bd29408f0a23b3d0a49~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n进到\`plus函数\`中，然后找到进行相加计算的地方，因为传进来的参数是变化的，所以不可能是和固定地址值进行相加\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa5b3056bee744af690d00c5355b5d913~tplv-k3u1fbpfcp-zoom-1.image) !\[-w946\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F235f74a0520a4ad58200b36fd23a5969~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过推导得知\`rcx\`里存储的值就是\`rdi\`中的参数1\\n\\n!\[-w945\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F037d3d0619c34d2587f3ffc37ffd1e4f~tplv-k3u1fbpfcp-zoom-1.image) !\[-w945\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fd961d60c35c54becab0b2e34028a9e9f~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过推导得知\`rdx\`里存储的值就是\`rsi\`中的堆内存的num地址\\n\\n所以可以得知\`0x10(%rdx)\`也就是\`rdx\`跳过16个字节的值就是num的值\\n\\n!\[-w741\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff4d1ea7c9c4944b18af51213921f2bbd~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过打印也可以证明我们的分析是正确的\\n\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fc28a28b9ae264d3d98844a06e0a5fb2b~tplv-k3u1fbpfcp-zoom-1.image) !\[-w946\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fff502270a2884bde85bf51405764b28f~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过推导可以发现\`rax\`中存储的是\`rsi\`的num的地址值\\n\\n然后将\`rcx\`中的值覆盖掉\`rax\`中的num地址值\\n\\n而且真正进行捕获变量的时机是在\`getFn\`即将return之前做的事\\n\\n\*\*4.分析下面这个函数的内存布局\*\*\\n\\n我们来看下面这个闭包里的变量会被捕获几次\\n\\n\`\`\`swift\\ntypealias Fn = (Int) -\\u003E (Int, Int)\\n\\nfunc getFns() -\\u003E (Fn, Fn) {\\n var num1 = 0\\n var num2 = 0\\n\\n func plus(\_ i: Int) -\\u003E (Int, Int) {\\n num1 += i \\u002F\\u002F 6 + 0 = 6, 1 + 4 = 5,\\n num2 += i \\u003C\\u003C 1 \\u002F\\u002F 1100 = 12 + 0 = 12, 1000 = 8 + 2 = 10\\n return (num1, num2)\\n }\\n\\n func minus(\_ i: Int) -\\u003E (Int, Int) {\\n num1 -= i \\u002F\\u002F 6 - 5 = 1, 5 - 3 = 2\\n num2 -= i \\u003C\\u003C 1 \\u002F\\u002F 1010 = 12 - 10 = 2, 0110 = 10 - 6 = 4\\n return (num1, num2)\\n }\\n\\n return (plus, minus)\\n}\\n\\nlet (p, m) = getFns()\\nprint(p(6)) \\u002F\\u002F 6, 12\\nprint(m(5)) \\u002F\\u002F 1, 2\\nprint(p(4)) \\u002F\\u002F 5, 10\\nprint(m(3)) \\u002F\\u002F 2, 4\\n\`\`\`\\n反汇编之后\\n\\n!\[-w946\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5bd66e2c622e4b06ae82ed5f8fc7e2bb~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n发现其底层分别会分配两个堆空间，但是num1、num2也只是分别捕获一次，然后两个函数\`plus、minus\`共有\\n\\n# 三、结构体 \\n## 1. 基本概念\\n- 在Swift\*\*标准库中，绝大多数的公开类型都是结构体\*\*，而\*\*枚举和类只占很小一部分\*\*\\n - 比如\`Bool、Int、String、Double、Array、Dictionary\`等常见类型都是结构体\\n \`\`\`swift\\n struct Date {\\n var year: Int\\n var month: Int\\n var day: Int\\n }\\n var date = Date(year: 2019, month: 6, day: 23)\\n \`\`\`\\n- 所有的结构体\*\*都有一个编译器自动生成的初始化器\*\*（\`initializer\`，初始化方法、构造器、构造方法）\\n - 通过默认生成的初始化器初始化:传入所有成员值，用以初始化所有成员（\`存储属性\`，\`Stored Property\`）\\n \`\`\`swift\\n var date = Date(year: 2019, month: 6, day: 23)\\n \`\`\`\\n## 2. 结构体的初始化器\\n- 编译器会根据情况，可能会为结构体生成多个初始化器，宗旨是：\`保证所有成员都有初始值\`\\n- 如果结构体的成员定义的时候都有默认值了，那么生成的初始化器不会报错\\n !\[-w569\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fc7f34e0c903b4112a1a603c46665c4ae~tplv-k3u1fbpfcp-zoom-1.image)\\n - 如果是下面这几种情况就会报错\\n !\[-w642\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe364616dd6c944f28d5ab613284d4403~tplv-k3u1fbpfcp-zoom-1.image) \\n !\[-w645\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F189bf09fbbf248df8396eaa8a9b74c33~tplv-k3u1fbpfcp-zoom-1.image)\\n !\[-w640\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fde06012b6cec46dabe604d027cd1654a~tplv-k3u1fbpfcp-zoom-1.image)\\n - 如果是可选类型的初始化器也不会报错，因为可选类型默认的值就是\`nil\`\\n !\[-w457\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F1a73b4ae9ef8415ab4c5b3de861cd5fa~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 3. 自定义初始化器\\n我们也可以自定义初始化器\\n\`\`\`swift\\nstruct Point {\\n var x: Int = 0\\n var y: Int = 0\\n \\n init(x: Int, y: Int) {\\n self.x = x\\n self.y = y\\n }\\n} \\nvar p1 = Point(x: 10, y: 10)\\n\`\`\`\\n下面对变量\`p2\`、\`p3\`、\`p4\`初始化报错的原因是 因为我们 \*\*\`已经自定义初始化器了，编译器就不会再帮我们生成默认的初始化器了\`\*\*\\n!\[-w643\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fda74440857c645b6990bc678cf0ab2f2~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 4. 初始化器的本质\\n下面这两种写法是完全等效的\\n\`\`\`swift\\nstruct Point {\\n var x: Int = 0\\n var y: Int = 0\\n} \\n等效于 \\nstruct Point {\\n var x: Int\\n var y: Int\\n \\n init() {\\n x = 0\\n y = 0\\n }\\n} \\nvar p4 = Point()\\n\`\`\`\\n- 我们通过反汇编分别对比一下两种写法的实现，发现也是一样的:\\n- 因此,我们不难得出结论: \\\\\\n 默认初始化器的本质,就是给存储属性做了默认赋值工作(比如这里给Int类型的两个属性默认赋值为\`0\`)\\n!\[-w713\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fbde85343b7e74b75a53d605462260979~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w715\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa431a9e76973412dbfe8e6014d9bc01a~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 5.结构体的内存结构\\n1. \*\*我们通过打印,了解下结构体占用的内存大小 和 其 内存布局\*\*\\n\`\`\`swift\\nstruct Point {\\n var x: Int = 10\\n var y: Int = 20\\n} \\nvar p4 = Point() \\nprint(MemoryLayout\\u003CPoint\\u003E.stride) \\u002F\\u002F 16\\nprint(MemoryLayout\\u003CPoint\\u003E.size) \\u002F\\u002F 16\\nprint(MemoryLayout\\u003CPoint\\u003E.alignment) \\u002F\\u002F 8\\n\\nprint(Mems.memStr(ofVal: &p4)) \\u002F\\u002F 0x000000000000000a 0x0000000000000014\\n\`\`\`\\n通过控制台,我们可以看到:\\n- 系统一共分配了\`16\`个字节的内存空间\\n- 前8个字节存储的是10，后8个字节存储的是20\\n\\n2. 我们再看下面这个结构体\\n\`\`\`swift\\nstruct Point {\\n var x: Int = 10\\n var y: Int = 20\\n var origin: Bool = false\\n}\\n\\nvar p4 = Point()\\n\\nprint(MemoryLayout\\u003CPoint\\u003E.stride) \\u002F\\u002F 24\\nprint(MemoryLayout\\u003CPoint\\u003E.size) \\u002F\\u002F 17\\nprint(MemoryLayout\\u003CPoint\\u003E.alignment) \\u002F\\u002F 8\\n\\nprint(Mems.memStr(ofVal: &p4)) \\u002F\\u002F 0x000000000000000a 0x0000000000000014 0x0000000000000000\\n\`\`\`\\n可以看到:\\n- 结构体实际只用了17个字节，而因为系统分配有内存对齐的概念,所以分配了24个字节\\n- 前8个字节存储的是10，中间8个字节存储的是20，最后1个字节存储的是false，也就是0\\n\\n# 四、类\\n- 类的定义和结构体类似，但编译器并没有为类自动生成可以传入成员值的初始化器\\n !\[-w646\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F48faa928fa484b87a2ae3996bbcabac8~tplv-k3u1fbpfcp-zoom-1.image)\\n- 如果成员没有初始值，所有的初始化器都会报错\\n !\[-w648\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff5699df524e743128207ac9c2edbd947~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 1. 类的初始化器\\n- 如果类的所有成员都在定义的时候指定了初始值，编译器会为类生成 \*\*\`无参的初始化器\`\*\*\\n- 成员的初始化是在这个初始化器中完成的\\n \`\`\`swift\\n class Point {\\n var x: Int = 0\\n var y: Int = 0\\n }\\n\\n let p1 = Point()\\n \`\`\` \\n - 下面这两种写法是完全等效的 \\n \`\`\`swift\\n class Point {\\n var x: Int = 0\\n var y: Int = 0\\n }\\n\\n 等效于\\n\\n class Point {\\n var x: Int\\n var y: Int\\n\\n init() {\\n x = 0\\n y = 0\\n }\\n }\\n\\n let p1 = Point()\\n \`\`\`\\n\\n## 2. 结构体与类的本质区别\\n- 结构体是\`值类型\`（枚举也是值类型），类是\`引用类型\`（指针类型）\\\\\\n下面我们分析函数内的局部变量分别都在内存的什么位置\\n\`\`\`swift\\nclass Size {\\n var width = 1\\n var height = 2\\n} \\nstruct Point {\\n var x: Int = 3\\n var y: Int = 4\\n}\\n\\nfunc test() {\\n var size = Size()\\n var point = Point()\\n} \\n\`\`\`\\n- \`变量\`size和point都是在栈空间\\n- 不同的是\`局部变量point\`是一个结构体类型。结构体是值类型，结构体变量会在栈空间中分配内存,它里面的两个成员x、y按顺序的排布\\n- 而\`局部指针变量size\`是一个类的实例，类是引用类型，所以\`size指针\`指向的已初始化的变量的存储空间,是在堆中分配的，size指针内部存储的是Size类的实例内存地址\\n !\[-w1020\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F70ea6076fb1548509687cab9ebead2cd~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 3. 分析类的内存布局 \\n- 1. 我们先来看一下类的占用内存大小是多少\\n \`\`\`swift\\n class Size {\\n var width = 1\\n var height = 2\\n }\\n print(MemoryLayout\\u003CSize\\u003E.stride) \\u002F\\u002F 8\\n \`\`\`\\n 通过打印我们可以发现\`MemoryLayout\`获取的8个字节实际上是指针变量占用多少存储空间，并不是对象在堆中的占用大小\\n- 2. 然后我们再看类的内存布局是怎样的\\n \`\`\`swift\\n var size = Size()\\n\\n print(Mems.ptr(ofVal: &size)) \\u002F\\u002F 0x000000010000c388\\n print(Mems.memStr(ofVal: &size)) \\u002F\\u002F 0x000000010072dba0\\n \`\`\`\\n 通过打印我们可以看到变量里面存储的值也是一个地址\\n- 3. 我们再打印该变量所指向的对象的内存布局是什么\\n \`\`\`swift\\n print(Mems.size(ofRef: size)) \\u002F\\u002F 32\\n print(Mems.ptr(ofRef: size)) \\u002F\\u002F 0x000000010072dba0\\n print(Mems.memStr(ofRef: size)) \\u002F\\u002F 0x000000010000c278 0x0000000200000003 0x0000000000000001 0x0000000000000002\\n \`\`\`\\n 通过打印可以看到在\`堆中存储的对象的地址\`和上面的\`指针变量里存储的值\`是一样的\\n \\n 内存布局里一共占用32个字节:\\n - 前16个字节分别用来存储一些\`类信息\`和\`引用计数\`\\n - 后面16个字节存储着类的成员变量的值\\n\\n\\u003E \*\*下面我们再从反汇编的角度来分析\*\*\\n \\n- 我们要想确定类是否在堆空间中分配空间，通过反汇编来查看是否有调用\`malloc函数\`\\n !\[-w708\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7ff9723d317849f1a11137973bd89be3~tplv-k3u1fbpfcp-zoom-1.image)\\n !\[-w716\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F4a45d9d80a3d43efb61a81f9e475e045~tplv-k3u1fbpfcp-zoom-1.image)\\n- 然后就一直跟进直到这里最好调用了\`swift\_slowAlloc\`\\n !\[-w714\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F65b01d1dd467407f8ebc07a08d1c7d15~tplv-k3u1fbpfcp-zoom-1.image)\\n- 发现函数内部调用了系统的\`malloc\`在堆空间分配内存\\n !\[-w709\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F6a9514ee0c924446a07710bd1ca2f405~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n\*\*注意:\*\*\\n- 结构体和枚举存储在哪里\`取决于它们是在哪里分配\`的\\n - 如果是在函数中分配的那就是在栈里\\n - 如果是在全局中分配的那就是在数据段\\n- 而类无论是在哪里分配的，对象都是在堆空间中\\n - 指向对象内存的指针的存储位置是不确定的，可能在栈中也可能在数据段\\n\\n\\u003E \*\*我们再看下面的\`类型\`占用内存大小是多少\*\*\\n\`\`\`swift\\nclass Size {\\n var width: Int = 0\\n var height: Int = 0\\n var test = true\\n}\\n\\nlet s = Size()\\n\\nprint(Mems.size(ofRef: s)) \\u002F\\u002F 48\\n\`\`\`\\n- 在\`Mac、iOS\`中的\`malloc函数\`分配的内存大小总是\`16的倍数\`\\n- 类最前面会有\`16个字节\`用来存储\`类的信息\`和\`引用计数\`，所以实际占用内存是\`33个字节\`，但由于\`malloc函数\`分配的内存都是刚好大于或等于其所需内存的16最小倍数，所以分配\`48个字节\`\\n- 我们还可以通过\`class\_getInstanceSize\`函数来获取类对象的内存大小\\n\`\`\`swift\\n\\u002F\\u002F 获取的是经过内存对齐后的内存大小，不是malloc函数分配的内存大小\\nprint(class\_getInstanceSize(type(of: s))) \\u002F\\u002F 40\\nprint(class\_getInstanceSize(Size.self)) \\u002F\\u002F 40\\n\`\`\`\\n\\n\\n# 五、枚举\\n## 1. 枚举的基本用法\\n\`\`\`swift\\nenum Direction {\\n case north\\n case south\\n case east\\n case west\\n}\\n\\n\\u002F\\u002F 简便写法\\nenum Direction {\\n case north, south, east, west\\n}\\n\\nvar dir = Direction.west\\ndir = Direction.east\\ndir = .north\\nprint(dir) \\u002F\\u002F north\\n\\nswitch dir {\\ncase .north:\\n print(\\"north\\")\\ncase .south:\\n print(\\"south\\")\\ncase .east:\\n print(\\"east\\")\\ncase .west:\\n print(\\"west\\")\\n}\\n\`\`\`\\n\\n## 2. 关联值（Associated Values）\\n\\n有时会将\`枚举的成员值\`和\`其他类型的值\`关联 \*\*\`存储在一起\`\*\* ,会非常有用 \\n\`\`\`swift\\nenum Score {\\n case points(Int)\\n case grade(Character)\\n}\\n\\nvar score = Score.points(96)\\nscore = .grade(\\"A\\")\\n\\nswitch score {\\ncase let .points(i):\\n debugPrint(i)\\ncase let .grade(i):\\n debugPrint(i)\\n}\\n\`\`\`\\n\\n\`\`\`swift\\nenum Date {\\n case digit(year: Int, month: Int, day: Int)\\n case string(String)\\n}\\n\\nvar date = Date.digit(year: 2020, month: 12, day: 5)\\ndate = .string(\\"2022-07-10\\")\\n\\u002F\\u002F必要时【let】也可以改为【var】\\nswitch date {\\ncase .digit(let year, let month, let day):\\n debugPrint(year, month, day)\\ncase let .string(value):\\n debugPrint(value)\\n}\\n\`\`\`\\n\\u003E 关联值举例\\n!\[image.png\](https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F213b2a7017054921aab9ff40adb7f450~tplv-k3u1fbpfcp-watermark.image?)\\n!\[image.png\](https:\\u002F\\u002Fp1-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fef6d6b00633049bd9d7052042ffdb84f~tplv-k3u1fbpfcp-watermark.image?)\\n\`\`\`swift\\nenum Password {\\n case number(Int, Int, Int, Int)\\n case gesture(String)\\n}\\n\\nvar pwd = Password.number(5, 6, 4, 7)\\npwd = .gesture(\\"12369\\")\\n\\nswitch pwd {\\ncase let .number(n1, n2, n3, n4):\\n print(\\"number is \\", n1, n2, n3, n4)\\ncase let .gesture(str):\\n print(\\"gesture is \\", str)\\n}\\n\`\`\`\\n必要时,使用了枚举关联值的\`switch-case\`语句 里面的 \`let\`也可以改成\`var\`\\n\\n## 3. 原始值（Raw Values）\\n\\n枚举成员可以使用\`相同类型\`的默认值预先关联，这个默认值叫做\`原始值\`\\n\\n\`\`\`swift\\nenum PokerSuit: String {\\n case spade = \\"♠\\"\\n case heart = \\"♥\\"\\n case diamond = \\"♦\\" \\n case club = \\"♣\\"\\n}\\n\\nlet suit = PokerSuit.heart\\ndebugPrint(suit)\\u002F\\u002F heart\\ndebugPrint(suit.rawValue)\\u002F\\u002F ♥\\ndebugPrint(PokerSuit.spade.rawValue)\\u002F\\u002F ♠ \\n\`\`\`\\n\\n\`\`\`swift\\nenum Grade : String { \\n case perfect = \\"A\\" \\n case great = \\"B\\" \\n case good = \\"C\\" \\n case bad = \\"D\\" \\n} \\nprint(Grade.perfect.rawValue) \\u002F\\u002F A \\nprint(Grade.great.rawValue) \\u002F\\u002F B \\nprint(Grade.good.rawValue) \\u002F\\u002F C\\nprint(Grade.bad.rawValue) \\u002F\\u002F D\\n\`\`\` \\n注意:\\n- 原始值不占用枚举变量的内存\\n- 原始值只是关联上了枚举变量，所以原始值占用内存的大小并不是枚举变量的大小\\n- 底层实现是通过计算属性\\u002F函数来获取原始值的\\n\\n## 4. 隐式原始值(Implicitly Assigned Raw Values)\\n\\n如果枚举的原始值类型是\`Int\`、\`String\`，Swift会自动分配原始值\\n\\n字符串默认分配的原始值就是其变量名\\n\`\`\`swift\\nenum Direction: String {\\n case north = \\"north\\"\\n case south = \\"south\\"\\n case east = \\"east\\"\\n case west = \\"west\\"\\n}\\n\\n\\u002F\\u002F 等价于上面\\nenum Direction: String {\\n case north, south, east, west\\n}\\nprint(Direction.north) \\u002F\\u002F north\\nprint(Direction.north.rawValue) \\u002F\\u002F north\\n\`\`\`\\n\\n\*\*\`Int类型\`默认分配的原始值是从0开始递增的数字\*\*\\n\\n\`\`\`swift\\nenum Season: Int {\\n case spring, summer, autumn, winter\\n}\\n\\nprint(Season.spring.rawValue) \\u002F\\u002F 0\\nprint(Season.summer.rawValue) \\u002F\\u002F 1\\nprint(Season.autumn.rawValue) \\u002F\\u002F 2\\nprint(Season.winter.rawValue) \\u002F\\u002F 3\\n\`\`\`\\n\\n\*\*如果有指定原始值的，下一个就会按照已经指定的值递增分配\*\*\\n\\n\`\`\`swift\\nenum Season: Int {\\n case spring = 1, summer, autumn = 4, winter\\n} \\nprint(Season.spring.rawValue) \\u002F\\u002F 1\\nprint(Season.summer.rawValue) \\u002F\\u002F 2\\nprint(Season.autumn.rawValue) \\u002F\\u002F 4\\nprint(Season.winter.rawValue) \\u002F\\u002F 5\\n\`\`\`\\n\\n## 5. 递归枚举（Recursive Enumeration）\\n- 1. 递归枚举要用\`indirect\`关键字来修饰\`enum\`，不然会报错\\n \`\`\`swift\\n indirect enum ArithExpr {\\n case number(Int)\\n case sum(ArithExpr, ArithExpr)\\n case difference(ArithExpr, ArithExpr)\\n }\\n\\n 或者\\n\\n enum ArithExpr {\\n case number(Int)\\n indirect case sum(ArithExpr, ArithExpr)\\n indirect case difference(ArithExpr, ArithExpr)\\n }\\n\\n let five = ArithExpr.number(5)\\n let four = ArithExpr.number(4)\\n let sum = ArithExpr.sum(five, four)\\n let two = ArithExpr.number(2)\\n let difference = ArithExpr.difference(sum, two)\\n\\n func calculate(\_ expr: ArithExpr) -\\u003E Int {\\n switch expr {\\n case let .number(value):\\n return value\\n case let .sum(left, right):\\n return calculate(left) + calculate(right)\\n case let .difference(left, right):\\n return calculate(left) - calculate(right)\\n }\\n }\\n\\n calculate(difference)\\n \`\`\`\\n\\n## 6. MemoryLayout\\n- 1. 可以使用\`MemoryLayout\`获取数据类型占用的内存大小\\\\\\n \`64bit\`的\`Int类型\`占\`8个字节\` \\n \`\`\`swift\\n let age = 10\\n\\n MemoryLayout\\u003CInt\\u003E.stride \\u002F\\u002F 8, 分配占用的空间大小\\n MemoryLayout\\u003CInt\\u003E.size \\u002F\\u002F 8, 实际用到的空间大小\\n MemoryLayout\\u003CInt\\u003E.alignment \\u002F\\u002F 8, 内存对齐参数\\n\\n 等同于\\n\\n MemoryLayout.size(ofValue: age)\\n MemoryLayout.stride(ofValue: age)\\n MemoryLayout.alignment(ofValue: age)\\n \`\`\`\\n\\n关联值和原始值的区别：\\n- 关联值类型会存储到枚举变量里面\\n- 原始值因为一开始就会知道默认值是多少，所以只做记录，不会存储\\n \`\`\`swift\\n enum Password {\\n case number(Int, Int, Int, Int)\\n case other\\n }\\n\\n MemoryLayout\\u003CPassword\\u003E.stride \\u002F\\u002F 40，分配占用的空间大小\\n MemoryLayout\\u003CPassword\\u003E.size \\u002F\\u002F 33，实际用到的空间大小\\n MemoryLayout\\u003CPassword\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n \`\`\`\\n\\n \`\`\`swift\\n enum Session: Int {\\n case spring, summer, autnmn, winter\\n }\\n\\n MemoryLayout\\u003CSession\\u003E.stride \\u002F\\u002F 1，分配占用的空间大小\\n MemoryLayout\\u003CSession\\u003E.size \\u002F\\u002F 1，实际用到的空间大小\\n MemoryLayout\\u003CSession\\u003E.alignment \\u002F\\u002F 1，对齐参数\\n \`\`\`\\n\\u003E \*\*思考下面枚举变量的内存布局:\*\*\\n\*\*案例1:\*\*\\n\`\`\`swift\\nenum TestEnum { \\n case test1, test2, test3 \\n} \\nvar t = TestEnum.test1\\nt = .test2 \\nt = .test3\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 1，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 1，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 1，对齐参数\\n\`\`\`\\n\*\*案例2:\*\*\\n\`\`\`swift\\nenum TestEnum : Int {\\n case test1 = 1, test2 = 2, test3 = 3 \\n}\\nvar t = TestEnum.test1 \\nt = .test2 \\nt = .test3\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 1，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 1，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 1，对齐参数\\n\`\`\`\\n\*\*案例3:\*\*\\n\`\`\`swift\\nenum TestEnum {\\n case test1(Int, Int, Int)\\n case test2(Int, Int)\\n case test3(Int) \\n case test4(Bool) \\n case test5\\n} \\nvar e = TestEnum.test1(1, 2, 3)\\ne = .test2(4, 5)\\ne = .test3(6) \\ne = .test4(true)\\ne = .test5\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 32，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 25，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n\`\`\`\\n\\n\*\*案例4:\*\*\\n\`\`\`swift \\n\\u002F\\u002F注意！！！！   枚举选项只有一个,所以实际用到的内存空间 为0，但是要存储一个成员值 所以对其参数为1，给其分配一个字节\\nenum TestEnum { \\n case test\\n} \\nvar t = TestEnum.test\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 1，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 0，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 1，对齐参数\\n\`\`\`\\n\*\*案例5:\*\*\\n\`\`\`swift\\nenum TestEnum { \\n case test(Int)\\n} \\nvar t = TestEnum.test(10)\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 8，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 8，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n\`\`\`\\n\\n\*\*案例6:\*\*\\n\`\`\`swift\\nenum TestEnum { \\n case test(Int)\\n} \\nvar t = TestEnum.test(10)\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 8，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 8，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n\`\`\`\\n\\n\*\*案例7:\*\*\\n\`\`\`swift\\nenum TestEnum { \\n case test0 \\n case test1 \\n case test2 \\n case test4(Int) \\n case test5(Int, Int)\\n case test6(Int, Int, Int, Bool)\\n} \\nvar t = TestEnum.test(10)\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 32，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 25，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n\`\`\`\\n\\n\*\*案例8:\*\*\\n\`\`\`swift\\nenum TestEnum { \\n case test0 \\n case test1 \\n case test2 \\n case test4(Int) \\n case test5(Int, Int)\\n case test6(Int, Int, Bool, Int)\\n} \\nvar t = TestEnum.test(10)\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 32，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 32，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n\`\`\`\\n \\n \\n \\n\*\*案例9:\*\*\\n\`\`\`swift\\nenum TestEnum { \\n case test0 \\n case test1 \\n case test2 \\n case test4(Int) \\n case test5(Int, Int)\\n case test6(Int, Bool, Int)\\n} \\nvar t = TestEnum.test(10)\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F32，分配占用的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F25，实际用到的空间大小\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F8，对齐参数\\n\`\`\`\\n \\n \\n\\n## 7. 枚举变量的内存布局\\n\\n我们知道通过\`MemoryLayout\`可以获取到枚举占用内存的大小，那枚举变量分别占用多少内存呢？\\n\\n要想知道枚举变量的大小，我们需要通过查看枚举变量的内存布局来进行分析\\n\\n\\u003E \*\*枚举变量的分析准备\*\*\\n\\n我们可以通过\`Xcode\`里的\`View Memory\`选项来查看详细的内存布局\\n\\n1. 可以在运行程序时，通过控制台打印的枚举变量右键选择\`View Memory of \*\`进入到内存布局的页面\\n !\[-w440\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5735d2c4062b49689021b7ffda252428~tplv-k3u1fbpfcp-zoom-1.image)\\n2. 还可以从\`Xcode\`标题栏中选择\`Debug -\\u003E Debug Workflow -\\u003E View Memory\`进入到内存布局的页面\\n !\[-w569\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff74e3c087f614a4290c7dfb272c1c0fb~tplv-k3u1fbpfcp-zoom-1.image)\\n3. 进入到该页面，然后通过输入变量的内存地址来查看\\n !\[-w1129\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F818945a0d9f742fa9adacb4be5803ea3~tplv-k3u1fbpfcp-zoom-1.image)\\n4. 我们可以下载一个小工具来获取到变量的内存地址\\\\\\n 下载地址：\[github.com\\u002FCoderMJLee\\u002FMems\](https:\\u002F\\u002Fgithub.com\\u002FCoderMJLee\\u002FMems)\\n5. 然后将下载好的这个文件\`Mems.swift\`拖到自己的\`Xcode\`中\\n调用这个函数就可以了\\n\`\`\`swift\\nprint(Mems.ptr(ofVal: &t))\\n\`\`\`\\n\\n\*\*我们来分析下面的枚举变量的情况\*\*\\n\`\`\`swift\\nenum TestEnum {\\n case test1, test2, test3\\n}\\n\\nvar t = TestEnum.test1\\nprint(Mems.ptr(ofVal: &t))\\n\\nt = TestEnum.test2\\nt = TestEnum.test3\\n\\nprint(MemoryLayout\\u003CTestEnum\\u003E.stride) \\u002F\\u002F 1\\nprint(MemoryLayout\\u003CTestEnum\\u003E.size) \\u002F\\u002F 1\\nprint(MemoryLayout\\u003CTestEnum\\u003E.alignment) \\u002F\\u002F 1\\n\`\`\`\\n\\n分别将断点打在给\`枚举变量t\`赋值的三句代码上，然后运行程序观察每次断点之后的内存布局有什么变化\\n\\n!\[-w1127\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fb3707ff07b0142e68f0e0471423f4ffc~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n!\[-w1124\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe44ad20c1e9d4b6eb27ed0706ea5a625~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n!\[-w1124\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Faaa99ae5371e49e4a708ba9b6431a077~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过上图可以看到，每个枚举变量都分配了一个字节的大小，并且存储的值分别是0、1、2，我们可以知道这一个字节的大小就是用来存储\`枚举成员值\`的\\n\\n\*\*我们再来分析一个枚举变量的情况\*\*\\n\\n\`\`\`swift\\nenum TestEnum: Int {\\n case test1 = 1, test2 = 2, test3 = 3\\n}\\n\\nvar t = TestEnum.test1\\nprint(Mems.ptr(ofVal: &t))\\n\\nt = TestEnum.test2\\nt = TestEnum.test3\\n\\nprint(MemoryLayout\\u003CTestEnum\\u003E.stride) \\u002F\\u002F 1\\nprint(MemoryLayout\\u003CTestEnum\\u003E.size) \\u002F\\u002F 1\\nprint(MemoryLayout\\u003CTestEnum\\u003E.alignment) \\u002F\\u002F 1\\n\`\`\`\\n\\n!\[-w1131\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff8b07ec91b874385b845918724871429~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n!\[-w1126\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa5ae262e720a4c3292957b0115e8dd6f~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n!\[-w1125\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F74a579894f614963a3781c23a51e7974~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过上图可以看到，每个枚举变量存储的值也是0、1、2，并且分配了一个字节的大小\\n\\n可以证明枚举变量的内存大小和原始值类型无关，而且枚举变量里存储的值和原始值也无关\\n\\n\*\*我们再来分析一个枚举变量的情况\*\*\\n\\n\`\`\`swift\\nenum TestEnum {\\n case test1(Int, Int, Int) \\u002F\\u002F 24\\n case test2(Int, Int) \\u002F\\u002F 16\\n case test3(Int) \\u002F\\u002F 8\\n case test4(Bool) \\u002F\\u002F 1\\n case test5 \\u002F\\u002F 1\\n}\\n\\nvar t = TestEnum.test1(1, 2, 3)\\nprint(Mems.ptr(ofVal: &t))\\n\\nt = TestEnum.test2(4, 5)\\nt = TestEnum.test3(6)\\nt = TestEnum.test4(true)\\nt = TestEnum.test5\\n\\nMemoryLayout\\u003CTestEnum\\u003E.size \\u002F\\u002F 25\\nMemoryLayout\\u003CTestEnum\\u003E.stride \\u002F\\u002F 32\\nMemoryLayout\\u003CTestEnum\\u003E.alignment \\u002F\\u002F 8\\n\`\`\`\\n\\n我们先通过打印了解到枚举类型总共分配了\`32个字节\`，然后我们通过断点分别来观察枚举变量的内存布局\\n\\n!\[-w773\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F3ddde575d93346e6b93197ab125ff3ef~tplv-k3u1fbpfcp-zoom-1.image) !\[-w1124\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F27bda96fd6df42699bb75099bf79d174~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n执行完第一句我们可以看到，前面24个字节分别用来存储关联值1、2、3，第25个字节用来存储成员值0，之所以分配32个字节是因为内存对齐的原因\\n\\n\`\`\`swift\\n\\u002F\\u002F 调整排版后的内存布局如下所示\\n01 00 00 00 00 00 00 00\\n02 00 00 00 00 00 00 00\\n03 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n\`\`\`\\n\\n!\[-w719\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F666710ea86264b0ca18d84c9f0100b29~tplv-k3u1fbpfcp-zoom-1.image) !\[-w1193\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7a641539783c44769d07ef161b6391d2~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n执行完第二句我们可以看到，前面16个字节分半用来存储关联值4、5，然后第25个字节用来存储成员值1\\n\\n\`\`\`swift\\n\\u002F\\u002F 调整排版后的内存布局如下所示\\n04 00 00 00 00 00 00 00\\n05 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n01 00 00 00 00 00 00 00\\n\`\`\`\\n\\n!\[-w563\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F4ffec0c54ef14fbca354e62552e34d0f~tplv-k3u1fbpfcp-zoom-1.image) !\[-w1196\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F4289e9afdf1346108ace6a521d34736b~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n执行完第三句我们可以看到，前面8个字节分半用来存储关联值6，然后第25个字节用来存储成员值2\\n\\n\`\`\`swift\\n\\u002F\\u002F 调整排版后的内存布局如下所示\\n06 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n02 00 00 00 00 00 00 00\\n\`\`\`\\n\\n!\[-w665\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fdab2856fa3a54d95b304759492b0118c~tplv-k3u1fbpfcp-zoom-1.image) !\[-w1192\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fff4710127fa346a39c3400dad0b0e575~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n执行完第四句我们可以看到，由于是Bool类型，那么只用了第一个字节来存储关联值1，然后第25个字节用来存储成员值3\\n\\n\`\`\`swift\\n\\u002F\\u002F 调整排版后的内存布局如下所示\\n01 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n03 00 00 00 00 00 00 00\\n\`\`\`\\n\\n!\[-w676\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff1e11f59919e4b6c8bc4331127debff1~tplv-k3u1fbpfcp-zoom-1.image) \\n!\[-w1191\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F2227a5c5afbe423ebed7698a7a15be28~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n执行完最后一句我们可以看到，由于没有关联值，那么只用了第25个字节存储成员值4\\n\\n\`\`\`swift\\n\\u002F\\u002F 调整排版后的内存布局如下所示\\n00 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n00 00 00 00 00 00 00 00\\n04 00 00 00 00 00 00 00\\n\`\`\`\\n\\n\*\*总结：内存分配情况：一个字节存储成员值，n个字节存储关联值（n取占用内存最大的关联值），任何一个case的关联值都共有这n个字节\*\*\\n\\n我们再来看几个情况\\n\\n\`\`\`swift\\nenum TestEnum {\\n case test\\n}\\n\\nMemoryLayout\\u003CSession\\u003E.stride \\u002F\\u002F 1，分配占用的空间大小\\nMemoryLayout\\u003CSession\\u003E.size \\u002F\\u002F 0，实际用到的空间大小\\nMemoryLayout\\u003CSession\\u003E.alignment \\u002F\\u002F 1，对齐参数\\n\`\`\`\\n\\n如果枚举里只有一个\`case\`，那么实际用到的空间为0，都不用特别分配内存来进行存储\\n\\n\`\`\`swift\\nenum TestEnum {\\n case test(Int)\\n}\\n\\nMemoryLayout\\u003CSession\\u003E.stride \\u002F\\u002F 8，分配占用的空间大小\\nMemoryLayout\\u003CSession\\u003E.size \\u002F\\u002F 8，实际用到的空间大小\\nMemoryLayout\\u003CSession\\u003E.alignment \\u002F\\u002F 8，对齐参数\\n\`\`\`\\n\\n可以看到分配的内存大小就是关联值类型决定的，因为只有一个\`case\`，所以都不需要再额外分配内存来存储是哪个\`case\`了\\n \\n# 六、值类型和引用类型\\n## 1. 值类型\\n- 值类型赋值给\`var、let或者给函数\`传参，是直接将所有内容\`拷贝一份\`\\n- 类似于对文件进行\`copy、paste\`操作，产生了全新的文件副本，\*\*属于深拷贝（deep copy）\*\*\\n\\n值类型进行拷贝的内存布局如下所示\\n\`\`\`swift\\nstruct Point {\\n var x: Int = 3\\n var y: Int = 4\\n}\\n\\nfunc test() {\\n var p1 = Point(x: 10, y: 20)\\n var p2 = p1\\n\\n p2.x = 4\\n p2.y = 5\\n\\n print(p1.x, p1.y)\\n}\\n\\ntest()\\n\`\`\`\\n!\[-w536\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7980c7fea817418aacefb9d17bcf5dba~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n\*\*我们通过反汇编来进行分析\*\*\\n\\n!\[-w712\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F92f3f7c5f9484dc9933d89ee94a26c59~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w947\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F602bd28e6ec6486c9096ab346f49e45e~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w713\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F9e673c56b74b4d768ebb91a504013d50~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w1048\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F238779d785e24cc48720c582d965b587~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过上述分析可以发现，值类型的赋值内部会先将p1的成员值保存起来，再给p2进行赋值，所以不会影响到p1\\n\\n## 2. 值类型的赋值操作\\n- 在Swift标准库中，为了提升性能，\`Array、String、Dictionary、Set\`采用了\`Copy On Write\`的技术\\n- 如果\`只是将赋值操作\`，那么只会进行\`浅拷贝\`，两个变量使用的还是同一块存储空间\\n- 只有当\`进行了”写“的操作\`时，\`才会进行深拷贝\`操作\\n- 对于标准库值类型的赋值操作，Swift能确保最佳性能，所以没必要为了保证最佳性能来避免赋值\\n- 建议：\*\*不需要修改值的，尽量定义成\`let\`\*\*\\n\`\`\`swift\\nvar s1 = \\"Jack\\"\\nvar s2 = s1\\ns2.append(\\"\_Rose\\")\\n\\nprint(s1) \\u002F\\u002F Jack\\nprint(s2) \\u002F\\u002F Jack\_Rose\\n\`\`\`\\n\\n\`\`\`swift\\nvar a1 = \[1, 2, 3\]\\nvar a2 = a1\\na2.append(4)\\na1\[0\] = 2\\n\\nprint(a1) \\u002F\\u002F \[2, 2, 3\]\\nprint(a2) \\u002F\\u002F \[1, 2, 3, 4\]\\n\`\`\`\\n\\n\`\`\`swift\\nvar d1 = \[\\"max\\" : 10, \\"min\\" : 2\]\\nvar d2 = d1\\nd1\[\\"other\\"\] = 7\\nd2\[\\"max\\"\] = 12\\n\\nprint(d1) \\u002F\\u002F \[\\"other\\" : 7, \\"max\\" : 10, \\"min\\" : 2\]\\nprint(d2) \\u002F\\u002F \[\\"max\\" : 12, \\"min\\" : 2\]\\n\`\`\` \\n\\n\*\*我们再看下面这段代码\*\*\\\\\\n对于p1来说，再次赋值也只是覆盖了成员\`x、y\`的值而已，都是同一个结构体变量\\n\`\`\`swift\\nstruct Point {\\n var x: Int\\n var y: Int\\n}\\nvar p1 = Point(x: 10, y: 20)\\np1 = Point(x: 11, y: 22)\\n\`\`\` \\n\\n \\n\*\*用let定义的赋值操作\*\*\\n- 如果用\`let\`定义的常量赋值结构体类型会报错，并且修改结构体里的成员值也会报错\\n- 用\`let\`定义就意味着常量里存储的值不可更改，而结构体是由x和y这16个字节组成的，所以更改x和y就意味着结构体的值要被覆盖，所以报错\\n\\n!\[-w645\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F02bc9cd358654834ae915998e2e45480~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 3. 引用类型\\n- 引用赋值给\`var、let或者给函数\`传参，是将\`内存地址拷贝一份\`\\n- 类似于制作一个文件的替身（快捷方式、链接），指向的是同一个文件，属于 \*\*\`浅拷贝（shallow copy）\`\*\* \\n \`\`\`swift\\n class Size {\\n var width = 0\\n var height = 0\\n\\n init(width: Int, height: Int) {\\n self.width = width\\n self.height = height\\n }\\n }\\n\\n func test() {\\n var s1 = Size(width: 10, height: 20)\\n var s2 = s1\\n\\n s2.width = 11\\n s2.height = 22\\n\\n print(s1.height, s1.width)\\n }\\n\\n test() \\n \`\`\`\\n由于s1和s2都指向的同一块存储空间，所以s2修改了成员变量，s1再调用成员变量也已经是改变后的了\\n!\[-w1124\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F3356c841c72c4fac841aa1dbf256f8cf~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n\\u003E \*\*我们通过反汇编来进行分析\*\*\\n!\[-w1049\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fb45ca53a5f0d46eb8eb3a28d3621a036~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w1052\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F945d409630314dbcad7255cb126579f1~tplv-k3u1fbpfcp-zoom-1.image)\\n!\[-w1052\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5d1e1886aa3e48c590dcf63cf5882594~tplv-k3u1fbpfcp-zoom-1.image)\\n- 堆空间分配完内存之后，我们拿到\`rax\`的值查看内存布局\\n- 发现\`rax\`里和对象的结构一样，证明\`rax\`里存储的就是对象的地址\\n !\[-w1051\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F704284210812484c9c6486811ee37673~tplv-k3u1fbpfcp-zoom-1.image) \\n !\[-w1187\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5e9317bf166a4951a7755e6c8919506c~tplv-k3u1fbpfcp-zoom-1.image)\\n- 将新的值11和22分别覆盖掉堆空间对象的成员值 \\n !\[-w1223\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F02b760674c0b45d38d11a9a86e1e8c40~tplv-k3u1fbpfcp-zoom-1.image)\\n !\[-w1224\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F0643e6cb5cec4763aef3a0fa65a57c04~tplv-k3u1fbpfcp-zoom-1.image)\\n !\[-w1220\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Faf6b9af0b43c4511887caf319cde7327~tplv-k3u1fbpfcp-zoom-1.image) \\n !\[-w1225\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F31c388e409914d1f8e4e2a526833b208~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n通过上面的分析可以发现，修改的成员值都是改的同一个地址的对象，所以修改了p2的成员值，会影响到p1\\n## 4. 对象的堆空间申请过程\\n- \*\*在Swift中，创建类的实例对象，要向堆空间申请内存，大概流程如下\*\* \\n - \`Class.\_\_allocating\_init()\` \\n - libswiftCore.dylib:\`\_swift\_allocObject\_\` \\n - libswiftCore.dylib:\`swift\_slowAlloc\` \\n - libsystem\_malloc.dylib:\`malloc\` \\n- 在Mac、iOS中的\`malloc\`函数分配的内存大小总是16的倍数 \\n- 通过\`class\_getInstanceSize\`可以得知：类的对象至少需要占用多少内存 \\n \`\`\`swift\\n class Point{\\n var x = 11\\n var test = true\\n var y = 22\\n } \\n var p = Point() \\n class\_getInstanceSize(type(of: p)) \\u002F\\u002F 40 \\n class\_getInstanceSize(Point.self) \\u002F\\u002F 40\\n \`\`\`\\n\\n## 5. 引用类型的赋值操作\\n- 1. 将引用类型初始化对象赋值给同一个指针变量，指针变量会指向另一块存储空间\\n \`\`\`swift\\n class Size {\\n var width: Int\\n var height: Int\\n\\n init(width: Int, height: Int) {\\n self.width = width\\n self.height = height\\n }\\n }\\n\\n var s1 = Size(width: 10, height: 20)\\n s1 = Size(width: 11, height: 22)\\n \`\`\`\\n\\u003E \*\*用let定义的赋值操作\*\*\\n- 2. 如果用\`let\`定义的常量赋值引用类型会报错，因为会改变指针常量里存储的8个字节的地址值\\n- 3. 但修改类里的属性值不会报错，因为修改属性值并不是修改的指针常量的内存，只是通过指针常量找到类所存储的堆空间的内存地址去修改类的属性\\n !\[-w643\](https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F83dccdb5d2be4945807070fcac919b0c~tplv-k3u1fbpfcp-zoom-1.image)\\n\\n## 6. 嵌套类型\\n\`\`\`swift\\nstruct Poker {\\n enum Suit: Character {\\n case spades = \\"♠️\\",\\n hearts = \\"♥️\\",\\n diamonds = \\"♦️\\",\\n clubs = \\"♣️\\"\\n }\\n \\n enum Rank: Int {\\n case two = 2, three, four, five, six, seven, eight, nine, ten\\n case jack, queen, king, ace\\n }\\n}\\n\\nprint(Poker.Suit.hearts.rawValue)\\n\\nvar suit = Poker.Suit.spades\\nsuit = .diamonds\\n\\nvar rank = Poker.Rank.five\\nrank = .king \\n\`\`\`\\n\\n## 7. 枚举、结构体、类都可以定义方法\\n- 1. 一般把定义在枚举、结构体、类内部的函数，叫做方法 \\n \`\`\`swift\\n struct Point {\\n var x: Int = 10\\n var y: Int = 10\\n\\n func show() {\\n print(\\"show\\")\\n }\\n }\\n\\n let p = Point()\\n p.show()\\n\\n \`\`\`\\n\\n \`\`\`swift\\n class Size {\\n var width: Int = 10\\n var height: Int = 10\\n\\n func show() {\\n print(\\"show\\")\\n }\\n }\\n\\n let s = Size()\\n s.show()\\n\\n \`\`\`\\n\\n \`\`\`swift\\n enum PokerFace: Character {\\n case spades = \\"♠️\\",\\n hearts = \\"♥️\\",\\n diamonds = \\"♦️\\",\\n clubs = \\"♣️\\"\\n\\n func show() {\\n print(\\"show\\")\\n }\\n }\\n\\n let pf = PokerFace.hearts\\n pf.show()\\n\\n \`\`\` \\n- 2. 方法不管放在哪里，其内存都是放在代码段中\\n- 3. 枚举、结构体、类里的方法其实会有隐式参数 \\n \`\`\`swift\\n class Size {\\n var width: Int = 10\\n var height: Int = 10\\n\\n \\u002F\\u002F 默认会有隐式参数，该参数类型为当前枚举、结构体、类\\n func show(self: Size) {\\n print(self.width, self.height)\\n }\\n }\\n \`\`\`\\n\\n# 专题系列文章\\n## 1. 前知识\\n- \*\*\[01-探究iOS底层原理|综述\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7089043618803122183\\u002F)\*\*\\n- \*\*\[02-探究iOS底层原理|编译器LLVM项目【Clang、SwiftC、优化器、LLVM】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7093842449998561316\\u002F)\*\*\\n- \*\*\[03-探究iOS底层原理|LLDB\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7095079758844674056)\*\*\\n- \*\*\[04-探究iOS底层原理|ARM64汇编\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115302848270696485\\u002F)\*\*\\n## 2. 基于OC语言探索iOS底层原理\\n- \*\*\[05-探究iOS底层原理|OC的本质\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7094409219361193997\\u002F)\*\*\\n- \*\*\[06-探究iOS底层原理|OC对象的本质\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7094503681684406302)\*\*\\n- \*\*\[07-探究iOS底层原理|几种OC对象【实例对象、类对象、元类】、对象的isa指针、superclass、对象的方法调用、Class的底层本质\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7096087582370431012)\*\* \\n- \*\*\[08-探究iOS底层原理|Category底层结构、App启动时Class与Category装载过程、load 和 initialize 执行、关联对象\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7096480684847415303)\*\* \\n- \*\*\[09-探究iOS底层原理|KVO\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115318628563550244\\u002F)\*\* \\n- \*\*\[10-探究iOS底层原理|KVC\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115320523805949960\\u002F)\*\* \\n- \*\*\[11-探究iOS底层原理|探索Block的本质|【Block的数据类型(本质)与内存布局、变量捕获、Block的种类、内存管理、Block的修饰符、循环引用】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115809219319693320\\u002F)\*\*\\n- \*\*\[12-探究iOS底层原理|Runtime1【isa详解、class的结构、方法缓存cache\_t】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116103432095662111)\*\* \\n- \*\*\[13-探究iOS底层原理|Runtime2【消息处理(发送、转发)&&动态方法解析、super的本质】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116147057739431950)\*\*\\n- \*\*\[14-探究iOS底层原理|Runtime3【Runtime的相关应用】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116291178365976590\\u002F)\*\*\\n- \*\*\[15-探究iOS底层原理|RunLoop【两种RunloopMode、RunLoopMode中的Source0、Source1、Timer、Observer】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116515606597206030\\u002F)\*\* \\n- \*\*\[16-探究iOS底层原理|RunLoop的应用\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116521653667889165\\u002F)\*\* \\n- \*\*\[17-探究iOS底层原理|多线程技术的底层原理【GCD源码分析1:主队列、串行队列&&并行队列、全局并发队列】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116821775127674916\\u002F)\*\* \\n- \*\*\[18-探究iOS底层原理|多线程技术【GCD源码分析1:dispatch\_get\_global\_queue与dispatch\_(a)sync、单例、线程死锁】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116878578091819045)\*\* \\n- \*\*\[19-探究iOS底层原理|多线程技术【GCD源码分析2:栅栏函数dispatch\_barrier\_(a)sync、信号量dispatch\_semaphore】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116897833126625316)\*\* \\n- \*\*\[20-探究iOS底层原理|多线程技术【GCD源码分析3:线程调度组dispatch\_group、事件源dispatch Source】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116898446358888485\\u002F)\*\* \\n- \*\*\[21-探究iOS底层原理|多线程技术【线程锁：自旋锁、互斥锁、递归锁】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116898868737867789\\u002F)\*\* \\n- \*\*\[22-探究iOS底层原理|多线程技术【原子锁atomic、gcd Timer、NSTimer、CADisplayLink】\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116907029465137165)\*\*\\n- \*\*\[23-探究iOS底层原理|内存管理【Mach-O文件、Tagged Pointer、对象的内存管理、copy、引用计数、weak指针、autorelease\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7117274106940096520)\*\* \\n\\n## 3. 基于Swift语言探索iOS底层原理 \\n关于\`函数\`、\`枚举\`、\`可选项\`、\`结构体\`、\`类\`、\`闭包\`、\`属性\`、\`方法\`、\`swift多态原理\`、\`String\`、\`Array\`、\`Dictionary\`、\`引用计数\`、\`MetaData\`等Swift基本语法和相关的底层原理文章有如下几篇:\\n- \*\*\[01-📝Swift5常用核心语法|了解Swift【Swift简介、Swift的版本、Swift编译原理】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119020967430455327)\*\*\\n- \*\*\[02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119510159109390343)\*\*\\n- \*\*\[03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119513630550261774)\*\*\\n- \*\*\[04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119714488181325860)\*\*\\n- \*\*\[05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119722433589805064)\*\*\\n- \*\*\[06-📝Swift5常用核心语法|编程范式与Swift源码【从OC到Swift、函数式编程、面向协议编程、响应式编程、Swift源码分析】\](https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7253350009289424933)\*\*\\n\\n# 其它底层原理专题\\n## 1. 底层原理相关专题 \\n- \*\*\[01-计算机原理|计算机图形渲染原理这篇文章\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7018755998823219213)\*\*\\n- \*\*\[02-计算机原理|移动终端屏幕成像与卡顿 \](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019117942377807908)\*\*\\n \\n## 2. iOS相关专题\\n- \*\*\[01-iOS底层原理|iOS的各个渲染框架以及iOS图层渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019193784806146079)\*\* \\n- \*\*\[02-iOS底层原理|iOS动画渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019200157119938590)\*\*\\n- \*\*\[03-iOS底层原理|iOS OffScreen Rendering 离屏渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019497906650497061\\u002F)\*\*\\n- \*\*\[04-iOS底层原理|因CPU、GPU资源消耗导致卡顿的原因和解决方案\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7020613901033144351)\*\*\\n\\n## 3. webApp相关专题\\n- \*\*\[01-Web和类RN大前端的渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021035020445810718\\u002F)\*\*\\n## 4. 跨平台开发方案相关专题 \\n- \*\*\[01-Flutter页面渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021057396147486750\\u002F)\*\*\\n\\n## 5. 阶段性总结:Native、WebApp、跨平台开发三种方案性能比较\\n- \*\*\[01-Native、WebApp、跨平台开发三种方案性能比较\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021071990723182606\\u002F)\*\*\\n## 6. Android、HarmonyOS页面渲染专题\\n- \*\*\[01-Android页面渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021840737431978020\\u002F)\*\* \\n- \*\*\[02-HarmonyOS页面渲染原理\](#) (\`待输出\`)\*\*\\n## 7. 小程序页面渲染专题\\n- \*\*\[01-小程序框架渲染原理\](https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021414123346853919)\*\* ",display\_count:b,is\_markdown:g,app\_html\_content:e,version:x},author\_user\_info:{user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"前Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",level:z,description:"【移动大前端】iOS、Android、Harmony、MobileH5、Hybrid、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:h,follower\_count:626,post\_article\_count:117,digg\_article\_count:b,got\_digg\_count:764,got\_view\_count:140976,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:A,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:1574156381196600,jpower:A,jscore:681.3,jpower\_level:z,jscore\_level:5,jscore\_title:"先锋掘友",author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:2000,jscore\_this\_level\_mini\_score:500},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1688831350,id\_type:9,tag\_alias:e,post\_article\_count:34950,concern\_user\_count:194345,title:"iOS",tagId:"6809640399544516616",articleCount:34950,subscribersCount:194345,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640463633481741",tag\_id:"6809640463633481741",tag\_name:"Swift",color:"#F44C29",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002Feb7ab66be4c2898b5aa9.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1436421185,mtime:1688831350,id\_type:9,tag\_alias:e,post\_article\_count:8088,concern\_user\_count:73640,title:"Swift",tagId:"6809640463633481741",articleCount:8088,subscribersCount:73640,createdAt:c,updatedAt:c}\],user\_interact:{id:7119513630550262000,omitempty:w,user\_id:b,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"202307090021336FD3C99F933C087BF603",status:{push\_status:b},title:s,user:B,viewCount:k,commentsCount:b,isEvent:k,abstract:t,latestCommentAt:c,createdAt:new Date(1657640945000),updatedAt:c,isTopicEvent:a,likedCount:g,likeCount:g,content:e,originalUrl:e,type:"post",collected:a,viewsCount:v,username:y,viewerHasLiked:a,draftId:u,collectionCount:g,theme\_list:\[\]},entryView:{},author:B,adEntryList:\[\],relatedEntryList:\[\],linkVotingList:\[{keyword:"抖音聊天",url:"https:\\u002F\\u002Fwww.douyin.com\\u002Fdownloadpage\\u002Fchat",type:"抖音"}\],userAnnuals:\[\],columnList:\[\],resultHtml:"\\u003Cstyle\\u003E.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre\\u003Ecode{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\\"\\"}.markdown-body blockquote\\u003Ep{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}\\u003C\\u002Fstyle\\u003E\\u003Cstyle data-highlight data-highlight-key=\\"juejin\\"\\u003E.markdown-body pre,.markdown-body pre\\u003Ecode.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built\_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}\\u003C\\u002Fstyle\\u003E\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F0cae050c9bb44501bc36ce4f06ca650d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\\" alt=\\"image.png\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Ch1 data-id=\\"heading-0\\"\\u003E一、概述\\u003C\\u002Fh1\\u003E\\n\\u003Cp\\u003E本系列文章旨在复习\\u003Ccode\\u003ESwift5\\u003C\\u002Fcode\\u003E核心语法且适当进行底层原理探索,属于阶段性复习和巩固,以供日后进一步探索\\u003Ccode\\u003ESwift\\u003C\\u002Fcode\\u003E语言的底层原理做铺垫。\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E整个系列文章如下，每一文章知识点独立成篇,欢迎各位按需或按兴趣点击阅读:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119020967430455327\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119020967430455327\\"\\u003E01-📝Swift5常用核心语法|了解Swift【Swift简介、Swift的版本、Swift编译原理】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119510159109390343\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119510159109390343\\"\\u003E02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119513630550261774\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119513630550261774\\"\\u003E03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119714488181325860\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119714488181325860\\"\\u003E04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119722433589805064\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119722433589805064\\"\\u003E05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7253350009289424933\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7253350009289424933\\"\\u003E06-📝Swift5常用核心语法|编程范式与Swift源码【从OC到Swift、函数式编程、面向协议编程、响应式编程、Swift源码分析】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch1 data-id=\\"heading-1\\"\\u003E二、 闭包\\u003C\\u002Fh1\\u003E\\n\\u003Ch2 data-id=\\"heading-2\\"\\u003E1. 闭包表达式（Closure Expression）\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E在Swift中，可以通过\\u003Ccode\\u003Efunc\\u003C\\u002Fcode\\u003E定义一个函数，也可以通过\\u003Ccode\\u003E闭包表达式\\u003C\\u002Fcode\\u003E定义一个函数\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E闭包表达式格式如下:\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E{\\n (参数列表) -\\u003E 返回值类型 \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n 函数体代码\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E {\\n (v1: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n}\\nfn(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)\\n\\n{\\n (v1: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n}(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"3\\"\\u003E\\n\\u003Cli\\u003E闭包表达式的简写如下:\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003Ecase1\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E {\\n (v1: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn: (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E }\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003Ecase2\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eexec\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Efn\\u003C\\u002Fspan\\u003E: (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(v1, v2))\\n}\\n\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E) {\\n (v1, v2) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n}\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E, fn: {\\n (v1, v2) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n})\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E, fn: {\\n (v1, v2) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n})\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E, fn: {\\n v1, v2 \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n})\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E, fn: {\\n v1, v2 \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2\\n})\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E, fn: { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E })\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E, fn: \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-3\\"\\u003E2. 尾随闭包\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E如果将一个\\u003Cstrong\\u003E很长的闭包表达式\\u003C\\u002Fstrong\\u003E作为\\u003Ccode\\u003E函数的最后一个实参\\u003C\\u002Fcode\\u003E，使用尾随闭包可以增强函数的可读性\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E尾随闭包是一个被书写在函数调用括号外面（后面）的闭包表达式\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eexec\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Efn\\u003C\\u002Fspan\\u003E: (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(v1, v2))\\n}\\n\\nexec(v1: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, v2: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"3\\"\\u003E\\n\\u003Cli\\u003E如果闭包表达式是函数的唯一实参，而且使用了尾随闭包的语法，那就不需要在函数名后边写圆括号\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eexec\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Efn\\u003C\\u002Fspan\\u003E: (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E))\\n}\\n\\nexec(fn: { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E })\\nexec() { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E }\\nexec { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E }\\nexec { \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E }\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003ESwift中的\\u003Ccode\\u003Esort函数\\u003C\\u002Fcode\\u003E用来排序的，使用的就是闭包的写法\\u003C\\u002Fstrong\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5f9ca96482e64b23a2070103d27e0864~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w449\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fc14249c8cbee44eabecb4d75ac969fbc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w597\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E nums \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \[\\u003Cspan class=\\"hljs-number\\"\\u003E11\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E18\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E68\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E45\\u003C\\u002Fspan\\u003E\]\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F1.\\u003C\\u002Fspan\\u003E\\nnums.sort()\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F2.\\u003C\\u002Fspan\\u003E\\nnums.sort { (i1, i2) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E\\n i1 \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E i2\\n}\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F3.\\u003C\\u002Fspan\\u003E\\nnums.sort(by: { (i1, i2) \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E i1 \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E i2 })\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F4.\\u003C\\u002Fspan\\u003E\\nnums.sort(by: { (i1, i2) \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E i1 \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E i2 })\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F5.\\u003C\\u002Fspan\\u003E\\nnums.sort(by: { (i1, i2) \\u003Cspan class=\\"hljs-keyword\\"\\u003Ein\\u003C\\u002Fspan\\u003E i1 \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E i2 })\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F6.\\u003C\\u002Fspan\\u003E\\nnums.sort(by: { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E })\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F7.\\u003C\\u002Fspan\\u003E\\nnums.sort(by: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E)\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F8.\\u003C\\u002Fspan\\u003E\\nnums.sort() { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E }\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F9.\\u003C\\u002Fspan\\u003E\\nnums.sort { \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$1\\u003C\\u002Fspan\\u003E }\\n \\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F10.\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(nums) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F \[2, 5, 6, 11, 18, 45, 68\]\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch2 data-id=\\"heading-4\\"\\u003E3. 闭包的定义（Closure）\\u003C\\u002Fh2\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E严谨的定义是:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E一个函数和它所捕获的\\u003Ccode\\u003E变量\\u002F常量\\u003C\\u002Fcode\\u003E环境组合起来，称为闭包\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E一般指定义在函数内部的函数\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E一般它捕获的是外层函数的局部变量\\\\常量\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E全局变量,全局都可以访问,内存只有一份,且只要程序不停止运行,其内存就不会回收\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Etypealias\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFn\\u003C\\u002Fspan\\u003E() -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n num \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num\\n }\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E plus\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFn\\u003C\\u002Fspan\\u003E() -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E {\\n num \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-variable\\"\\u003E$0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num\\n }\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFn()\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFn() \\n \\n fn1(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n fn2(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 2\\u003C\\u002Fspan\\u003E\\n fn1(\\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 4 \\u003C\\u002Fspan\\u003E\\n fn2(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 6\\u003C\\u002Fspan\\u003E\\n fn1(\\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 9 \\u003C\\u002Fspan\\u003E\\n fn2(\\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 12\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E通过汇编分析闭包的实现\\u003C\\u002Fstrong\\u003E\\n看下面示例代码，分别打印为多少\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFn\\u003C\\u002Fspan\\u003E() -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n num \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num\\n }\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E plus\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFn()\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 3\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 6\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 10\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E我们通过反汇编来观察:\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fd6738fd229b74dda8a490a4af0749cb6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1012\\" loading=\\"lazy\\"\\u003E\\n通过这句调用可以看出:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E在\\u003Ccode\\u003Ereturn plus\\u003C\\u002Fcode\\u003E之前，闭包(表层通过\\u003Ccode\\u003EallicObject\\u003C\\u002Fcode\\u003E)底层会调用\\u003Ccode\\u003Emalloc函数\\u003C\\u002Fcode\\u003E进行堆内存的分配，也就是将拷贝num的值到堆上来持有不被释放\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E而栈里的num由于\\u003Ccode\\u003EgetFn\\u003C\\u002Fcode\\u003E调用完毕就随着栈释放了，\\u003Ccode\\u003Eplus函数\\u003C\\u002Fcode\\u003E里操作的都是堆上的num\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E调用\\u003Ccode\\u003Emalloc函数\\u003C\\u002Fcode\\u003E之前需要告诉系统要分配多少内存，需要24个字节来存储内存\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E(因为在iOS系统中,分配堆内存的底层算法有内存对齐的概念，内存对齐的参数是16)而通过\\u003Ccode\\u003Emalloc函数\\u003C\\u002Fcode\\u003E分配的内存都是大于或等于其本身数据结构所需内存的16的最小倍数，所以会分配32个字节内存\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F46c0949ee2ef49bda6a3dd1e72f8c0f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1014\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F97ddb3df35cc4d7bb056ede40594e683~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w596\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们打印\\u003Ccode\\u003Erax寄存器\\u003C\\u002Fcode\\u003E的值可以知道:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E系统分配的32个字节，前16个字节用来存储其他信息\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E而且从图上的圈起来的地方也可以看到，将0移动16个字节\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E所以16个字节之后的8个字节才用来存储num的值\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F9dcceef7db894af68271c5622ac1db14~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w532\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E调用\\u003Ccode\\u003Efn(1)\\u003C\\u002Fcode\\u003E，将断点打在这里，然后查看反汇编指令\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F2b0e109bf5ef45089e0d082fd181a8ed~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1009\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe3b2bc9e7751486e9241c76521fcb8bd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w575\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E然后调用到\\u003Ccode\\u003Eplus函数\\u003C\\u002Fcode\\u003E内部，再次打印\\u003Ccode\\u003Erax寄存器\\u003C\\u002Fcode\\u003E的值，发现num的值已经变为1了\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe5341d04835242f9acb064f3c5c99601~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w575\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E然后继续往下执行调用\\u003Ccode\\u003Efn(2)\\u003C\\u002Fcode\\u003E，发现num的值已经变为3了\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F369ab4213cdf41908e77b2c703499416~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w606\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E然后继续往下执行调用\\u003Ccode\\u003Efn(3)\\u003C\\u002Fcode\\u003E，发现num的值已经变为6了\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F719e3ef11cb747e6aca1260882450353~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w596\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E然后继续往下执行调用\\u003Ccode\\u003Efn(4)\\u003C\\u002Fcode\\u003E，发现num的值已经变为10了\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E闭包和类的相似之处\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们可以把闭包想像成是一个类的实例对象\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E内存在堆空间\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E捕获的局部变量\\\\常量就是对象的成员（存储属性）\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E组成闭包的函数就是类内部定义的方法\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E类似如下示例\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EClosure\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n num \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E cs \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EClosure\\u003C\\u002Fspan\\u003E()\\ncs.plus(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E)\\ncs.plus(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E)\\ncs.plus(\\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)\\ncs.plus(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E而且通过反汇编也能看出类和闭包的共同之处:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E分配的堆内存空间前16个字节都是用来存储\\u003Ccode\\u003E数据类型信息\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003E引用计数\\u003C\\u002Fcode\\u003E的\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E再看下面的示例\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cp\\u003E如果把num变成全局变量呢，还会不会分配堆内存\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Etypealias\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFn\\u003C\\u002Fspan\\u003E() -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E {\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n num \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num\\n }\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E plus\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFn()\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 3\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 6\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(fn(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 10\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E我们通过反汇编可以看到，系统不再分配堆内存空间了\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fd6a93827e65740c592f1a633795568cb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w717\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E注意:\\u003C\\u002Fstrong\\u003E 如果返回值是函数类型，那么参数的修饰要保持统一\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eadd\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E (\\u003Cspan class=\\"hljs-keyword\\"\\u003Einout\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EVoid\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Ev\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-keyword\\"\\u003Einout\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n v \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E num\\n }\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E plus\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E\\nadd(\\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)(\\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Enum)\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(num)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch2 data-id=\\"heading-5\\"\\u003E4. 自动闭包\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E我们先看下面的示例代码\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E如果调用\\u003Ccode\\u003EgetFirstPositive\\u003C\\u002Fcode\\u003E并传入两个参数，第一个参数符合条件，但是还需要调用\\u003Ccode\\u003Eplus\\u003C\\u002Fcode\\u003E来得到第二个参数，这种设计相比就稍许有些浪费了\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 如果第1个数大于0，返回第一个数。否则返回第2个数\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFirstPositive\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E\\u003E\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E?\\u003C\\u002Fspan\\u003E v1 : v2\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"haha\\"\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E num2\\n}\\n\\ngetFirstPositive(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, plus(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E))\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E我们进行了一些优化，将第二个参数的类型变为函数，只有条件成立的时候才会去调用\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFirstPositive\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: () -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E\\u003E\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E?\\u003C\\u002Fspan\\u003E v1 : v2()\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"haha\\"\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E num2\\n}\\n\\ngetFirstPositive(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, { plus(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)} )\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E这样确定能够满足条件避免多余的调用，但是可读性就会差一些\\u003C\\u002Fp\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们可以使用\\u003Ccode\\u003E自动闭包@autoclosure\\u003C\\u002Fcode\\u003E来修饰形参\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E会将传进来的类型包装成闭包表达式，这是编译器特性\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E只支持\\u003Ccode\\u003E() -\\u003E T\\u003C\\u002Fcode\\u003E格式的参数\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFirstPositive\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-keyword\\"\\u003E@autoclosure\\u003C\\u002Fspan\\u003E () -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E\\u003E\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E?\\u003C\\u002Fspan\\u003E v1 : v2()\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Enum2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"haha\\"\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E num2\\n}\\n\\ngetFirstPositive(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, plus(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E))\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"3\\"\\u003E\\n\\u003Cli\\u003E\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E并非只支持最后一个参数\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFirstPositive\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-keyword\\"\\u003E@autoclosure\\u003C\\u002Fspan\\u003E () -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev3\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\n{\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E\\u003E\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E?\\u003C\\u002Fspan\\u003E v1 : v2()\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"4\\"\\u003E\\n\\u003Cli\\u003E\\u003Ccode\\u003E空合并运算符??\\u003C\\u002Fcode\\u003E中就使用了\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E来将\\u003Ccode\\u003E??\\u003C\\u002Fcode\\u003E后面的参数进行了包装\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fbd984c9d6f3643dab1b92ab556f30183~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w860\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"5\\"\\u003E\\n\\u003Cli\\u003E有\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E和无\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E会构成函数重载，不会报错\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFirstPositive\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: () -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E\\u003E\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E?\\u003C\\u002Fspan\\u003E v1 : v2()\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFirstPositive\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-keyword\\"\\u003E@autoclosure\\u003C\\u002Fspan\\u003E () -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E\\u003E\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E?\\u003C\\u002Fspan\\u003E v1 : v2()\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E注意：为了避免与期望冲突，使用了\\u003Ccode\\u003E@autoclosure\\u003C\\u002Fcode\\u003E的地方最好明确注释清楚：这个值会被推迟执行\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Ch2 data-id=\\"heading-6\\"\\u003E5. 通过汇编进行底层分析\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E1.分析下面这个函数的内存布局\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Esum\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev1\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ev2\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E { v1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E v2 }\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E sum\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E.stride(ofValue: fn)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 16\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E反汇编之后\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa4ba5da513114259b612ace0f69a5aed~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w717\\" loading=\\"lazy\\"\\u003E\\n可以看到:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E底层会先计算sum的值，然后移动到fn的前8个字节\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E再将0移动到fn的后8个字节，总共占用16个字节\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7b5f06739b3245a58064cb8f6a325600~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w716\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E两个地址相差8个字节，所以是连续的，都表示fn的前后8个字节的地址值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E2.分析下面这个函数的内存布局\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Etypealias\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFn\\u003C\\u002Fspan\\u003E() -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E i\\n }\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E plus\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFn()\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.size(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Efn)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 16\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E反汇编之后\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa378d1df3a52495fb11f4faeb14dd569~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w716\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们能看到:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E先调用\\u003Ccode\\u003EgetFn\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E之后\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E会给fn分配16个字节\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E然后我们进入\\u003Ccode\\u003EgetFn\\u003C\\u002Fcode\\u003E看看\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E存储的值分别是什么\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fad095c56c2a84749ad673f279bd1931e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w715\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E可以看到会将\\u003Ccode\\u003Eplus的返回值\\u003C\\u002Fcode\\u003E放到\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E中\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F085cd31f92be495199b099b63083aa34~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w949\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E可以看到\\u003Ccode\\u003Eecx\\u003C\\u002Fcode\\u003E和自己进行异或运算，并把结果0存储到\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E中\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E所以回过头看第一张图就知道了，fn的\\u003Ccode\\u003E16\\u003C\\u002Fcode\\u003E个字节中，前8个字节存储的是\\u003Ccode\\u003Eplus\\u003C\\u002Fcode\\u003E的返回值，后8个字节存储的是0\\u003Cbr\\u003E\\n等同于将\\u003Ccode\\u003Eplus函数\\u003C\\u002Fcode\\u003E赋值给fn\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E plus()\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E3.分析下面这个函数的内存布局\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们将上面示例里的\\u003Ccode\\u003Eplus函数\\u003C\\u002Fcode\\u003E内部对num进行捕获，看看其内存布局有什么变化\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Etypealias\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFn\\u003C\\u002Fspan\\u003E() -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n num \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E num\\n }\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E plus\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E fn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFn()\\n\\nfn(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E)\\nfn(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E)\\nfn(\\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.size(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Efn)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 16\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E反汇编之后\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F359c67b88a43494086592a1db8b278e1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w945\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们可以看到，调用完\\u003Ccode\\u003EgetFn\\u003C\\u002Fcode\\u003E之后，会分别将\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E的值移动到\\u003Ccode\\u003Erip+内存地址\\u003C\\u002Fcode\\u003E，也就是给全局变量fn进行赋值操作\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们通过打印获取fn的内存占用知道是16个字节，fn的前8个字节就是\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E里存储的值，而后8个字节存储的是\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E里的值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们只需要找到\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E里分别存储的是什么就可以了\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fded70d76d4864333b63e1a29636cc9f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E可以看到在堆空间分配完内存之后的\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E给上面几个都进行了赋值，最后的\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E里存储的就是堆空间的地址值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F647e6838c3f24c4eb26ef62086e1d306~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w944\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E从这句看\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E里存储的应该是和\\u003Ccode\\u003Eplus函数\\u003C\\u002Fcode\\u003E相关，下面我们就要找到\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E里存储的是什么\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F905044a7ab2e4a6092d55c9c4f0f71c2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F1f1a75e937114d70811f800dc4f78bf7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w946\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E而且我们调用fn(1)时也可以推导出是调用的全局变量fn的前八个字节\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7fee0fda6ede44099ed1fe6adab5e262~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E参数1会存储到\\u003Ccode\\u003Eedi\\u003C\\u002Fcode\\u003E中\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E而经过上面的推导我们知道\\u003Ccode\\u003E-0xf8(%rbp)\\u003C\\u002Fcode\\u003E中存储的是fn的前8个字节，那么往后8位就是\\u003Ccode\\u003E-0x100(%rbp)\\u003C\\u002Fcode\\u003E，里面放的肯定就是堆空间的地址值了，存储到了\\u003Ccode\\u003Er13\\u003C\\u002Fcode\\u003E中\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们在这里打断点，来观察\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E里到底存储的是什么\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F96ff7d5814604fedb11ba3968cdb7ce4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff0cd10a8dcbe430cba1fb3675e49deb3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w946\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F905e16cba0fd44a48538817ff1df9c8d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F62511fbce3fe436caa43c1e6a671f0c7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F718280ea6726479ea4c13567165e2145~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w949\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E经过一系列的跳转，重要来到了plus真正的函数地址\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E而且\\u003Ccode\\u003Er13\\u003C\\u002Fcode\\u003E最后给了\\u003Ccode\\u003Ersi\\u003C\\u002Fcode\\u003E，\\u003Ccode\\u003Erdi\\u003C\\u002Fcode\\u003E中存储的还是参数1\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fdf72a2a945654c71a6b0b194e747d7fa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F2369455bac414bd29408f0a23b3d0a49~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w946\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E进到\\u003Ccode\\u003Eplus函数\\u003C\\u002Fcode\\u003E中，然后找到进行相加计算的地方，因为传进来的参数是变化的，所以不可能是和固定地址值进行相加\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa5b3056bee744af690d00c5355b5d913~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F235f74a0520a4ad58200b36fd23a5969~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w946\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过推导得知\\u003Ccode\\u003Ercx\\u003C\\u002Fcode\\u003E里存储的值就是\\u003Ccode\\u003Erdi\\u003C\\u002Fcode\\u003E中的参数1\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F037d3d0619c34d2587f3ffc37ffd1e4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w945\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fd961d60c35c54becab0b2e34028a9e9f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w945\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过推导得知\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E里存储的值就是\\u003Ccode\\u003Ersi\\u003C\\u002Fcode\\u003E中的堆内存的num地址\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E所以可以得知\\u003Ccode\\u003E0x10(%rdx)\\u003C\\u002Fcode\\u003E也就是\\u003Ccode\\u003Erdx\\u003C\\u002Fcode\\u003E跳过16个字节的值就是num的值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff4d1ea7c9c4944b18af51213921f2bbd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w741\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过打印也可以证明我们的分析是正确的\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fc28a28b9ae264d3d98844a06e0a5fb2b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fff502270a2884bde85bf51405764b28f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w946\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过推导可以发现\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E中存储的是\\u003Ccode\\u003Ersi\\u003C\\u002Fcode\\u003E的num的地址值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E然后将\\u003Ccode\\u003Ercx\\u003C\\u002Fcode\\u003E中的值覆盖掉\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E中的num地址值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E而且真正进行捕获变量的时机是在\\u003Ccode\\u003EgetFn\\u003C\\u002Fcode\\u003E即将return之前做的事\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E4.分析下面这个函数的内存布局\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们来看下面这个闭包里的变量会被捕获几次\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Etypealias\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003EgetFns\\u003C\\u002Fspan\\u003E() -\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EFn\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E num2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eplus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n num1 \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 6 + 0 = 6, 1 + 4 = 5,\\u003C\\u002Fspan\\u003E\\n num2 \\u003Cspan class=\\"hljs-operator\\"\\u003E+=\\u003C\\u002Fspan\\u003E i \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;&#x3C;\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1100 = 12 + 0 = 12, 1000 = 8 + 2 = 10\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E (num1, num2)\\n }\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eminus\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Ei\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) -\\u003E (\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n num1 \\u003Cspan class=\\"hljs-operator\\"\\u003E-=\\u003C\\u002Fspan\\u003E i \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 6 - 5 = 1, 5 - 3 = 2\\u003C\\u002Fspan\\u003E\\n num2 \\u003Cspan class=\\"hljs-operator\\"\\u003E-=\\u003C\\u002Fspan\\u003E i \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x3C;&#x3C;\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1010 = 12 - 10 = 2, 0110 = 10 - 6 = 4\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E (num1, num2)\\n }\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E (plus, minus)\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E (p, m) \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E getFns()\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(p(\\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 6, 12\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(m(\\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1, 2\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(p(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 5, 10\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(m(\\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 2, 4\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E反汇编之后\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5bd66e2c622e4b06ae82ed5f8fc7e2bb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w946\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E发现其底层分别会分配两个堆空间，但是num1、num2也只是分别捕获一次，然后两个函数\\u003Ccode\\u003Eplus、minus\\u003C\\u002Fcode\\u003E共有\\u003C\\u002Fp\\u003E\\n\\u003Ch1 data-id=\\"heading-7\\"\\u003E三、结构体\\u003C\\u002Fh1\\u003E\\n\\u003Ch2 data-id=\\"heading-8\\"\\u003E1. 基本概念\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E在Swift\\u003Cstrong\\u003E标准库中，绝大多数的公开类型都是结构体\\u003C\\u002Fstrong\\u003E，而\\u003Cstrong\\u003E枚举和类只占很小一部分\\u003C\\u002Fstrong\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E比如\\u003Ccode\\u003EBool、Int、String、Double、Array、Dictionary\\u003C\\u002Fcode\\u003E等常见类型都是结构体\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EDate\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E year: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E month: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E day: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n }\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E date \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EDate\\u003C\\u002Fspan\\u003E(year: \\u003Cspan class=\\"hljs-number\\"\\u003E2019\\u003C\\u002Fspan\\u003E, month: \\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E, day: \\u003Cspan class=\\"hljs-number\\"\\u003E23\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E所有的结构体\\u003Cstrong\\u003E都有一个编译器自动生成的初始化器\\u003C\\u002Fstrong\\u003E（\\u003Ccode\\u003Einitializer\\u003C\\u002Fcode\\u003E，初始化方法、构造器、构造方法）\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E通过默认生成的初始化器初始化:传入所有成员值，用以初始化所有成员（\\u003Ccode\\u003E存储属性\\u003C\\u002Fcode\\u003E，\\u003Ccode\\u003EStored Property\\u003C\\u002Fcode\\u003E）\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E date \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EDate\\u003C\\u002Fspan\\u003E(year: \\u003Cspan class=\\"hljs-number\\"\\u003E2019\\u003C\\u002Fspan\\u003E, month: \\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E, day: \\u003Cspan class=\\"hljs-number\\"\\u003E23\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-9\\"\\u003E2. 结构体的初始化器\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E编译器会根据情况，可能会为结构体生成多个初始化器，宗旨是：\\u003Ccode\\u003E保证所有成员都有初始值\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E如果结构体的成员定义的时候都有默认值了，那么生成的初始化器不会报错\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fc7f34e0c903b4112a1a603c46665c4ae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w569\\" loading=\\"lazy\\"\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E如果是下面这几种情况就会报错\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe364616dd6c944f28d5ab613284d4403~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w642\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F189bf09fbbf248df8396eaa8a9b74c33~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w645\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fde06012b6cec46dabe604d027cd1654a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w640\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E如果是可选类型的初始化器也不会报错，因为可选类型默认的值就是\\u003Ccode\\u003Enil\\u003C\\u002Fcode\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F1a73b4ae9ef8415ab4c5b3de861cd5fa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w457\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-10\\"\\u003E3. 自定义初始化器\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E我们也可以自定义初始化器\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Einit\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Ex\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Ey\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.x \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E x\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.y \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E y\\n }\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E(x: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, y: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E下面对变量\\u003Ccode\\u003Ep2\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003Ep3\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003Ep4\\u003C\\u002Fcode\\u003E初始化报错的原因是 因为我们 \\u003Cstrong\\u003E\\u003Ccode\\u003E已经自定义初始化器了，编译器就不会再帮我们生成默认的初始化器了\\u003C\\u002Fcode\\u003E\\u003C\\u002Fstrong\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fda74440857c645b6990bc678cf0ab2f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w643\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Ch2 data-id=\\"heading-11\\"\\u003E4. 初始化器的本质\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E下面这两种写法是完全等效的\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n} \\n等效于 \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Einit\\u003C\\u002Fspan\\u003E() {\\n x \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n y \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n }\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p4 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E()\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E我们通过反汇编分别对比一下两种写法的实现，发现也是一样的:\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E因此,我们不难得出结论: \\u003Cbr\\u003E\\n默认初始化器的本质,就是给存储属性做了默认赋值工作(比如这里给Int类型的两个属性默认赋值为\\u003Ccode\\u003E0\\u003C\\u002Fcode\\u003E)\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fbde85343b7e74b75a53d605462260979~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w713\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa431a9e76973412dbfe8e6014d9bc01a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w715\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-12\\"\\u003E5.结构体的内存结构\\u003C\\u002Fh2\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E我们通过打印,了解下结构体占用的内存大小 和 其 内存布局\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p4 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E() \\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E\\u003E.stride) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 16\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E\\u003E.size) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 16\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E\\u003E.alignment) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.memStr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Ep4)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0x000000000000000a 0x0000000000000014\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E通过控制台,我们可以看到:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E系统一共分配了\\u003Ccode\\u003E16\\u003C\\u002Fcode\\u003E个字节的内存空间\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E前8个字节存储的是10，后8个字节存储的是20\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E我们再看下面这个结构体\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E origin: \\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-literal\\"\\u003Efalse\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p4 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E()\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E\\u003E.stride) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 24\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E\\u003E.size) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 17\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E\\u003E.alignment) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.memStr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Ep4)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0x000000000000000a 0x0000000000000014 0x0000000000000000\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E可以看到:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E结构体实际只用了17个字节，而因为系统分配有内存对齐的概念,所以分配了24个字节\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E前8个字节存储的是10，中间8个字节存储的是20，最后1个字节存储的是false，也就是0\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch1 data-id=\\"heading-13\\"\\u003E四、类\\u003C\\u002Fh1\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E类的定义和结构体类似，但编译器并没有为类自动生成可以传入成员值的初始化器\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F48faa928fa484b87a2ae3996bbcabac8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w646\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E如果成员没有初始值，所有的初始化器都会报错\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff5699df524e743128207ac9c2edbd947~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w648\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-14\\"\\u003E1. 类的初始化器\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E如果类的所有成员都在定义的时候指定了初始值，编译器会为类生成 \\u003Cstrong\\u003E\\u003Ccode\\u003E无参的初始化器\\u003C\\u002Fcode\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E成员的初始化是在这个初始化器中完成的\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E p1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E()\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E下面这两种写法是完全等效的\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n}\\n\\n等效于\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Einit\\u003C\\u002Fspan\\u003E() {\\n x \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n y \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E p1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E()\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-15\\"\\u003E2. 结构体与类的本质区别\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E结构体是\\u003Ccode\\u003E值类型\\u003C\\u002Fcode\\u003E（枚举也是值类型），类是\\u003Ccode\\u003E引用类型\\u003C\\u002Fcode\\u003E（指针类型）\\u003Cbr\\u003E\\n下面我们分析函数内的局部变量分别都在内存的什么位置\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Etest\\u003C\\u002Fspan\\u003E() {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E size \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E()\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E point \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E()\\n} \\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Ccode\\u003E变量\\u003C\\u002Fcode\\u003Esize和point都是在栈空间\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E不同的是\\u003Ccode\\u003E局部变量point\\u003C\\u002Fcode\\u003E是一个结构体类型。结构体是值类型，结构体变量会在栈空间中分配内存,它里面的两个成员x、y按顺序的排布\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E而\\u003Ccode\\u003E局部指针变量size\\u003C\\u002Fcode\\u003E是一个类的实例，类是引用类型，所以\\u003Ccode\\u003Esize指针\\u003C\\u002Fcode\\u003E指向的已初始化的变量的存储空间,是在堆中分配的，size指针内部存储的是Size类的实例内存地址\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F70ea6076fb1548509687cab9ebead2cd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1020\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-16\\"\\u003E3. 分析类的内存布局\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E我们先来看一下类的占用内存大小是多少\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E\\n }\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E\\u003E.stride) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E通过打印我们可以发现\\u003Ccode\\u003EMemoryLayout\\u003C\\u002Fcode\\u003E获取的8个字节实际上是指针变量占用多少存储空间，并不是对象在堆中的占用大小\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E然后我们再看类的内存布局是怎样的\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E size \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E()\\n\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.ptr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Esize)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0x000000010000c388\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.memStr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Esize)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0x000000010072dba0\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E通过打印我们可以看到变量里面存储的值也是一个地址\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"3\\"\\u003E\\n\\u003Cli\\u003E我们再打印该变量所指向的对象的内存布局是什么\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.size(ofRef: size)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 32\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.ptr(ofRef: size)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0x000000010072dba0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.memStr(ofRef: size)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0x000000010000c278 0x0000000200000003 0x0000000000000001 0x0000000000000002\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E通过打印可以看到在\\u003Ccode\\u003E堆中存储的对象的地址\\u003C\\u002Fcode\\u003E和上面的\\u003Ccode\\u003E指针变量里存储的值\\u003C\\u002Fcode\\u003E是一样的\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E内存布局里一共占用32个字节:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E前16个字节分别用来存储一些\\u003Ccode\\u003E类信息\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003E引用计数\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E后面16个字节存储着类的成员变量的值\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E下面我们再从反汇编的角度来分析\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E我们要想确定类是否在堆空间中分配空间，通过反汇编来查看是否有调用\\u003Ccode\\u003Emalloc函数\\u003C\\u002Fcode\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7ff9723d317849f1a11137973bd89be3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w708\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F4a45d9d80a3d43efb61a81f9e475e045~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w716\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E然后就一直跟进直到这里最好调用了\\u003Ccode\\u003Eswift\_slowAlloc\\u003C\\u002Fcode\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F65b01d1dd467407f8ebc07a08d1c7d15~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w714\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E发现函数内部调用了系统的\\u003Ccode\\u003Emalloc\\u003C\\u002Fcode\\u003E在堆空间分配内存\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F6a9514ee0c924446a07710bd1ca2f405~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w709\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E注意:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E结构体和枚举存储在哪里\\u003Ccode\\u003E取决于它们是在哪里分配\\u003C\\u002Fcode\\u003E的\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E如果是在函数中分配的那就是在栈里\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E如果是在全局中分配的那就是在数据段\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E而类无论是在哪里分配的，对象都是在堆空间中\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E指向对象内存的指针的存储位置是不确定的，可能在栈中也可能在数据段\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们再看下面的\\u003Ccode\\u003E类型\\u003C\\u002Fcode\\u003E占用内存大小是多少\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E test \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-literal\\"\\u003Etrue\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E s \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E()\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.size(ofRef: s)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 48\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E在\\u003Ccode\\u003EMac、iOS\\u003C\\u002Fcode\\u003E中的\\u003Ccode\\u003Emalloc函数\\u003C\\u002Fcode\\u003E分配的内存大小总是\\u003Ccode\\u003E16的倍数\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E类最前面会有\\u003Ccode\\u003E16个字节\\u003C\\u002Fcode\\u003E用来存储\\u003Ccode\\u003E类的信息\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003E引用计数\\u003C\\u002Fcode\\u003E，所以实际占用内存是\\u003Ccode\\u003E33个字节\\u003C\\u002Fcode\\u003E，但由于\\u003Ccode\\u003Emalloc函数\\u003C\\u002Fcode\\u003E分配的内存都是刚好大于或等于其所需内存的16最小倍数，所以分配\\u003Ccode\\u003E48个字节\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E我们还可以通过\\u003Ccode\\u003Eclass\_getInstanceSize\\u003C\\u002Fcode\\u003E函数来获取类对象的内存大小\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 获取的是经过内存对齐后的内存大小，不是malloc函数分配的内存大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(class\_getInstanceSize(\\u003Cspan class=\\"hljs-built\_in\\"\\u003Etype\\u003C\\u002Fspan\\u003E(of: s))) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 40\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(class\_getInstanceSize(\\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E.\\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 40\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch1 data-id=\\"heading-17\\"\\u003E五、枚举\\u003C\\u002Fh1\\u003E\\n\\u003Ch2 data-id=\\"heading-18\\"\\u003E1. 枚举的基本用法\\u003C\\u002Fh2\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EDirection\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E north\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E south\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E east\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E west\\n}\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 简便写法\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EDirection\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E north, south, east, west\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E dir \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EDirection\\u003C\\u002Fspan\\u003E.west\\ndir \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EDirection\\u003C\\u002Fspan\\u003E.east\\ndir \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .north\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(dir) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F north\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eswitch\\u003C\\u002Fspan\\u003E dir {\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E .north:\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"north\\"\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E .south:\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"south\\"\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E .east:\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"east\\"\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E .west:\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"west\\"\\u003C\\u002Fspan\\u003E)\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch2 data-id=\\"heading-19\\"\\u003E2. 关联值（Associated Values）\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E有时会将\\u003Ccode\\u003E枚举的成员值\\u003C\\u002Fcode\\u003E和\\u003Ccode\\u003E其他类型的值\\u003C\\u002Fcode\\u003E关联 \\u003Cstrong\\u003E\\u003Ccode\\u003E存储在一起\\u003C\\u002Fcode\\u003E\\u003C\\u002Fstrong\\u003E ,会非常有用\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EScore\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E points(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E grade(\\u003Cspan class=\\"hljs-type\\"\\u003ECharacter\\u003C\\u002Fspan\\u003E)\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E score \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EScore\\u003C\\u002Fspan\\u003E.points(\\u003Cspan class=\\"hljs-number\\"\\u003E96\\u003C\\u002Fspan\\u003E)\\nscore \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .grade(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"A\\"\\u003C\\u002Fspan\\u003E)\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eswitch\\u003C\\u002Fspan\\u003E score {\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .points(i):\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(i)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .grade(i):\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(i)\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EDate\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E digit(year: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, month: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, day: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E string(\\u003Cspan class=\\"hljs-type\\"\\u003EString\\u003C\\u002Fspan\\u003E)\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E date \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EDate\\u003C\\u002Fspan\\u003E.digit(year: \\u003Cspan class=\\"hljs-number\\"\\u003E2020\\u003C\\u002Fspan\\u003E, month: \\u003Cspan class=\\"hljs-number\\"\\u003E12\\u003C\\u002Fspan\\u003E, day: \\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E)\\ndate \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .string(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"2022-07-10\\"\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F必要时【let】也可以改为【var】\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eswitch\\u003C\\u002Fspan\\u003E date {\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E .digit(\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E year, \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E month, \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E day):\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(year, month, day)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .string(value):\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(value)\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E关联值举例\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F213b2a7017054921aab9ff40adb7f450~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\\" alt=\\"image.png\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp1-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fef6d6b00633049bd9d7052042ffdb84f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\\" alt=\\"image.png\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPassword\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E number(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E gesture(\\u003Cspan class=\\"hljs-type\\"\\u003EString\\u003C\\u002Fspan\\u003E)\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E pwd \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPassword\\u003C\\u002Fspan\\u003E.number(\\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E7\\u003C\\u002Fspan\\u003E)\\npwd \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .gesture(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"12369\\"\\u003C\\u002Fspan\\u003E)\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eswitch\\u003C\\u002Fspan\\u003E pwd {\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .number(n1, n2, n3, n4):\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"number is \\"\\u003C\\u002Fspan\\u003E, n1, n2, n3, n4)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .gesture(str):\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"gesture is \\"\\u003C\\u002Fspan\\u003E, str)\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E必要时,使用了枚举关联值的\\u003Ccode\\u003Eswitch-case\\u003C\\u002Fcode\\u003E语句 里面的 \\u003Ccode\\u003Elet\\u003C\\u002Fcode\\u003E也可以改成\\u003Ccode\\u003Evar\\u003C\\u002Fcode\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Ch2 data-id=\\"heading-20\\"\\u003E3. 原始值（Raw Values）\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E枚举成员可以使用\\u003Ccode\\u003E相同类型\\u003C\\u002Fcode\\u003E的默认值预先关联，这个默认值叫做\\u003Ccode\\u003E原始值\\u003C\\u002Fcode\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPokerSuit\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EString\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E spade \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♠\\"\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E heart \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♥\\"\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E diamond \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♦\\"\\u003C\\u002Fspan\\u003E \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E club \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♣\\"\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E suit \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPokerSuit\\u003C\\u002Fspan\\u003E.heart\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(suit)\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F heart\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(suit.rawValue)\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F ♥\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003EdebugPrint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EPokerSuit\\u003C\\u002Fspan\\u003E.spade.rawValue)\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F ♠ \\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EGrade\\u003C\\u002Fspan\\u003E : \\u003Cspan class=\\"hljs-title class\_\\"\\u003EString\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E perfect \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"A\\"\\u003C\\u002Fspan\\u003E \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E great \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"B\\"\\u003C\\u002Fspan\\u003E \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E good \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"C\\"\\u003C\\u002Fspan\\u003E \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E bad \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"D\\"\\u003C\\u002Fspan\\u003E \\n} \\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EGrade\\u003C\\u002Fspan\\u003E.perfect.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F A \\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EGrade\\u003C\\u002Fspan\\u003E.great.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F B \\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EGrade\\u003C\\u002Fspan\\u003E.good.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F C\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EGrade\\u003C\\u002Fspan\\u003E.bad.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F D\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E注意:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E原始值不占用枚举变量的内存\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E原始值只是关联上了枚举变量，所以原始值占用内存的大小并不是枚举变量的大小\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E底层实现是通过计算属性\\u002F函数来获取原始值的\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-21\\"\\u003E4. 隐式原始值(Implicitly Assigned Raw Values)\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E如果枚举的原始值类型是\\u003Ccode\\u003EInt\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003EString\\u003C\\u002Fcode\\u003E，Swift会自动分配原始值\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E字符串默认分配的原始值就是其变量名\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EDirection\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EString\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E north \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"north\\"\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E south \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"south\\"\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E east \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"east\\"\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E west \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"west\\"\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 等价于上面\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EDirection\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EString\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E north, south, east, west\\n}\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EDirection\\u003C\\u002Fspan\\u003E.north) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F north\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EDirection\\u003C\\u002Fspan\\u003E.north.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F north\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E\\u003Ccode\\u003EInt类型\\u003C\\u002Fcode\\u003E默认分配的原始值是从0开始递增的数字\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESeason\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E spring, summer, autumn, winter\\n}\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.spring.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.summer.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.autumn.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 2\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.winter.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 3\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E如果有指定原始值的，下一个就会按照已经指定的值递增分配\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESeason\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E spring \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, summer, autumn \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E, winter\\n} \\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.spring.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.summer.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 2\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.autumn.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 4\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003ESeason\\u003C\\u002Fspan\\u003E.winter.rawValue) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 5\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch2 data-id=\\"heading-22\\"\\u003E5. 递归枚举（Recursive Enumeration）\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E递归枚举要用\\u003Ccode\\u003Eindirect\\u003C\\u002Fcode\\u003E关键字来修饰\\u003Ccode\\u003Eenum\\u003C\\u002Fcode\\u003E，不然会报错\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eindirect\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E number(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E sum(\\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E difference(\\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E)\\n}\\n\\n或者\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E number(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eindirect\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E sum(\\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eindirect\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E difference(\\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E)\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E five \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E.number(\\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E four \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E.number(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E sum \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E.sum(five, four)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E two \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E.number(\\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E difference \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E.difference(sum, two)\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Ecalculate\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003E\_\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-params\\"\\u003Eexpr\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EArithExpr\\u003C\\u002Fspan\\u003E) -\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eswitch\\u003C\\u002Fspan\\u003E expr {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .number(value):\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E value\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .sum(left, right):\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E calculate(left) \\u003Cspan class=\\"hljs-operator\\"\\u003E+\\u003C\\u002Fspan\\u003E calculate(right)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E .difference(left, right):\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ereturn\\u003C\\u002Fspan\\u003E calculate(left) \\u003Cspan class=\\"hljs-operator\\"\\u003E-\\u003C\\u002Fspan\\u003E calculate(right)\\n }\\n}\\n\\ncalculate(difference)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-23\\"\\u003E6. MemoryLayout\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E可以使用\\u003Ccode\\u003EMemoryLayout\\u003C\\u002Fcode\\u003E获取数据类型占用的内存大小\\u003Cbr\\u003E\\n\\u003Ccode\\u003E64bit\\u003C\\u002Fcode\\u003E的\\u003Ccode\\u003EInt类型\\u003C\\u002Fcode\\u003E占\\u003Ccode\\u003E8个字节\\u003C\\u002Fcode\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E age \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8, 分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8, 实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8, 内存对齐参数\\u003C\\u002Fspan\\u003E\\n\\n等同于\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E.size(ofValue: age)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E.stride(ofValue: age)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E.alignment(ofValue: age)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E关联值和原始值的区别：\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Cp\\u003E关联值类型会存储到枚举变量里面\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Cp\\u003E原始值因为一开始就会知道默认值是多少，所以只做记录，不会存储\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPassword\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E number(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E other\\n}\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPassword\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 40，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPassword\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 33，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003EPassword\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESession\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E spring, summer, autnmn, winter\\n}\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E思考下面枚举变量的内存布局:\\u003C\\u002Fstrong\\u003E\\n\\u003Cstrong\\u003E案例1:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1, test2, test3 \\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test1\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test2 \\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test3\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例2:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E : \\u003Cspan class=\\"hljs-title class\_\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, test2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, test3 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E \\n}\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test1 \\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test2 \\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test3\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例3:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test2(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test3(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test4(\\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E) \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test5\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E e \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test1(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)\\ne \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test2(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E)\\ne \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test3(\\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E) \\ne \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test4(\\u003Cspan class=\\"hljs-literal\\"\\u003Etrue\\u003C\\u002Fspan\\u003E)\\ne \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .test5\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 32，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 25，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例4:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F注意！！！！   枚举选项只有一个,所以实际用到的内存空间 为0，但是要存储一个成员值 所以对其参数为1，给其分配一个字节\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例5:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例6:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例7:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test0 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test2 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test4(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test5(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test6(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E)\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 32，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 25，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例8:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test0 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test2 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test4(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test5(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test6(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 32，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 32，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E案例9:\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E { \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test0 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test2 \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test4(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test5(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test6(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test(\\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F32，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F25，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch2 data-id=\\"heading-24\\"\\u003E7. 枚举变量的内存布局\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E我们知道通过\\u003Ccode\\u003EMemoryLayout\\u003C\\u002Fcode\\u003E可以获取到枚举占用内存的大小，那枚举变量分别占用多少内存呢？\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E要想知道枚举变量的大小，我们需要通过查看枚举变量的内存布局来进行分析\\u003C\\u002Fp\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E枚举变量的分析准备\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cp\\u003E我们可以通过\\u003Ccode\\u003EXcode\\u003C\\u002Fcode\\u003E里的\\u003Ccode\\u003EView Memory\\u003C\\u002Fcode\\u003E选项来查看详细的内存布局\\u003C\\u002Fp\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E可以在运行程序时，通过控制台打印的枚举变量右键选择\\u003Ccode\\u003EView Memory of \*\\u003C\\u002Fcode\\u003E进入到内存布局的页面\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5735d2c4062b49689021b7ffda252428~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w440\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E还可以从\\u003Ccode\\u003EXcode\\u003C\\u002Fcode\\u003E标题栏中选择\\u003Ccode\\u003EDebug -\\u003E Debug Workflow -\\u003E View Memory\\u003C\\u002Fcode\\u003E进入到内存布局的页面\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff74e3c087f614a4290c7dfb272c1c0fb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w569\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E进入到该页面，然后通过输入变量的内存地址来查看\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F818945a0d9f742fa9adacb4be5803ea3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1129\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E我们可以下载一个小工具来获取到变量的内存地址\\u003Cbr\\u003E\\n下载地址：\\u003Ca href=\\"https:\\u002F\\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCoderMJLee%2FMems\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fgithub.com\\u002FCoderMJLee\\u002FMems\\" ref=\\"nofollow noopener noreferrer\\"\\u003Egithub.com\\u002FCoderMJLee\\u002F…\\u003C\\u002Fa\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E然后将下载好的这个文件\\u003Ccode\\u003EMems.swift\\u003C\\u002Fcode\\u003E拖到自己的\\u003Ccode\\u003EXcode\\u003C\\u002Fcode\\u003E中\\n调用这个函数就可以了\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.ptr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Et))\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们来分析下面的枚举变量的情况\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1, test2, test3\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test1\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.ptr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Et))\\n\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test2\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test3\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E分别将断点打在给\\u003Ccode\\u003E枚举变量t\\u003C\\u002Fcode\\u003E赋值的三句代码上，然后运行程序观察每次断点之后的内存布局有什么变化\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fb3707ff07b0142e68f0e0471423f4ffc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1127\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fe44ad20c1e9d4b6eb27ed0706ea5a625~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1124\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Faaa99ae5371e49e4a708ba9b6431a077~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1124\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过上图可以看到，每个枚举变量都分配了一个字节的大小，并且存储的值分别是0、1、2，我们可以知道这一个字节的大小就是用来存储\\u003Ccode\\u003E枚举成员值\\u003C\\u002Fcode\\u003E的\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们再来分析一个枚举变量的情况\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, test2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, test3 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test1\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.ptr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Et))\\n\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test2\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test3\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff8b07ec91b874385b845918724871429~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1131\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa5ae262e720a4c3292957b0115e8dd6f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1126\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F74a579894f614963a3781c23a51e7974~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1125\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过上图可以看到，每个枚举变量存储的值也是0、1、2，并且分配了一个字节的大小\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E可以证明枚举变量的内存大小和原始值类型无关，而且枚举变量里存储的值和原始值也无关\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们再来分析一个枚举变量的情况\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test1(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 24\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test2(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 16\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test3(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test4(\\u003Cspan class=\\"hljs-type\\"\\u003EBool\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test5 \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E t \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test1(\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E)\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EMems\\u003C\\u002Fspan\\u003E.ptr(ofVal: \\u003Cspan class=\\"hljs-operator\\"\\u003E&#x26;\\u003C\\u002Fspan\\u003Et))\\n\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test2(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E)\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test3(\\u003Cspan class=\\"hljs-number\\"\\u003E6\\u003C\\u002Fspan\\u003E)\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test4(\\u003Cspan class=\\"hljs-literal\\"\\u003Etrue\\u003C\\u002Fspan\\u003E)\\nt \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E.test5\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 25\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 32\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E我们先通过打印了解到枚举类型总共分配了\\u003Ccode\\u003E32个字节\\u003C\\u002Fcode\\u003E，然后我们通过断点分别来观察枚举变量的内存布局\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F3ddde575d93346e6b93197ab125ff3ef~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w773\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F27bda96fd6df42699bb75099bf79d174~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1124\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E执行完第一句我们可以看到，前面24个字节分别用来存储关联值1、2、3，第25个字节用来存储成员值0，之所以分配32个字节是因为内存对齐的原因\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 调整排版后的内存布局如下所示\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E01\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E02\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E03\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F666710ea86264b0ca18d84c9f0100b29~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w719\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7a641539783c44769d07ef161b6391d2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1193\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E执行完第二句我们可以看到，前面16个字节分半用来存储关联值4、5，然后第25个字节用来存储成员值1\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 调整排版后的内存布局如下所示\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E04\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E05\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E01\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F4ffec0c54ef14fbca354e62552e34d0f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w563\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F4289e9afdf1346108ace6a521d34736b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1196\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E执行完第三句我们可以看到，前面8个字节分半用来存储关联值6，然后第25个字节用来存储成员值2\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 调整排版后的内存布局如下所示\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E06\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E02\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fdab2856fa3a54d95b304759492b0118c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w665\\" loading=\\"lazy\\"\\u003E \\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fff4710127fa346a39c3400dad0b0e575~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1192\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E执行完第四句我们可以看到，由于是Bool类型，那么只用了第一个字节来存储关联值1，然后第25个字节用来存储成员值3\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 调整排版后的内存布局如下所示\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E01\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E03\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Ff1e11f59919e4b6c8bc4331127debff1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w676\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F2227a5c5afbe423ebed7698a7a15be28~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1191\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E执行完最后一句我们可以看到，由于没有关联值，那么只用了第25个字节存储成员值4\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 调整排版后的内存布局如下所示\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-number\\"\\u003E04\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E00\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E总结：内存分配情况：一个字节存储成员值，n个字节存储关联值（n取占用内存最大的关联值），任何一个case的关联值都共有这n个字节\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E我们再来看几个情况\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test\\n}\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 0，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 1，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E如果枚举里只有一个\\u003Ccode\\u003Ecase\\u003C\\u002Fcode\\u003E，那么实际用到的空间为0，都不用特别分配内存来进行存储\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ETestEnum\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E test(\\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E)\\n}\\n\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.stride \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，分配占用的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.size \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，实际用到的空间大小\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-type\\"\\u003EMemoryLayout\\u003C\\u002Fspan\\u003E&#x3C;\\u003Cspan class=\\"hljs-type\\"\\u003ESession\\u003C\\u002Fspan\\u003E\\u003E.alignment \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 8，对齐参数\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E可以看到分配的内存大小就是关联值类型决定的，因为只有一个\\u003Ccode\\u003Ecase\\u003C\\u002Fcode\\u003E，所以都不需要再额外分配内存来存储是哪个\\u003Ccode\\u003Ecase\\u003C\\u002Fcode\\u003E了\\u003C\\u002Fp\\u003E\\n\\u003Ch1 data-id=\\"heading-25\\"\\u003E六、值类型和引用类型\\u003C\\u002Fh1\\u003E\\n\\u003Ch2 data-id=\\"heading-26\\"\\u003E1. 值类型\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E值类型赋值给\\u003Ccode\\u003Evar、let或者给函数\\u003C\\u002Fcode\\u003E传参，是直接将所有内容\\u003Ccode\\u003E拷贝一份\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E类似于对文件进行\\u003Ccode\\u003Ecopy、paste\\u003C\\u002Fcode\\u003E操作，产生了全新的文件副本，\\u003Cstrong\\u003E属于深拷贝（deep copy）\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E值类型进行拷贝的内存布局如下所示\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Etest\\u003C\\u002Fspan\\u003E() {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E(x: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, y: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E p1\\n\\n p2.x \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E\\n p2.y \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E5\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(p1.x, p1.y)\\n}\\n\\ntest()\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F7980c7fea817418aacefb9d17bcf5dba~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w536\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们通过反汇编来进行分析\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F92f3f7c5f9484dc9933d89ee94a26c59~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w712\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F602bd28e6ec6486c9096ab346f49e45e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w947\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F9e673c56b74b4d768ebb91a504013d50~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w713\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F238779d785e24cc48720c582d965b587~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1048\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cp\\u003E通过上述分析可以发现，值类型的赋值内部会先将p1的成员值保存起来，再给p2进行赋值，所以不会影响到p1\\u003C\\u002Fp\\u003E\\n\\u003Ch2 data-id=\\"heading-27\\"\\u003E2. 值类型的赋值操作\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E在Swift标准库中，为了提升性能，\\u003Ccode\\u003EArray、String、Dictionary、Set\\u003C\\u002Fcode\\u003E采用了\\u003Ccode\\u003ECopy On Write\\u003C\\u002Fcode\\u003E的技术\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E如果\\u003Ccode\\u003E只是将赋值操作\\u003C\\u002Fcode\\u003E，那么只会进行\\u003Ccode\\u003E浅拷贝\\u003C\\u002Fcode\\u003E，两个变量使用的还是同一块存储空间\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E只有当\\u003Ccode\\u003E进行了”写“的操作\\u003C\\u002Fcode\\u003E时，\\u003Ccode\\u003E才会进行深拷贝\\u003C\\u002Fcode\\u003E操作\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E对于标准库值类型的赋值操作，Swift能确保最佳性能，所以没必要为了保证最佳性能来避免赋值\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E建议：\\u003Cstrong\\u003E不需要修改值的，尽量定义成\\u003Ccode\\u003Elet\\u003C\\u002Fcode\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E s1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"Jack\\"\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E s2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E s1\\ns2.append(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"\_Rose\\"\\u003C\\u002Fspan\\u003E)\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(s1) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F Jack\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(s2) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F Jack\_Rose\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E a1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \[\\u003Cspan class=\\"hljs-number\\"\\u003E1\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-number\\"\\u003E3\\u003C\\u002Fspan\\u003E\]\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E a2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E a1\\na2.append(\\u003Cspan class=\\"hljs-number\\"\\u003E4\\u003C\\u002Fspan\\u003E)\\na1\[\\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\] \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(a1) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F \[2, 2, 3\]\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(a2) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F \[1, 2, 3, 4\]\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E d1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \[\\u003Cspan class=\\"hljs-string\\"\\u003E\\"max\\"\\u003C\\u002Fspan\\u003E : \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-string\\"\\u003E\\"min\\"\\u003C\\u002Fspan\\u003E : \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E\]\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E d2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E d1\\nd1\[\\u003Cspan class=\\"hljs-string\\"\\u003E\\"other\\"\\u003C\\u002Fspan\\u003E\] \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E7\\u003C\\u002Fspan\\u003E\\nd2\[\\u003Cspan class=\\"hljs-string\\"\\u003E\\"max\\"\\u003C\\u002Fspan\\u003E\] \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E12\\u003C\\u002Fspan\\u003E\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(d1) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F \[\\"other\\" : 7, \\"max\\" : 10, \\"min\\" : 2\]\\u003C\\u002Fspan\\u003E\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(d2) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F \[\\"max\\" : 12, \\"min\\" : 2\]\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们再看下面这段代码\\u003C\\u002Fstrong\\u003E\\u003Cbr\\u003E\\n对于p1来说，再次赋值也只是覆盖了成员\\u003Ccode\\u003Ex、y\\u003C\\u002Fcode\\u003E的值而已，都是同一个结构体变量\\u003C\\u002Fp\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n}\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E(x: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, y: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)\\np1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E(x: \\u003Cspan class=\\"hljs-number\\"\\u003E11\\u003C\\u002Fspan\\u003E, y: \\u003Cspan class=\\"hljs-number\\"\\u003E22\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E用let定义的赋值操作\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E如果用\\u003Ccode\\u003Elet\\u003C\\u002Fcode\\u003E定义的常量赋值结构体类型会报错，并且修改结构体里的成员值也会报错\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E用\\u003Ccode\\u003Elet\\u003C\\u002Fcode\\u003E定义就意味着常量里存储的值不可更改，而结构体是由x和y这16个字节组成的，所以更改x和y就意味着结构体的值要被覆盖，所以报错\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F02bc9cd358654834ae915998e2e45480~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w645\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Ch2 data-id=\\"heading-28\\"\\u003E3. 引用类型\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E引用赋值给\\u003Ccode\\u003Evar、let或者给函数\\u003C\\u002Fcode\\u003E传参，是将\\u003Ccode\\u003E内存地址拷贝一份\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E类似于制作一个文件的替身（快捷方式、链接），指向的是同一个文件，属于 \\u003Cstrong\\u003E\\u003Ccode\\u003E浅拷贝（shallow copy）\\u003C\\u002Fcode\\u003E\\u003C\\u002Fstrong\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E0\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Einit\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Ewidth\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Eheight\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.width \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E width\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.height \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E height\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Etest\\u003C\\u002Fspan\\u003E() {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E s1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E(width: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, height: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E s2 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E s1\\n\\n s2.width \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E11\\u003C\\u002Fspan\\u003E\\n s2.height \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E22\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(s1.height, s1.width)\\n}\\n\\ntest() \\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E由于s1和s2都指向的同一块存储空间，所以s2修改了成员变量，s1再调用成员变量也已经是改变后的了\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F3356c841c72c4fac841aa1dbf256f8cf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1124\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E我们通过反汇编来进行分析\\u003C\\u002Fstrong\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fb45ca53a5f0d46eb8eb3a28d3621a036~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1049\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F945d409630314dbcad7255cb126579f1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1052\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5d1e1886aa3e48c590dcf63cf5882594~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1052\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E堆空间分配完内存之后，我们拿到\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E的值查看内存布局\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E发现\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E里和对象的结构一样，证明\\u003Ccode\\u003Erax\\u003C\\u002Fcode\\u003E里存储的就是对象的地址\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F704284210812484c9c6486811ee37673~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1051\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5e9317bf166a4951a7755e6c8919506c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1187\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E将新的值11和22分别覆盖掉堆空间对象的成员值\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F02b760674c0b45d38d11a9a86e1e8c40~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1223\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F0643e6cb5cec4763aef3a0fa65a57c04~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1224\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Faf6b9af0b43c4511887caf319cde7327~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1220\\" loading=\\"lazy\\"\\u003E\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F31c388e409914d1f8e4e2a526833b208~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w1225\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cp\\u003E通过上面的分析可以发现，修改的成员值都是改的同一个地址的对象，所以修改了p2的成员值，会影响到p1\\u003C\\u002Fp\\u003E\\n\\u003Ch2 data-id=\\"heading-29\\"\\u003E4. 对象的堆空间申请过程\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E在Swift中，创建类的实例对象，要向堆空间申请内存，大概流程如下\\u003C\\u002Fstrong\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Ccode\\u003EClass.\_\_allocating\_init()\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003ElibswiftCore.dylib:\\u003Ccode\\u003E\_swift\_allocObject\_\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003ElibswiftCore.dylib:\\u003Ccode\\u003Eswift\_slowAlloc\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003Elibsystem\_malloc.dylib:\\u003Ccode\\u003Emalloc\\u003C\\u002Fcode\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E在Mac、iOS中的\\u003Ccode\\u003Emalloc\\u003C\\u002Fcode\\u003E函数分配的内存大小总是16的倍数\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E通过\\u003Ccode\\u003Eclass\_getInstanceSize\\u003C\\u002Fcode\\u003E可以得知：类的对象至少需要占用多少内存\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E{\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E11\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E test \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-literal\\"\\u003Etrue\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E22\\u003C\\u002Fspan\\u003E\\n} \\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E p \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E() \\nclass\_getInstanceSize(\\u003Cspan class=\\"hljs-built\_in\\"\\u003Etype\\u003C\\u002Fspan\\u003E(of: p)) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 40 \\u003C\\u002Fspan\\u003E\\nclass\_getInstanceSize(\\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E.\\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E) \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 40\\u003C\\u002Fspan\\u003E\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-30\\"\\u003E5. 引用类型的赋值操作\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E将引用类型初始化对象赋值给同一个指针变量，指针变量会指向另一块存储空间\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Einit\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Ewidth\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E, \\u003Cspan class=\\"hljs-params\\"\\u003Eheight\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.width \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E width\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.height \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E height\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E s1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E(width: \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E, height: \\u003Cspan class=\\"hljs-number\\"\\u003E20\\u003C\\u002Fspan\\u003E)\\ns1 \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E(width: \\u003Cspan class=\\"hljs-number\\"\\u003E11\\u003C\\u002Fspan\\u003E, height: \\u003Cspan class=\\"hljs-number\\"\\u003E22\\u003C\\u002Fspan\\u003E)\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Cblockquote\\u003E\\n\\u003Cp\\u003E\\u003Cstrong\\u003E用let定义的赋值操作\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fp\\u003E\\n\\u003C\\u002Fblockquote\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E如果用\\u003Ccode\\u003Elet\\u003C\\u002Fcode\\u003E定义的常量赋值引用类型会报错，因为会改变指针常量里存储的8个字节的地址值\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"3\\"\\u003E\\n\\u003Cli\\u003E但修改类里的属性值不会报错，因为修改属性值并不是修改的指针常量的内存，只是通过指针常量找到类所存储的堆空间的内存地址去修改类的属性\\n\\u003Cimg src=\\"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F83dccdb5d2be4945807070fcac919b0c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp\\" alt=\\"-w643\\" loading=\\"lazy\\"\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-31\\"\\u003E6. 嵌套类型\\u003C\\u002Fh2\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoker\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESuit\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003ECharacter\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E spades \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♠️\\"\\u003C\\u002Fspan\\u003E,\\n hearts \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♥️\\"\\u003C\\u002Fspan\\u003E,\\n diamonds \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♦️\\"\\u003C\\u002Fspan\\u003E,\\n clubs \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♣️\\"\\u003C\\u002Fspan\\u003E\\n }\\n \\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ERank\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003EInt\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E two \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E2\\u003C\\u002Fspan\\u003E, three, four, five, six, seven, eight, nine, ten\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E jack, queen, king, ace\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-type\\"\\u003EPoker\\u003C\\u002Fspan\\u003E.\\u003Cspan class=\\"hljs-type\\"\\u003ESuit\\u003C\\u002Fspan\\u003E.hearts.rawValue)\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E suit \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoker\\u003C\\u002Fspan\\u003E.\\u003Cspan class=\\"hljs-type\\"\\u003ESuit\\u003C\\u002Fspan\\u003E.spades\\nsuit \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .diamonds\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E rank \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoker\\u003C\\u002Fspan\\u003E.\\u003Cspan class=\\"hljs-type\\"\\u003ERank\\u003C\\u002Fspan\\u003E.five\\nrank \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E .king \\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Ch2 data-id=\\"heading-32\\"\\u003E7. 枚举、结构体、类都可以定义方法\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\n\\u003Col\\u003E\\n\\u003Cli\\u003E一般把定义在枚举、结构体、类内部的函数，叫做方法\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Estruct\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPoint\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E x: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E y: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eshow\\u003C\\u002Fspan\\u003E() {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"show\\"\\u003C\\u002Fspan\\u003E)\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E p \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPoint\\u003C\\u002Fspan\\u003E()\\np.show()\\n\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eshow\\u003C\\u002Fspan\\u003E() {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"show\\"\\u003C\\u002Fspan\\u003E)\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E s \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E()\\ns.show()\\n\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eenum\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003EPokerFace\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-title class\_\\"\\u003ECharacter\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Ecase\\u003C\\u002Fspan\\u003E spades \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♠️\\"\\u003C\\u002Fspan\\u003E,\\n hearts \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♥️\\"\\u003C\\u002Fspan\\u003E,\\n diamonds \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♦️\\"\\u003C\\u002Fspan\\u003E,\\n clubs \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-string\\"\\u003E\\"♣️\\"\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eshow\\u003C\\u002Fspan\\u003E() {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-string\\"\\u003E\\"show\\"\\u003C\\u002Fspan\\u003E)\\n }\\n}\\n\\n\\u003Cspan class=\\"hljs-keyword\\"\\u003Elet\\u003C\\u002Fspan\\u003E pf \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-type\\"\\u003EPokerFace\\u003C\\u002Fspan\\u003E.hearts\\npf.show()\\n\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"2\\"\\u003E\\n\\u003Cli\\u003E方法不管放在哪里，其内存都是放在代码段中\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\n\\u003Col start=\\"3\\"\\u003E\\n\\u003Cli\\u003E枚举、结构体、类里的方法其实会有隐式参数\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Fol\\u003E\\n\\u003Cpre\\u003E\\u003Ccode class=\\"hljs language-swift\\" lang=\\"swift\\"\\u003E\\u003Cspan class=\\"hljs-keyword\\"\\u003Eclass\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title class\_\\"\\u003ESize\\u003C\\u002Fspan\\u003E {\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E width: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Evar\\u003C\\u002Fspan\\u003E height: \\u003Cspan class=\\"hljs-type\\"\\u003EInt\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-operator\\"\\u003E=\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-number\\"\\u003E10\\u003C\\u002Fspan\\u003E\\n\\n \\u003Cspan class=\\"hljs-comment\\"\\u003E\\u002F\\u002F 默认会有隐式参数，该参数类型为当前枚举、结构体、类\\u003C\\u002Fspan\\u003E\\n \\u003Cspan class=\\"hljs-keyword\\"\\u003Efunc\\u003C\\u002Fspan\\u003E \\u003Cspan class=\\"hljs-title function\_\\"\\u003Eshow\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-params\\"\\u003Eself\\u003C\\u002Fspan\\u003E: \\u003Cspan class=\\"hljs-type\\"\\u003ESize\\u003C\\u002Fspan\\u003E) {\\n \\u003Cspan class=\\"hljs-built\_in\\"\\u003Eprint\\u003C\\u002Fspan\\u003E(\\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.width, \\u003Cspan class=\\"hljs-keyword\\"\\u003Eself\\u003C\\u002Fspan\\u003E.height)\\n }\\n}\\n\\u003C\\u002Fcode\\u003E\\u003C\\u002Fpre\\u003E\\n\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch1 data-id=\\"heading-33\\"\\u003E专题系列文章\\u003C\\u002Fh1\\u003E\\n\\u003Ch2 data-id=\\"heading-34\\"\\u003E1. 前知识\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7089043618803122183\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7089043618803122183\\u002F\\"\\u003E01-探究iOS底层原理|综述\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7093842449998561316\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7093842449998561316\\u002F\\"\\u003E02-探究iOS底层原理|编译器LLVM项目【Clang、SwiftC、优化器、LLVM】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7095079758844674056\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7095079758844674056\\"\\u003E03-探究iOS底层原理|LLDB\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115302848270696485\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115302848270696485\\u002F\\"\\u003E04-探究iOS底层原理|ARM64汇编\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-35\\"\\u003E2. 基于OC语言探索iOS底层原理\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7094409219361193997\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7094409219361193997\\u002F\\"\\u003E05-探究iOS底层原理|OC的本质\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7094503681684406302\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7094503681684406302\\"\\u003E06-探究iOS底层原理|OC对象的本质\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7096087582370431012\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7096087582370431012\\"\\u003E07-探究iOS底层原理|几种OC对象【实例对象、类对象、元类】、对象的isa指针、superclass、对象的方法调用、Class的底层本质\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7096480684847415303\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7096480684847415303\\"\\u003E08-探究iOS底层原理|Category底层结构、App启动时Class与Category装载过程、load 和 initialize 执行、关联对象\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115318628563550244\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115318628563550244\\u002F\\"\\u003E09-探究iOS底层原理|KVO\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115320523805949960\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115320523805949960\\u002F\\"\\u003E10-探究iOS底层原理|KVC\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115809219319693320\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7115809219319693320\\u002F\\"\\u003E11-探究iOS底层原理|探索Block的本质|【Block的数据类型(本质)与内存布局、变量捕获、Block的种类、内存管理、Block的修饰符、循环引用】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116103432095662111\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116103432095662111\\"\\u003E12-探究iOS底层原理|Runtime1【isa详解、class的结构、方法缓存cache\_t】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116147057739431950\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116147057739431950\\"\\u003E13-探究iOS底层原理|Runtime2【消息处理(发送、转发)&#x26;&#x26;动态方法解析、super的本质】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116291178365976590\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116291178365976590\\u002F\\"\\u003E14-探究iOS底层原理|Runtime3【Runtime的相关应用】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116515606597206030\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116515606597206030\\u002F\\"\\u003E15-探究iOS底层原理|RunLoop【两种RunloopMode、RunLoopMode中的Source0、Source1、Timer、Observer】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116521653667889165\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116521653667889165\\u002F\\"\\u003E16-探究iOS底层原理|RunLoop的应用\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116821775127674916\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116821775127674916\\u002F\\"\\u003E17-探究iOS底层原理|多线程技术的底层原理【GCD源码分析1:主队列、串行队列&#x26;&#x26;并行队列、全局并发队列】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116878578091819045\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116878578091819045\\"\\u003E18-探究iOS底层原理|多线程技术【GCD源码分析1:dispatch\_get\_global\_queue与dispatch\_(a)sync、单例、线程死锁】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116897833126625316\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116897833126625316\\"\\u003E19-探究iOS底层原理|多线程技术【GCD源码分析2:栅栏函数dispatch\_barrier\_(a)sync、信号量dispatch\_semaphore】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116898446358888485\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116898446358888485\\u002F\\"\\u003E20-探究iOS底层原理|多线程技术【GCD源码分析3:线程调度组dispatch\_group、事件源dispatch Source】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116898868737867789\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116898868737867789\\u002F\\"\\u003E21-探究iOS底层原理|多线程技术【线程锁：自旋锁、互斥锁、递归锁】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116907029465137165\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7116907029465137165\\"\\u003E22-探究iOS底层原理|多线程技术【原子锁atomic、gcd Timer、NSTimer、CADisplayLink】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7117274106940096520\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7117274106940096520\\"\\u003E23-探究iOS底层原理|内存管理【Mach-O文件、Tagged Pointer、对象的内存管理、copy、引用计数、weak指针、autorelease\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-36\\"\\u003E3. 基于Swift语言探索iOS底层原理\\u003C\\u002Fh2\\u003E\\n\\u003Cp\\u003E关于\\u003Ccode\\u003E函数\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E枚举\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E可选项\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E结构体\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E类\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E闭包\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E属性\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E方法\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003Eswift多态原理\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003EString\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003EArray\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003EDictionary\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003E引用计数\\u003C\\u002Fcode\\u003E、\\u003Ccode\\u003EMetaData\\u003C\\u002Fcode\\u003E等Swift基本语法和相关的底层原理文章有如下几篇:\\u003C\\u002Fp\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119020967430455327\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119020967430455327\\"\\u003E01-📝Swift5常用核心语法|了解Swift【Swift简介、Swift的版本、Swift编译原理】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119510159109390343\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119510159109390343\\"\\u003E02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119513630550261774\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119513630550261774\\"\\u003E03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119714488181325860\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119714488181325860\\"\\u003E04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119722433589805064\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7119722433589805064\\"\\u003E05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7253350009289424933\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fspost\\u002F7253350009289424933\\"\\u003E06-📝Swift5常用核心语法|编程范式与Swift源码【从OC到Swift、函数式编程、面向协议编程、响应式编程、Swift源码分析】\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch1 data-id=\\"heading-37\\"\\u003E其它底层原理专题\\u003C\\u002Fh1\\u003E\\n\\u003Ch2 data-id=\\"heading-38\\"\\u003E1. 底层原理相关专题\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7018755998823219213\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7018755998823219213\\"\\u003E01-计算机原理|计算机图形渲染原理这篇文章\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019117942377807908\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019117942377807908\\"\\u003E02-计算机原理|移动终端屏幕成像与卡顿 \\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-39\\"\\u003E2. iOS相关专题\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019193784806146079\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019193784806146079\\"\\u003E01-iOS底层原理|iOS的各个渲染框架以及iOS图层渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019200157119938590\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019200157119938590\\"\\u003E02-iOS底层原理|iOS动画渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019497906650497061\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7019497906650497061\\u002F\\"\\u003E03-iOS底层原理|iOS OffScreen Rendering 离屏渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7020613901033144351\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7020613901033144351\\"\\u003E04-iOS底层原理|因CPU、GPU资源消耗导致卡顿的原因和解决方案\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-40\\"\\u003E3. webApp相关专题\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021035020445810718\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021035020445810718\\u002F\\"\\u003E01-Web和类RN大前端的渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-41\\"\\u003E4. 跨平台开发方案相关专题\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021057396147486750\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021057396147486750\\u002F\\"\\u003E01-Flutter页面渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-42\\"\\u003E5. 阶段性总结:Native、WebApp、跨平台开发三种方案性能比较\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021071990723182606\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021071990723182606\\u002F\\"\\u003E01-Native、WebApp、跨平台开发三种方案性能比较\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-43\\"\\u003E6. Android、HarmonyOS页面渲染专题\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021840737431978020\\u002F\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021840737431978020\\u002F\\"\\u003E01-Android页面渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"#\\" title=\\"#\\"\\u003E02-HarmonyOS页面渲染原理\\u003C\\u002Fa\\u003E (\\u003Ccode\\u003E待输出\\u003C\\u002Fcode\\u003E)\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E\\n\\u003Ch2 data-id=\\"heading-44\\"\\u003E7. 小程序页面渲染专题\\u003C\\u002Fh2\\u003E\\n\\u003Cul\\u003E\\n\\u003Cli\\u003E\\u003Cstrong\\u003E\\u003Ca href=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021414123346853919\\" target=\\"\_blank\\" title=\\"https:\\u002F\\u002Fjuejin.cn\\u002Fpost\\u002F7021414123346853919\\"\\u003E01-小程序框架渲染原理\\u003C\\u002Fa\\u003E\\u003C\\u002Fstrong\\u003E\\u003C\\u002Fli\\u003E\\n\\u003C\\u002Ful\\u003E",hitArticleCache:d,relatedLoaded:a,dynamicDataReady:a,version:x,actionType:{FETCH:"view\\u002Fcolumn\\u002FFETCH",FETCH\_RELATED:"view\\u002Fcolumn\\u002FFETCH\_RELATED",FETCH\_RECOMMEND:"view\\u002Fcolumn\\u002FFETCH\_RECOMMEND",FETCH\_ADDITIONAL:"view\\u002Fcolumn\\u002FFETCH\_ADDITIONAL",FETCH\_SIDEBAR\_ADENTRY:"view\\u002Fcolumn\\u002FFETCH\_SIDEBAR\_ADENTRY",FETCH\_AUTHOR\_EXTRA:"view\\u002Fcolumn\\u002FFETCH\_AUTHOR\_EXTRA",RESET:"view\\u002Fcolumn\\u002FRESET"},recommendedArticleList:{list:\[{id:"7119714488181325860",screenshot:k,liked:a,article\_id:"7119714488181325860",article\_info:{article\_id:"7119714488181325860",user\_id:r,category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640463633482000\],visible\_level:b,link\_url:e,cover\_image:e,is\_gfw:b,title:"04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】",brief\_content:t,is\_english:b,is\_original:g,user\_index:4.840310947340444,original\_type:b,original\_author:e,content:e,ctime:"1657687821",mtime:"1688886504",rtime:"-62135596800",draft\_id:"7119059716654759949",view\_count:1332,collect\_count:w,digg\_count:g,comment\_count:b,hot\_index:67,is\_hot:b,rank\_index:3.4e-7,status:g,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:9},author\_user\_info:{user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",level:b,description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640463633481741",tag\_id:"6809640463633481741",tag\_name:"Swift",color:"#F44C29",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002Feb7ab66be4c2898b5aa9.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1436421185,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:8094,concern\_user\_count:73672,title:"Swift",tagId:"6809640463633481741",articleCount:8094,subscribersCount:73672,createdAt:c,updatedAt:c}\],user\_interact:{id:7119714488181326000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"04-📝Swift5常用核心语法|面向对象【属性、inout、类型属性、单例模式、方法、下标、继承、初始化】",user:{id:r,self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"Nike|移动大前端开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:y,blogAddress:k,selfDescription:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:t,latestCommentAt:c,createdAt:new Date(1657687821000),updatedAt:c,isTopicEvent:a,likedCount:g,likeCount:g,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1332,username:y,viewerHasLiked:a,draftId:"7119059716654759949",collectionCount:w},{id:"7119722433589805064",screenshot:k,liked:a,article\_id:"7119722433589805064",article\_info:{article\_id:"7119722433589805064",user\_id:r,category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640463633482000\],visible\_level:b,link\_url:e,cover\_image:e,is\_gfw:b,title:"05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】",brief\_content:t,is\_english:b,is\_original:g,user\_index:4.819644034037498,original\_type:b,original\_author:e,content:e,ctime:"1657689593",mtime:"1688831804",rtime:"-62135596800",draft\_id:"7119060553691037732",view\_count:1376,collect\_count:3,digg\_count:5,comment\_count:b,hot\_index:73,is\_hot:b,rank\_index:3.6e-7,status:g,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:9},author\_user\_info:{user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",level:b,description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640463633481741",tag\_id:"6809640463633481741",tag\_name:"Swift",color:"#F44C29",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002Feb7ab66be4c2898b5aa9.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1436421185,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:8094,concern\_user\_count:73672,title:"Swift",tagId:"6809640463633481741",articleCount:8094,subscribersCount:73672,createdAt:c,updatedAt:c}\],user\_interact:{id:7119722433589805000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"05-📝Swift5常用核心语法|高级语法【可选链、协议、错误处理、泛型、String与Array、高级运算符、扩展、访问控制、内存管理、字面量、模式匹配】",user:{id:r,self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"Nike|移动大前端开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:y,blogAddress:k,selfDescription:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:t,latestCommentAt:c,createdAt:new Date(1657689593000),updatedAt:c,isTopicEvent:a,likedCount:5,likeCount:5,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1376,username:y,viewerHasLiked:a,draftId:"7119060553691037732",collectionCount:3},{id:"6844903893470543879",screenshot:k,liked:a,article\_id:"6844903893470543879",article\_info:{article\_id:"6844903893470543879",user\_id:"2647279731481822",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000\],visible\_level:b,link\_url:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844903893470543879",cover\_image:e,is\_gfw:b,title:"Swift Json解析方法",brief\_content:"答：因为Swift类型相关的原因，如果需要在子类里使用mapping函数，那么必须在父类(如果有多层父类，必须在最顶层的父类)里定义一个空的mapping函数，然后在子类去override它。一样情况的还有didFinishMapping函数。 方便的获取节点层面的信息，不用担…",is\_english:b,is\_original:g,user\_index:2.1591715781382,original\_type:b,original\_author:e,content:e,ctime:"1563546923",mtime:"1598514048",rtime:"1563600087",draft\_id:"6845076381357834248",view\_count:2938,collect\_count:g,digg\_count:b,comment\_count:b,hot\_index:146,is\_hot:b,rank\_index:.00018409,status:g,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:b,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"2647279731481822",user\_name:"睡不好的黑眼圈",company:e,job\_title:e,avatar\_large:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fmirror-assets\\u002F16b510f1da0f7e521b0~tplv-t2oaga2asx-image.image",level:b,description:"其实是个路人甲",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:6844903893470544000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"Swift Json解析方法",user:{id:"2647279731481822",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"2647279731481822",user\_name:"睡不好的黑眼圈",company:e,job\_title:e,avatar\_large:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fmirror-assets\\u002F16b510f1da0f7e521b0~tplv-t2oaga2asx-image.image",description:"其实是个路人甲",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"睡不好的黑眼圈",blogAddress:k,selfDescription:"其实是个路人甲",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fmirror-assets\\u002F16b510f1da0f7e521b0~tplv-t2oaga2asx-image.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:"答：因为Swift类型相关的原因，如果需要在子类里使用mapping函数，那么必须在父类(如果有多层父类，必须在最顶层的父类)里定义一个空的mapping函数，然后在子类去override它。一样情况的还有didFinishMapping函数。 方便的获取节点层面的信息，不用担…",latestCommentAt:c,createdAt:new Date(1563546923000),updatedAt:c,isTopicEvent:a,likedCount:b,likeCount:b,content:e,originalUrl:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844903893470543879",type:"post",collected:a,viewsCount:2938,username:"睡不好的黑眼圈",viewerHasLiked:a,draftId:"6845076381357834248",collectionCount:g},{id:"6949574643443302407",screenshot:k,liked:a,article\_id:"6949574643443302407",article\_info:{article\_id:"6949574643443302407",user\_id:"3993032115367118",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000\],visible\_level:b,link\_url:e,cover\_image:"https:\\u002F\\u002Fp6-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F6acd107c43f1454c939d4e149a165743~tplv-k3u1fbpfcp-watermark.image",is\_gfw:b,title:"iOS-底层原理-01：源码探索的三种方式",brief\_content:"本文主要介绍下源码探索的三种方法1、符号断点直接跟流程2、通过按住control+step into3、汇编跟流程下面详细讲下这三种方法是如何查找到函数所在的源码库，以alloc为例1、符号断点直接跟",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1618074285",mtime:"1618109203",rtime:"1618109203",draft\_id:"6949567233559363620",view\_count:925,collect\_count:b,digg\_count:w,comment\_count:b,hot\_index:48,is\_hot:b,rank\_index:.00012495,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",level:b,description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:6949574643443302000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"iOS-底层原理-01：源码探索的三种方式",user:{id:"3993032115367118",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"iOS程序媛",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Style\_月月",blogAddress:k,selfDescription:"iOS研发，交流技术可关注微信公众号：Style月月专栏",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:"本文主要介绍下源码探索的三种方法1、符号断点直接跟流程2、通过按住control+step into3、汇编跟流程下面详细讲下这三种方法是如何查找到函数所在的源码库，以alloc为例1、符号断点直接跟",latestCommentAt:c,createdAt:new Date(1618074285000),updatedAt:c,isTopicEvent:a,likedCount:w,likeCount:w,content:e,originalUrl:e,type:"post",collected:a,viewsCount:925,username:"Style\_月月",viewerHasLiked:a,draftId:"6949567233559363620",collectionCount:b},{id:"7001872073253453838",screenshot:k,liked:a,article\_id:"7001872073253453838",article\_info:{article\_id:"7001872073253453838",user\_id:"3993032115367118",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640463633482000\],visible\_level:b,link\_url:e,cover\_image:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fa42d1ff4fbe8419082e140b141553091~tplv-k3u1fbpfcp-watermark.image",is\_gfw:b,title:"Swift-进阶 13：协议Protocol",brief\_content:"这是我参与8月更文挑战的第21天，活动详情查看：8月更文挑战 本文主要分析protocol的用法及底层存储结构 协议的基本用法 【语法格式】：协议的语法格式 class、struct、enum都可以遵",is\_english:b,is\_original:g,user\_index:3.560893838670121,original\_type:b,original\_author:e,content:e,ctime:"1630250423",mtime:"1630293815",rtime:"1630293815",draft\_id:"6997789653692579876",view\_count:1933,collect\_count:x,digg\_count:x,comment\_count:b,hot\_index:106,is\_hot:b,rank\_index:.00036411,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",level:b,description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640463633481741",tag\_id:"6809640463633481741",tag\_name:"Swift",color:"#F44C29",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002Feb7ab66be4c2898b5aa9.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1436421185,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:8094,concern\_user\_count:73672,title:"Swift",tagId:"6809640463633481741",articleCount:8094,subscribersCount:73672,createdAt:c,updatedAt:c}\],user\_interact:{id:7001872073253454000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"Swift-进阶 13：协议Protocol",user:{id:"3993032115367118",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"iOS程序媛",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Style\_月月",blogAddress:k,selfDescription:"iOS研发，交流技术可关注微信公众号：Style月月专栏",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:"这是我参与8月更文挑战的第21天，活动详情查看：8月更文挑战 本文主要分析protocol的用法及底层存储结构 协议的基本用法 【语法格式】：协议的语法格式 class、struct、enum都可以遵",latestCommentAt:c,createdAt:new Date(1630250423000),updatedAt:c,isTopicEvent:a,likedCount:x,likeCount:x,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1933,username:"Style\_月月",viewerHasLiked:a,draftId:"6997789653692579876",collectionCount:x},{id:"7116103432095662111",screenshot:k,liked:a,article\_id:"7116103432095662111",article\_info:{article\_id:"7116103432095662111",user\_id:r,category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640513700889000\],visible\_level:b,link\_url:e,cover\_image:e,is\_gfw:b,title:"12-探究iOS底层原理|Runtime【isa详解、class的结构、方法缓存cache\_t】",brief\_content:"在这篇文章中我们围绕\`Runtime\`展开,会逐个探索:isa详解、class的结构、方法缓存等。其它Runtime的知识,我们会在下一篇文章即系探索",is\_english:b,is\_original:g,user\_index:4.811906958245967,original\_type:b,original\_author:e,content:e,ctime:"1656847032",mtime:"1657849745",rtime:"1656915127",draft\_id:"7115976571558559751",view\_count:1123,collect\_count:6,digg\_count:z,comment\_count:g,hot\_index:61,is\_hot:b,rank\_index:.0004776,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:5},author\_user\_info:{user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",level:b,description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640513700888584",tag\_id:"6809640513700888584",tag\_name:"Xcode",color:"#26A8FB",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002Fa177fa3d60a1d0062129.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1440036648,mtime:1689233407,id\_type:9,tag\_alias:e,post\_article\_count:1532,concern\_user\_count:65883,title:"Xcode",tagId:"6809640513700888584",articleCount:1532,subscribersCount:65883,createdAt:c,updatedAt:c}\],user\_interact:{id:7116103432095662000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"12-探究iOS底层原理|Runtime【isa详解、class的结构、方法缓存cache\_t】",user:{id:r,self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"Nike|移动大前端开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:y,blogAddress:k,selfDescription:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:g,isEvent:k,abstract:"在这篇文章中我们围绕\`Runtime\`展开,会逐个探索:isa详解、class的结构、方法缓存等。其它Runtime的知识,我们会在下一篇文章即系探索",latestCommentAt:c,createdAt:new Date(1656847032000),updatedAt:c,isTopicEvent:a,likedCount:z,likeCount:z,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1123,username:y,viewerHasLiked:a,draftId:"7115976571558559751",collectionCount:6},{id:"6949586633830187045",screenshot:k,liked:a,article\_id:"6949586633830187045",article\_info:{article\_id:"6949586633830187045",user\_id:"3993032115367118",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000\],visible\_level:b,link\_url:e,cover\_image:"https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F8344e551c62846bb8cf9b137f4c193a6~tplv-k3u1fbpfcp-watermark.image",is\_gfw:b,title:"iOS-底层原理 23：KVO 底层原理",brief\_content:"KVO，全称为Key-Value observing，中文名为键值观察，KVO是一种机制，它允许将其他对象的指定属性的更改通知给对象。在Key-Value Observing Programming ",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1618076982",mtime:"1618219708",rtime:"1618219708",draft\_id:"6949586657465073695",view\_count:810,collect\_count:w,digg\_count:w,comment\_count:g,hot\_index:43,is\_hot:b,rank\_index:.00011216,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",level:b,description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:6949586633830187000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"iOS-底层原理 23：KVO 底层原理",user:{id:"3993032115367118",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"iOS程序媛",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Style\_月月",blogAddress:k,selfDescription:"iOS研发，交流技术可关注微信公众号：Style月月专栏",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:g,isEvent:k,abstract:"KVO，全称为Key-Value observing，中文名为键值观察，KVO是一种机制，它允许将其他对象的指定属性的更改通知给对象。在Key-Value Observing Programming ",latestCommentAt:c,createdAt:new Date(1618076982000),updatedAt:c,isTopicEvent:a,likedCount:w,likeCount:w,content:e,originalUrl:e,type:"post",collected:a,viewsCount:810,username:"Style\_月月",viewerHasLiked:a,draftId:"6949586657465073695",collectionCount:w},{id:"7017853525271150599",screenshot:k,liked:a,article\_id:"7017853525271150599",article\_info:{article\_id:"7017853525271150599",user\_id:"4477627143298423",category\_id:"6809635626661445640",tag\_ids:\[6809641204351926000,6809640399544517000\],visible\_level:b,link\_url:e,cover\_image:"https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002F5d178b1ebb7a4c0aa1e247abeda2013a~tplv-k3u1fbpfcp-watermark.image?",is\_gfw:b,title:"第五章 Combine的过滤操作符（drop系列操作符、prefix系列操作符）",brief\_content:"删除值是您在使用Combine进行数据处理时经常需要利用的有用功能。例如，当您想在第二个发布者开始发布之前忽略来自一个发布者的值，或者如果您想在Combine流开始时忽略特定数量的值，您可以使",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1633971403",mtime:"1634007183",rtime:"1634007183",draft\_id:"7017850728551022605",view\_count:607,collect\_count:b,digg\_count:g,comment\_count:b,hot\_index:31,is\_hot:b,rank\_index:.00011234,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"4477627143298423",user\_name:"Chr1s78",company:e,job\_title:e,avatar\_large:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fccf3794360f545c3ad37354b723980fe~tplv-k3u1fbpfcp-watermark.image?",level:b,description:e,followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809641204351926286",tag\_id:"6809641204351926286",tag\_name:"SwiftUI",color:e,icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F15596284841681fc99e72a9a2eea596951822dd7bc289.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1559599686,mtime:1689237921,id\_type:9,tag\_alias:e,post\_article\_count:1305,concern\_user\_count:3903,title:"SwiftUI",tagId:"6809641204351926286",articleCount:1305,subscribersCount:3903,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:7017853525271151000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"第五章 Combine的过滤操作符（drop系列操作符、prefix系列操作符）",user:{id:"4477627143298423",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"4477627143298423",user\_name:"Chr1s78",company:e,job\_title:e,avatar\_large:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fccf3794360f545c3ad37354b723980fe~tplv-k3u1fbpfcp-watermark.image?",description:e,followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Chr1s78",blogAddress:k,selfDescription:e,beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fccf3794360f545c3ad37354b723980fe~tplv-k3u1fbpfcp-watermark.image?",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:"删除值是您在使用Combine进行数据处理时经常需要利用的有用功能。例如，当您想在第二个发布者开始发布之前忽略来自一个发布者的值，或者如果您想在Combine流开始时忽略特定数量的值，您可以使",latestCommentAt:c,createdAt:new Date(1633971403000),updatedAt:c,isTopicEvent:a,likedCount:g,likeCount:g,content:e,originalUrl:e,type:"post",collected:a,viewsCount:607,username:"Chr1s78",viewerHasLiked:a,draftId:"7017850728551022605",collectionCount:b},{id:"7023212373007663117",screenshot:k,liked:a,article\_id:"7023212373007663117",article\_info:{article\_id:"7023212373007663117",user\_id:"4477627143298423",category\_id:"6809635626661445640",tag\_ids:\[6809641204351926000,6809640399544517000\],visible\_level:b,link\_url:e,cover\_image:"https:\\u002F\\u002Fp9-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fb37e9bd206ca42a78e422fc0eb29783e~tplv-k3u1fbpfcp-watermark.image?",is\_gfw:b,title:"第十章 其他操作符",brief\_content:"至此，在《Combine: Asynchronous Programming with Swift》书中的操作符讲解已经结束了，但其实还有些操作符没有被讲解到。我们会在此一一列出。 Encoding ",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1635219060",mtime:"1635237789",rtime:"1635237789",draft\_id:"7023211616086786056",view\_count:207,collect\_count:b,digg\_count:g,comment\_count:b,hot\_index:11,is\_hot:b,rank\_index:.00004101,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"4477627143298423",user\_name:"Chr1s78",company:e,job\_title:e,avatar\_large:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fccf3794360f545c3ad37354b723980fe~tplv-k3u1fbpfcp-watermark.image?",level:b,description:e,followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809641204351926286",tag\_id:"6809641204351926286",tag\_name:"SwiftUI",color:e,icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F15596284841681fc99e72a9a2eea596951822dd7bc289.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1559599686,mtime:1689237921,id\_type:9,tag\_alias:e,post\_article\_count:1305,concern\_user\_count:3903,title:"SwiftUI",tagId:"6809641204351926286",articleCount:1305,subscribersCount:3903,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:7023212373007663000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"第十章 其他操作符",user:{id:"4477627143298423",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"4477627143298423",user\_name:"Chr1s78",company:e,job\_title:e,avatar\_large:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fccf3794360f545c3ad37354b723980fe~tplv-k3u1fbpfcp-watermark.image?",description:e,followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Chr1s78",blogAddress:k,selfDescription:e,beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fccf3794360f545c3ad37354b723980fe~tplv-k3u1fbpfcp-watermark.image?",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:"至此，在《Combine: Asynchronous Programming with Swift》书中的操作符讲解已经结束了，但其实还有些操作符没有被讲解到。我们会在此一一列出。 Encoding ",latestCommentAt:c,createdAt:new Date(1635219060000),updatedAt:c,isTopicEvent:a,likedCount:g,likeCount:g,content:e,originalUrl:e,type:"post",collected:a,viewsCount:207,username:"Chr1s78",viewerHasLiked:a,draftId:"7023211616086786056",collectionCount:b},{id:"6844903928446844935",screenshot:k,liked:a,article\_id:"6844903928446844935",article\_info:{article\_id:"6844903928446844935",user\_id:"1609340754597607",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000\],visible\_level:b,link\_url:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844903928446844935",cover\_image:e,is\_gfw:b,title:"Swift面向协议编程(POP)",brief\_content:"在WWDC15上，苹果宣布Swift是世界上第一门面向协议编程(POP)语言。相比与传统的面向对象编程 (OOP)，POP 显得更加灵活。RxSwift、ReactorKit 核心也是面向协议编程的。 所谓协议，就是一组属性和\\u002F或方法的定义，而如果某个具体类型想要遵守一个协议，…",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1567166099",mtime:"1598520908",rtime:"1567262283",draft\_id:"6845076436085293064",view\_count:5858,collect\_count:49,digg\_count:38,comment\_count:9,hot\_index:339,is\_hot:b,rank\_index:.00043774,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"1609340754597607",user\_name:"king\_jensen",company:e,job\_title:"iOS开发",avatar\_large:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F2019\\u002F8\\u002F30\\u002F16ce28f2a71791c8~tplv-t2oaga2asx-image.image",level:b,description:"悟以往之不谏,知来者之可追。",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:6844903928446845000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"Swift面向协议编程(POP)",user:{id:"1609340754597607",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"1609340754597607",user\_name:"king\_jensen",company:e,job\_title:"iOS开发",avatar\_large:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F2019\\u002F8\\u002F30\\u002F16ce28f2a71791c8~tplv-t2oaga2asx-image.image",description:"悟以往之不谏,知来者之可追。",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"iOS开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"king\_jensen",blogAddress:k,selfDescription:"悟以往之不谏,知来者之可追。",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F2019\\u002F8\\u002F30\\u002F16ce28f2a71791c8~tplv-t2oaga2asx-image.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:9,isEvent:k,abstract:"在WWDC15上，苹果宣布Swift是世界上第一门面向协议编程(POP)语言。相比与传统的面向对象编程 (OOP)，POP 显得更加灵活。RxSwift、ReactorKit 核心也是面向协议编程的。 所谓协议，就是一组属性和\\u002F或方法的定义，而如果某个具体类型想要遵守一个协议，…",latestCommentAt:c,createdAt:new Date(1567166099000),updatedAt:c,isTopicEvent:a,likedCount:38,likeCount:38,content:e,originalUrl:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844903928446844935",type:"post",collected:a,viewsCount:5858,username:"king\_jensen",viewerHasLiked:a,draftId:"6845076436085293064",collectionCount:49},{id:"7119510159109390343",screenshot:k,liked:a,article\_id:"7119510159109390343",article\_info:{article\_id:"7119510159109390343",user\_id:r,category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640463633482000\],visible\_level:b,link\_url:e,cover\_image:e,is\_gfw:b,title:"02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】",brief\_content:t,is\_english:b,is\_original:g,user\_index:4.847565378965619,original\_type:b,original\_author:e,content:e,ctime:"1657640194",mtime:"1689050713",rtime:"-62135596800",draft\_id:"7119020959977193486",view\_count:530,collect\_count:z,digg\_count:z,comment\_count:3,hot\_index:33,is\_hot:b,rank\_index:1.8e-7,status:g,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:11},author\_user\_info:{user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",level:b,description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640463633481741",tag\_id:"6809640463633481741",tag\_name:"Swift",color:"#F44C29",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002Feb7ab66be4c2898b5aa9.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1436421185,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:8094,concern\_user\_count:73672,title:"Swift",tagId:"6809640463633481741",articleCount:8094,subscribersCount:73672,createdAt:c,updatedAt:c}\],user\_interact:{id:7119510159109390000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"02-📝Swift5常用核心语法|基础语法【Playground、常量与变量、常见数据类型、字面量、元组、流程控制、函数、枚举、可选项、guard语句、区间】",user:{id:r,self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:r,user\_name:y,company:"系统学习,深度思考",job\_title:"Nike|移动大前端开发",avatar\_large:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",description:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"Nike|移动大前端开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:y,blogAddress:k,selfDescription:"【移动大前端】iOS、Android、Harmony、MobileH5、Flutter、(微信&&支付宝)小程序\\r\\n【编程语言】C、C++、OC、Swift、Java、JS(vue、node)\\r\\n【积累方向】音视频+IM+智能硬件物联(工用&&商用&&家用)等",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp3-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F89f7d0fe5653ac8ada4098b59ebe2426~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:3,isEvent:k,abstract:t,latestCommentAt:c,createdAt:new Date(1657640194000),updatedAt:c,isTopicEvent:a,likedCount:z,likeCount:z,content:e,originalUrl:e,type:"post",collected:a,viewsCount:530,username:y,viewerHasLiked:a,draftId:"7119020959977193486",collectionCount:z},{id:"6844904067425124366",screenshot:k,liked:a,article\_id:"6844904067425124366",article\_info:{article\_id:"6844904067425124366",user\_id:"782508012091645",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000,6809640410084803000\],visible\_level:b,link\_url:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844904067425124366",cover\_image:e,is\_gfw:b,title:"OC - 属性关键字和所有权修饰符",brief\_content:"1. 属性关键字有哪些？ 苹果在 Xcode 6.3 引入的一个 Objective-C 的新特性nullability annotations。这些关键字可以用于属性、方法返回值和参数中，来指定对象的可空性，这样编写代码的时候就会智能提示。在 Swift 中可以使用?和!来表…",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1582042856",mtime:"1636468440",rtime:"1582079587",draft\_id:"6845076641266270215",view\_count:3529,collect\_count:19,digg\_count:15,comment\_count:6,hot\_index:197,is\_hot:b,rank\_index:.00030102,status:g,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:3},author\_user\_info:{user\_id:"782508012091645",user\_name:"师大小海腾",company:"BabyBus",job\_title:"iOS 开发者",avatar\_large:"https:\\u002F\\u002Fp6-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F1ecf5e320f518546c4a60e2884a7d9fb~300x300.image",level:b,description:"iOS 摸鱼周报编辑",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c},{entriesCount:k,subscribed:a,id:"6809640410084802573",tag\_id:"6809640410084802573",tag\_name:"Objective-C",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fleancloud-assets\\u002F71d968ea2fde62410b19.png~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:b,ctime:1435971640,mtime:1689237559,id\_type:9,tag\_alias:e,post\_article\_count:3428,concern\_user\_count:61065,title:"Objective-C",tagId:"6809640410084802573",articleCount:3428,subscribersCount:61065,createdAt:c,updatedAt:c}\],user\_interact:{id:6844904067425124000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"OC - 属性关键字和所有权修饰符",user:{id:"782508012091645",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"782508012091645",user\_name:"师大小海腾",company:"BabyBus",job\_title:"iOS 开发者",avatar\_large:"https:\\u002F\\u002Fp6-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F1ecf5e320f518546c4a60e2884a7d9fb~300x300.image",description:"iOS 摸鱼周报编辑",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"iOS 开发者",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"师大小海腾",blogAddress:k,selfDescription:"iOS 摸鱼周报编辑",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp6-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002F1ecf5e320f518546c4a60e2884a7d9fb~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:6,isEvent:k,abstract:"1. 属性关键字有哪些？ 苹果在 Xcode 6.3 引入的一个 Objective-C 的新特性nullability annotations。这些关键字可以用于属性、方法返回值和参数中，来指定对象的可空性，这样编写代码的时候就会智能提示。在 Swift 中可以使用?和!来表…",latestCommentAt:c,createdAt:new Date(1582042856000),updatedAt:c,isTopicEvent:a,likedCount:15,likeCount:15,content:e,originalUrl:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844904067425124366",type:"post",collected:a,viewsCount:3529,username:"师大小海腾",viewerHasLiked:a,draftId:"6845076641266270215",collectionCount:19},{id:"6949587150090272804",screenshot:k,liked:a,article\_id:"6949587150090272804",article\_info:{article\_id:"6949587150090272804",user\_id:"3993032115367118",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000\],visible\_level:b,link\_url:e,cover\_image:"https:\\u002F\\u002Fp3-juejin.byteimg.com\\u002Ftos-cn-i-k3u1fbpfcp\\u002Fedfdfc0bcc914c5893dd489c7b136aac~tplv-k3u1fbpfcp-watermark.image",is\_gfw:b,title:"iOS-底层原理 24：内存五大区",brief\_content:"在iOS中，内存主要分为栈区、堆区、全局区、常量区、代码区五大区域。如下图所示下面分别介绍这五大区栈区（Stack）定义栈是系统数据结构，其对应的进程或者线程是唯一的栈是向低地址扩展的数据结构栈是一块",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1618077098",mtime:"1618231269",rtime:"1618231269",draft\_id:"6949587308291031076",view\_count:1941,collect\_count:8,digg\_count:9,comment\_count:b,hot\_index:106,is\_hot:b,rank\_index:.00027654,status:w,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",level:b,description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:6949587150090273000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"iOS-底层原理 24：内存五大区",user:{id:"3993032115367118",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"3993032115367118",user\_name:"Style\_月月",company:e,job\_title:"iOS程序媛",avatar\_large:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",description:"iOS研发，交流技术可关注微信公众号：Style月月专栏",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"iOS程序媛",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Style\_月月",blogAddress:k,selfDescription:"iOS研发，交流技术可关注微信公众号：Style月月专栏",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp9-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fb7d17c093ad6425c4ec9f5a171334b46~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:b,isEvent:k,abstract:"在iOS中，内存主要分为栈区、堆区、全局区、常量区、代码区五大区域。如下图所示下面分别介绍这五大区栈区（Stack）定义栈是系统数据结构，其对应的进程或者线程是唯一的栈是向低地址扩展的数据结构栈是一块",latestCommentAt:c,createdAt:new Date(1618077098000),updatedAt:c,isTopicEvent:a,likedCount:9,likeCount:9,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1941,username:"Style\_月月",viewerHasLiked:a,draftId:"6949587308291031076",collectionCount:8},{id:"6844904003705241613",screenshot:k,liked:a,article\_id:"6844904003705241613",article\_info:{article\_id:"6844904003705241613",user\_id:"1556564198033991",category\_id:"6809635626661445640",tag\_ids:\[6809640399544517000\],visible\_level:b,link\_url:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844904003705241613",cover\_image:e,is\_gfw:b,title:"iOS 多线程陷阱",brief\_content:"本文首先介绍了多线程的一些基本概念，如：atomicity、Out-of-order execution、Memory barrier等。然后结合 iOS 实际开发，分析了Property、dealloc、target-action、block、mutable containe…",is\_english:b,is\_original:g,user\_index:b,original\_type:b,original\_author:e,content:e,ctime:"1574599270",mtime:"1600246293",rtime:"1574665055",draft\_id:"6845076544570785800",view\_count:3865,collect\_count:17,digg\_count:41,comment\_count:w,hot\_index:236,is\_hot:b,rank\_index:.00033058,status:g,verify\_status:g,audit\_status:w,mark\_content:e,display\_count:b,is\_markdown:g,app\_html\_content:e,version:g},author\_user\_info:{user\_id:"1556564198033991",user\_name:"峰之巅",company:e,job\_title:"移动开发",avatar\_large:"https:\\u002F\\u002Fp26-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fca0dc6fa206bce240c1650e7da6ef516~300x300.image",level:b,description:"追求高质量代码\\r\\nzxfcumtcs@gmail.com",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b},category:{category\_id:"6809635626661445640",category\_name:"iOS",category\_url:"ios",rank:z,back\_ground:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F34589746327a360a.png",icon:"https:\\u002F\\u002Flc-mhke0kuv.cn-n1.lcfile.com\\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show\_type:3,item\_type:w,promote\_tag\_cap:z,promote\_priority:z,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:\[{entriesCount:k,subscribed:a,id:"6809640399544516616",tag\_id:"6809640399544516616",tag\_name:"iOS",color:"#616161",icon:"https:\\u002F\\u002Fp1-jj.byteimg.com\\u002Ftos-cn-i-t2oaga2asx\\u002Fgold-user-assets\\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back\_ground:e,show\_navi:g,ctime:1435964171,mtime:1689239629,id\_type:9,tag\_alias:e,post\_article\_count:34986,concern\_user\_count:194419,title:"iOS",tagId:"6809640399544516616",articleCount:34986,subscribersCount:194419,createdAt:c,updatedAt:c}\],user\_interact:{id:6844904003705242000,omitempty:w,user\_id:2823201593501831,is\_digg:a,is\_follow:a,is\_collect:a,collect\_set\_count:b},org:{org\_info:c,is\_followed:a},req\_id:"20230713172206E0473FB032AACD89CCE1",status:{push\_status:b},extra:{extra:e},title:"iOS 多线程陷阱",user:{id:"1556564198033991",self\_description:k,followed:a,viewerIsFollowing:k,community:k,subscribedTagCount:b,wroteBookCount:b,boughtBookCount:b,isBindedPhone:a,level:b,user\_id:"1556564198033991",user\_name:"峰之巅",company:e,job\_title:"移动开发",avatar\_large:"https:\\u002F\\u002Fp26-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fca0dc6fa206bce240c1650e7da6ef516~300x300.image",description:"追求高质量代码\\r\\nzxfcumtcs@gmail.com",followee\_count:b,follower\_count:b,post\_article\_count:b,digg\_article\_count:b,got\_digg\_count:b,got\_view\_count:b,post\_shortmsg\_count:b,digg\_shortmsg\_count:b,isfollowed:a,favorable\_author:b,power:b,study\_point:b,university:{university\_id:f,name:e,logo:e},major:{major\_id:f,parent\_id:f,name:e},student\_status:b,select\_event\_count:b,select\_online\_course\_count:b,identity:b,is\_select\_annual:a,select\_annual\_rank:b,annual\_list\_type:b,extraMap:{},is\_logout:b,annual\_info:\[\],account\_amount:b,user\_growth\_info:{user\_id:b,jpower:b,jscore:b,jpower\_level:b,jscore\_level:b,jscore\_title:e,author\_achievement\_list:\[\],vip\_level:b,vip\_title:e,jscore\_next\_level\_score:b,jscore\_this\_level\_mini\_score:b,vip\_score:b},is\_vip:a,become\_author\_days:b,collection\_set\_article\_count:b,recommend\_article\_count\_daily:b,article\_collect\_count\_daily:b,juejinPower:b,jobTitle:"移动开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"峰之巅",blogAddress:k,selfDescription:"追求高质量代码\\r\\nzxfcumtcs@gmail.com",beLikedCount:b,beReadCount:b,followerCount:b,followingCount:b,collectionCount:b,createdCollectionCount:b,followingCollectionCount:b,postedPostsCount:b,pinCount:b,likedArticleCount:b,likedPinCount:b,avatar:"https:\\u002F\\u002Fp26-passport.byteacctimg.com\\u002Fimg\\u002Fuser-avatar\\u002Fca0dc6fa206bce240c1650e7da6ef516~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:b,applyEventCount:b,need\_lead:b,followTopicCnt:b},viewCount:k,commentsCount:w,isEvent:k,abstract:"本文首先介绍了多线程的一些基本概念，如：atomicity、Out-of-order execution、Memory barrier等。然后结合 iOS 实际开发，分析了Property、dealloc、target-action、block、mutable containe…",latestCommentAt:c,createdAt:new Date(1574599270000),updatedAt:c,isTopicEvent:a,likedCount:41,likeCount:41,content:e,originalUrl:"https:\\u002F\\u002Fjuejin.im\\u002Fpost\\u002F6844904003705241613",type:"post",collected:a,viewsCount:3865,username:"峰之巅",viewerHasLiked:a,draftId:"6845076544570785800",collectionCount:17}\],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:j,actionType:{UPDATE\_STATE:"view\\u002Fcolumn\\u002Frecommend-List\\u002FUPDATE\_STATE",FETCH\_MORE:"view\\u002Fcolumn\\u002Frecommend-List\\u002FFETCH\_MORE",FETCH:"view\\u002Fcolumn\\u002Frecommend-List\\u002FFETCH",RESET:"view\\u002Fcolumn\\u002Frecommend-List\\u002FRESET"},sort:n}},collection:{collection:{author:{}},actionType:{FETCH:"@\\u002Fview\\u002Fcollection\\u002FFETCH",REFRESH:"@\\u002Fview\\u002Fcollection\\u002FREFRESH",RESET:"@\\u002Fview\\u002Fcollection\\u002FRESET"},list:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Fcollection\\u002Flist\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Fcollection\\u002Flist\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Fcollection\\u002Flist\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Fcollection\\u002Flist\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fcollection\\u002Flist\\u002FRESET"},id:e,sort:o}},gettingStarted:{category:{},actionType:{UPDATE\_STATE:"@\\u002Fview\\u002FgettingStarted\\u002FUPDATE\_STATE",FOLLOW:"@\\u002Fview\\u002FgettingStarted\\u002FFOLLOW",RESET:"@\\u002Fview\\u002FgettingStarted\\u002FRESET",UPDATE\_CATEGORY:"@\\u002Fview\\u002FgettingStarted\\u002FUPDATE\_CATEGORY"}},pin:{pin:{user:{},imageUrlList:\[\]},pinList:\[\],actionType:{FETCH:"@\\u002Fview\\u002Fpin\\u002FFETCH",RESET:"@\\u002Fview\\u002Fpin\\u002FRESET"},sidebar:{list:\[\],after:e,loading:a,isRecommend:a,hasNextPage:d,actionType:{UPDATE\_STATE:"@\\u002Fview\\u002Fpin\\u002Fsidebar\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fpin\\u002Fsidebar\\u002FFETCH\_MORE",FETCH:"@\\u002Fview\\u002Fpin\\u002Fsidebar\\u002FFETCH",RESET:"@\\u002Fview\\u002Fpin\\u002Fsidebar\\u002FRESET"}},commentList:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Fpin\\u002FcommentList\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Fpin\\u002FcommentList\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Fpin\\u002FcommentList\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Fpin\\u002FcommentList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fpin\\u002FcommentList\\u002FRESET"},pinId:c},subCommentList:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Fpin\\u002FsubCommentList\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Fpin\\u002FsubCommentList\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Fpin\\u002FsubCommentList\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Fpin\\u002FsubCommentList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fpin\\u002FsubCommentList\\u002FRESET"},commentId:c}},topic:{topic:e,followedTopicList:\[\],actionType:{FETCH:"@\\u002Fview\\u002Ftopic\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Ftopic\\u002FUPDATE\_STATE",RESET:"@\\u002Fview\\u002Ftopic\\u002FRESET"},allTopicList:{pageSize:C,page:b,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Ftopic\\u002FallTopicList\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Ftopic\\u002FallTopicList\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Ftopic\\u002FallTopicList\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Ftopic\\u002FallTopicList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Ftopic\\u002FallTopicList\\u002FRESET"},sortType:m},pinlist:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Ftopic\\u002FpinList\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Ftopic\\u002FpinList\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Ftopic\\u002FpinList\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Ftopic\\u002FpinList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Ftopic\\u002FpinList\\u002FRESET"},sortType:n},sidebar:{actionType:{RESET:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002FRESET",UPDATE\_STATE:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002FUPDATE\_STATE"},attender:{pageSize:h,page:g,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002Fattender\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002Fattender\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002Fattender\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002Fattender\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Ftopic\\u002Fsidebar\\u002Fattender\\u002FRESET"},topicId:c}},followedList:{pageSize:C,page:b,total:b,pointer:c,lastPointer:c,list:\[\],loading:a,error:c,canPrev:d,canNext:d,linkList:\[\],lastFetchOnServer:a,actionType:{UPDATE:"@\\u002Fview\\u002Ftopic\\u002FfollowedList\\u002FUPDATE",FETCH:"@\\u002Fview\\u002Ftopic\\u002FfollowedList\\u002FFETCH",FORCE\_FETCH:"@\\u002Fview\\u002Ftopic\\u002FfollowedList\\u002FFORCE\_FETCH",FETCH\_MORE:"@\\u002Fview\\u002Ftopic\\u002FfollowedList\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Ftopic\\u002FfollowedList\\u002FRESET"},after:b}},recommendationIndex:{actionType:{FETCH\_USER:"@\\u002Fview\\u002Frecommendation\\u002FFETCH\_USER",FETCH\_MORE:"@\\u002Fview\\u002Frecommendation\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Frecommendation\\u002FRESET",FETCH:"@\\u002Fview\\u002Frecommendation\\u002FFETCH"},cursor:e,hasMore:e,userList:\[\],loading:a,skeleton:d,category:l,categoryNavList:\[\],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\\u002Fevent\\u002FFETCH",RESET:"view\\u002Fevent\\u002FRESET"}},coursesIndex:{loading:a,list:\[\],sort:"online",actionType:{FETCH:"view\\u002Fcourses\\u002FFETCH",RESET:"view\\u002Fcourses\\u002FRESET",FETCH\_MORE:"view\\u002Fcourses\\u002FFETCH\_MORE"}},team:{team:{},loading:d,actionType:{FETCH:"@\\u002Fview\\u002Fteam\\u002FFETCH",RESET:"@\\u002Fview\\u002Fteam\\u002FRESET",UPDATE:"@\\u002Fview\\u002Fteam\\u002FUPDATE",FOLLOW:"@\\u002Fview\\u002Fteam\\u002FFOLLOW"},detailList:{actionType:{RESET:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002FRESET"},posts:{list:\[\],hasMore:a,skeleton:a,loading:a,sort:o,actionType:{FETCH:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fposts\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fposts\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fposts\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fposts\\u002FRESET"}},pins:{list:\[\],hasMore:a,loading:a,skeleton:d,actionType:{FETCH:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fpins\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fpins\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fpins\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fpins\\u002FRESET"}},hire:{list:\[\],hasMore:a,cursor:f,loading:a,skeleton:d,actionType:{FETCH:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fhire\\u002FFETCH",UPDATE\_STATE:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fhire\\u002FUPDATE\_STATE",FETCH\_MORE:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fhire\\u002FFETCH\_MORE",RESET:"@\\u002Fview\\u002Fteam\\u002FdetailList\\u002Fhire\\u002FRESET"}}}},couponList:{list:{"0":q,"1":q,"2":q},showTooltip:a},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:\[\],unavailables:\[\]},discountList:\[\]},activityVip:{selectedVipSku:{}}},component:{indexAside:{bannerList:\[\],userList:\[\],actionType:{FETCH\_BANNER:"@\\u002Fcomponent\\u002Faside\\u002FFETCH\_BANNER",FETCH\_USER:"@\\u002Fcomponent\\u002Faside\\u002FFETCH\_USER",CLOSE\_BANNER:"@\\u002Fcomponent\\u002Faside\\u002FCLOSE\_BANNER"}}},dislike:{whiteList:\["1398234521548542",D,E,F,G,H,I\],officialList:\[D,E,"3984285868490807",F,"3562073405009031",G,"4433674252325966","53218623894222","2110693287406632","2498524693925623","430664288836334",H,I,"2832783991648407","3386151545092589"\]},ore:{oreCount:b},avatarMenuInfo:{user\_basic:{},user\_counter:{},user\_growth\_info:{}},common:{theme:"light",isFollowSystem:a},env:{ua:"Mozilla\\u002F5.0 (Macintosh; Intel Mac OS X 10\_15\_7) AppleWebKit\\u002F537.36 (KHTML, like Gecko) Chrome\\u002F114.0.0.0 Safari\\u002F537.36",serverEnv:"production"},auth:{user:c,clientId:c,token:c,qrCode:c,qrCodeStatus:c,qrCodeToken:c,userInitiated:a},tag:{subscribedTagList:\[\]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:\[\]},user:{subscribedTagList:\[\]},notification:{unreadCount:{user:b,system:b,total:b}},error:{location:c,errorView:c,statusCode:200,needRiskModal:a,riskAppealUrl:e},abTest:{info:{}},suspensionPanel:{needSuspension:d},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:c,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is\_show:b,start\_time:b},voteData:k},header:{leadStep:b,isPopupZlink:a},tcc:{tccConfig:c},route:{name:"column",path:J,hash:e,query:{searchId:"20230713172200389AC84EFABF449648C7"},params:{id:j},fullPath:"\\u002Fpost\\u002F7119513630550261774?searchId=20230713172200389AC84EFABF449648C7",meta:{isAvailableDarkMode:d},from:{name:c,path:K,hash:e,query:{},params:{},fullPath:K,meta:{}}}},serverRendered:d,routePath:J,config:{API\_HOST:"api.juejin.cn",CAPTCHA\_HOST:"verify.snssdk.com",PLATFORM\_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},SCM\_VERSION:"1.0.0.7551",http:{}},globalRefs:{}}}(false,0,null,true,"","0",1,20,"topic","7119513630550261774",void 0,"recommended","hot","popular","newest","following",{},"1574156381196600","03-📝Swift5常用核心语法|面向对象【闭包、结构体、类、枚举、值类型和引用类型】","复习Swift5核心语法,夯实基础,通过汇编查探Swift语言的本质。一步一步认识Swift的底层实现","7119352781336477703",1264,2,10,"没有故事的Zhang同学",4,4745,{},100,"1556564194374926","940837680722589","2780007432717400","1204720443866983","852876722177533","3227821828225517","\\u002Fpost\\u002F7119513630550261774","\\u002F"));